<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ðŸ“‹ HR - Einweisungsmanagement</title>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <style>
    :root{
      --primary:#4f46e5; --primary-dark:#4338ca; --primary-light:#818cf8;
      --secondary:#10b981; --secondary-dark:#059669;
      --danger:#ef4444; --danger-dark:#dc2626;
      --warning:#f59e0b; --warning-dark:#d97706;
      --dark:#111827; --dark-card:#1f2937;
      --light:#f9fafb; --gray:#6b7280; --gray-light:#d1d5db;
      --border:rgba(255,255,255,.12);

      --shadow-lg:0 10px 25px -5px rgba(0,0,0,.2);
      --shadow-md:0 4px 12px rgba(0,0,0,.08);
      --shadow-sm:0 1px 3px rgba(0,0,0,.1);

      --radius-lg:12px; --radius-md:8px; --radius-sm:6px;
      --transition:all .2s cubic-bezier(.4,0,.2,1);
    }

    *{margin:0;padding:0;box-sizing:border-box}

    body{
      font-family:'Inter',sans-serif;
      background:#0f172a;
      color:var(--light);
      min-height:100vh;
      overflow-x:hidden;
      font-size:14px;
      line-height:1.4;
    }

    .bg-effects{
      position:fixed; inset:0;
      z-index:-1; overflow:hidden;
    }
    .bg-gradient{
      position:absolute; inset:0;
      background:
        radial-gradient(circle at 15% 70%, rgba(79,70,229,.10) 0%, transparent 40%),
        radial-gradient(circle at 85% 30%, rgba(16,185,129,.08) 0%, transparent 40%);
    }

    .app-container{
      max-width:1200px;
      margin:0 auto;
      padding:16px;
      display:grid;
      grid-template-columns:280px 1fr;
      gap:16px;
      min-height:100vh;
    }

    /* Header */
    .app-header{
      grid-column:1 / -1;
      background:rgba(31,41,55,.8);
      backdrop-filter:blur(12px);
      border-radius:var(--radius-lg);
      padding:16px 20px;
      margin-bottom:16px;
      border:1px solid rgba(255,255,255,.08);
      box-shadow:var(--shadow-md);
    }
    .header-content{display:flex;justify-content:space-between;align-items:center}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{
      width:40px;height:40px;
      background:var(--primary);
      border-radius:var(--radius-md);
      display:flex;align-items:center;justify-content:center;
      font-size:18px;color:#fff;
      transition:var(--transition);
    }
    .logo:hover{transform:scale(1.05);background:var(--primary-dark)}
    .brand-text h1{font-size:18px;font-weight:800;color:#fff;margin-bottom:2px}
    .brand-text .subtitle{font-size:11px;color:var(--gray);font-weight:600}
    .header-stats{display:flex;gap:12px}
    .stat-card{
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      padding:10px 14px;
      background:rgba(255,255,255,.05);
      border-radius:var(--radius-md);
      border:1px solid rgba(255,255,255,.08);
      min-width:90px;
      transition:var(--transition);
    }
    .stat-card:hover{transform:translateY(-1px);background:rgba(255,255,255,.08)}
    .stat-value{font-size:20px;font-weight:800;color:#fff;margin-bottom:2px}
    .stat-label{font-size:10px;color:var(--gray);text-transform:uppercase;letter-spacing:.4px;font-weight:700}

    /* Sidebar */
    .sidebar{
      background:rgba(31,41,55,.8);
      backdrop-filter:blur(12px);
      border-radius:var(--radius-lg);
      padding:16px;
      border:1px solid rgba(255,255,255,.08);
      height:calc(100vh - 120px);
      position:sticky;
      top:20px;
      display:flex;
      flex-direction:column;
    }
    .sidebar-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
    .sidebar-title{
      font-size:14px;font-weight:800;color:var(--gray-light);
      display:flex;align-items:center;gap:8px;
      text-transform:uppercase;letter-spacing:.4px;
    }
    .employee-count{
      background:var(--primary);
      color:#fff;
      font-size:11px;font-weight:800;
      padding:4px 10px;
      border-radius:20px;
    }
    .sidebar-filter-buttons{display:flex;gap:6px;margin-bottom:16px}
    .sidebar-filter-btn{
      padding:8px 10px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius-sm);
      color:var(--gray-light);
      font-size:11px;font-weight:700;
      cursor:pointer;
      transition:var(--transition);
      flex:1;
      text-align:center;
    }
    .sidebar-filter-btn:hover{background:rgba(255,255,255,.08)}
    .sidebar-filter-btn.active{background:var(--primary);color:#fff;border-color:var(--primary)}

    .sidebar-controls{display:flex;flex-direction:column;gap:12px;margin-bottom:16px}
    .search-container{position:relative}
    .search-input{
      width:100%;
      padding:10px 12px 10px 36px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius-md);
      color:#fff;
      font-size:13px;
      transition:var(--transition);
    }
    .search-input::placeholder{color:rgba(255,255,255,.5)}
    .search-input:focus{
      outline:none;
      border-color:var(--primary);
      background:rgba(255,255,255,.08);
      box-shadow:0 0 0 2px rgba(79,70,229,.10);
    }
    .search-icon{
      position:absolute;left:12px;top:50%;
      transform:translateY(-50%);
      color:var(--gray);font-size:13px;
    }

    .employee-list-container{
      flex:1;
      display:flex;
      flex-direction:column;
      margin-bottom:16px;
      min-height:0;
    }
    .employee-list{
      display:flex;
      flex-direction:column;
      gap:12px;
      overflow-y:auto;
      padding-right:4px;
      flex:1;
      min-height:0;
    }
    .employee-list::-webkit-scrollbar{width:6px}
    .employee-list::-webkit-scrollbar-track{background:rgba(255,255,255,.05);border-radius:3px}
    .employee-list::-webkit-scrollbar-thumb{background:var(--primary);border-radius:3px}

    /* Employee Cards (kompakter + Badges hÃ¶her) */
    .employee-card{
      background:rgba(255,255,255,.03);
      border-radius:var(--radius-md);
      padding:14px;
      border:1px solid rgba(255,255,255,.08);
      cursor:pointer;
      transition:var(--transition);
      position:relative;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      gap:8px;

      min-height:110px;
      justify-content:flex-start;
    }
    .employee-card:hover{
      background:rgba(255,255,255,.05);
      border-color:rgba(79,70,229,.30);
      transform:translateY(-1px);
      box-shadow:var(--shadow-sm);
    }
    .employee-card.active{
      background:rgba(79,70,229,.10);
      border-color:var(--primary);
      box-shadow:0 0 0 1px var(--primary);
    }
    .employee-card::before{
      content:'';
      position:absolute;left:0;top:0;bottom:0;
      width:2px;background:var(--primary);
      opacity:0;transition:var(--transition);
    }
    .employee-card.active::before{opacity:1}

    .employee-top-row{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2px}
    .employee-name{font-weight:800;font-size:15px;color:#fff;line-height:1.3;word-break:break-word}
    .employee-dn{
      font-family:'Inter',monospace;
      font-size:11px;font-weight:800;
      color:var(--primary-light);
      background:rgba(79,70,229,.10);
      padding:2px 7px;
      border-radius:999px;
      border:1px solid rgba(79,70,229,.20);
      white-space:nowrap;
      flex-shrink:0;
      margin-left:8px;
    }
    .employee-meta{
      font-size:11px;color:var(--gray);
      line-height:1.3;
      margin-bottom:4px;
      display:flex;align-items:center;gap:4px;
    }
    .employee-meta i{font-size:10px;opacity:.6}

    .induction-badges{
      display:flex;gap:6px;flex-wrap:wrap;
      margin-top:0;
      padding-top:2px;
    }
    .induction-badge{
      font-size:10px;
      padding:3px 8px;
      border-radius:12px;
      font-weight:700;
      display:flex;align-items:center;gap:4px;
      white-space:nowrap;
      transition:var(--transition);
      border:1px solid transparent;
    }
    .induction-badge:hover{transform:translateY(-1px)}
    .badge-oral.pending{background:rgba(239,68,68,.10);color:#fca5a5;border-color:rgba(239,68,68,.20)}
    .badge-oral.completed{background:rgba(16,185,129,.10);color:#86efac;border-color:rgba(16,185,129,.20)}
    .badge-org.pending{background:rgba(245,158,11,.10);color:#fcd34d;border-color:rgba(245,158,11,.20)}
    .badge-org.completed{background:rgba(16,185,129,.10);color:#86efac;border-color:rgba(16,185,129,.20)}

    .quick-actions{display:grid;grid-template-columns:1fr;gap:8px;margin-top:auto}
    .quick-action-btn{
      padding:10px;
      background:rgba(79,70,229,.08);
      border:1px solid rgba(79,70,229,.15);
      border-radius:var(--radius-md);
      color:var(--primary-light);
      font-size:12px;font-weight:800;
      cursor:pointer;
      transition:var(--transition);
      display:flex;align-items:center;justify-content:center;gap:6px;
    }
    .quick-action-btn:hover{
      background:rgba(79,70,229,.12);
      border-color:var(--primary);
      transform:translateY(-1px);
      color:#fff;
    }

    /* Main Content */
    .main-content{
      background:rgba(31,41,55,.8);
      backdrop-filter:blur(12px);
      border-radius:var(--radius-lg);
      border:1px solid rgba(255,255,255,.08);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height:420px;
    }
    .content-header{
      padding:16px 20px;
      background:rgba(79,70,229,.05);
      border-bottom:1px solid rgba(255,255,255,.08);
      display:none;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
    }
    .employee-info h2{font-size:18px;font-weight:900;color:#fff;margin-bottom:8px}
    .employee-tags{display:flex;gap:12px;flex-wrap:wrap}
    .employee-tag{display:flex;align-items:center;gap:6px;font-size:12px;color:var(--gray);font-weight:700}
    .tag-value{
      color:#fff;
      font-weight:800;
      background:rgba(79,70,229,.10);
      padding:3px 8px;
      border-radius:4px;
      border:1px solid rgba(79,70,229,.20);
      font-size:11px;
    }
    .action-buttons{display:flex;gap:8px;flex-wrap:wrap}

    .btn{
      padding:8px 12px;
      border:none;
      border-radius:var(--radius-md);
      font-weight:800;
      cursor:pointer;
      transition:var(--transition);
      display:inline-flex;align-items:center;justify-content:center;gap:6px;
      font-size:12px;
      user-select:none;
    }
    .btn-primary{background:var(--primary);color:#fff}
    .btn-primary:hover{background:var(--primary-dark);transform:translateY(-1px)}
    .btn-secondary{
      background:rgba(255,255,255,.08);
      color:#fff;
      border:1px solid rgba(255,255,255,.12);
    }
    .btn-secondary:hover{background:rgba(255,255,255,.12);transform:translateY(-1px)}
    .btn-danger{background:var(--danger);color:#fff}
    .btn-danger:hover{background:var(--danger-dark);transform:translateY(-1px)}

    .induction-content{
      padding:20px;
      flex:1;
      overflow-y:auto;
      display:none;
    }

    .induction-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:16px;
      margin-bottom:20px;
    }
    .induction-card{
      background:rgba(255,255,255,.03);
      border-radius:var(--radius-md);
      padding:16px;
      border:1px solid rgba(255,255,255,.08);
      transition:var(--transition);
      position:relative;
    }
    .induction-card.completed{
      border-color:var(--secondary);
      background:rgba(16,185,129,.05);
    }
    .induction-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;gap:10px}
    .induction-title{
      font-size:14px;font-weight:900;color:#fff;
      display:flex;align-items:center;gap:8px;
    }
    .induction-icon{
      width:32px;height:32px;
      background:var(--primary);
      border-radius:var(--radius-md);
      display:flex;align-items:center;justify-content:center;
      font-size:14px;color:#fff;
    }
    .induction-card.completed .induction-icon{background:var(--secondary)}
    .induction-status{
      font-size:11px;font-weight:900;
      padding:4px 8px;border-radius:12px;
      background:rgba(255,255,255,.08);
      color:var(--gray);
      white-space:nowrap;
    }
    .induction-card.completed .induction-status{background:rgba(16,185,129,.15);color:var(--secondary)}

    .oral-form-grid, .org-form-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
      margin-bottom:4px;
    }
    .form-group{display:flex;flex-direction:column;gap:6px}
    .form-label{
      font-weight:900;color:var(--gray-light);
      font-size:11px;text-transform:uppercase;letter-spacing:.4px;
    }
    .form-input,.form-select,.form-textarea{
      padding:8px 10px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius-sm);
      color:#fff;
      font-size:13px;
      transition:var(--transition);
      width:100%;
    }
    .form-input::placeholder,.form-textarea::placeholder{color:rgba(255,255,255,.4)}
    .form-select{
      color:#fff !important;
      background-color:rgba(255,255,255,.05) !important;
      appearance:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='white' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
      background-repeat:no-repeat;
      background-position:right 10px center;
      padding-right:30px;
    }
    .form-input:focus,.form-select:focus,.form-textarea:focus{
      outline:none;
      border-color:var(--primary);
      background:rgba(255,255,255,.08);
      box-shadow:0 0 0 2px rgba(79,70,229,.10);
    }
    .form-textarea{
      resize:vertical;
      min-height:60px;
      font-family:'Inter',sans-serif;
      line-height:1.4;
    }

    .time-container{
      display:grid;
      grid-template-columns:1fr auto 1fr;
      gap:8px;
      align-items:center;
    }
    .time-separator{color:var(--gray);font-weight:700;text-align:center;font-size:12px;padding:0 4px}
    input[type="time"]{font-size:13px;padding:7px 8px}

    /* Toggle */
    .toggle-switch{position:relative;display:inline-block;width:44px;height:24px}
    .toggle-switch input{opacity:0;width:0;height:0}
    .toggle-slider{
      position:absolute;cursor:pointer;inset:0;
      background-color:rgba(255,255,255,.10);
      transition:var(--transition);
      border-radius:34px;
    }
    .toggle-slider:before{
      position:absolute;content:"";
      height:16px;width:16px;left:4px;bottom:4px;
      background-color:#fff;
      transition:var(--transition);
      border-radius:50%;
    }
    input:checked + .toggle-slider{background-color:var(--secondary)}
    input:checked + .toggle-slider:before{transform:translateX(20px)}

    /* Templates */
    .templates-section{
      background:rgba(255,255,255,.03);
      border-radius:var(--radius-md);
      padding:16px;
      border:1px solid rgba(255,255,255,.08);
    }
    .section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;gap:10px;flex-wrap:wrap}
    .section-title{
      font-size:14px;font-weight:900;color:#fff;
      display:flex;align-items:center;gap:8px;
    }
    .template-actions{display:flex;gap:8px;flex-wrap:wrap}

    /* WICHTIG: Vorlagen untereinander (immer) */
    .template-cards{
      display:grid;
      grid-template-columns:1fr; /* <- war 1fr 1fr */
      gap:16px;
    }

    .template-card{
      background:rgba(0,0,0,.20);
      border-radius:var(--radius-md);
      padding:16px;
      border:1px solid rgba(255,255,255,.08);
    }
    .template-card.completed{border-color:var(--secondary)}
    .template-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;gap:10px}
    .template-card-title{
      font-size:13px;font-weight:900;color:#fff;
      display:flex;align-items:center;gap:6px;
    }
    .template-badge{
      font-size:10px;font-weight:900;
      padding:3px 8px;border-radius:12px;
      background:rgba(79,70,229,.10);
      color:var(--primary-light);
      white-space:nowrap;
    }
    .template-content{
      font-family:Consolas,Monaco,monospace;
      background:rgba(0,0,0,.30);
      padding:12px;
      border-radius:var(--radius-sm);
      border-left:2px solid var(--primary);
      overflow-x:auto;
      white-space:pre-wrap;
      word-wrap:break-word;
      font-size:11px;
      line-height:1.4;
      color:var(--gray-light);
      max-height:180px;
      overflow-y:auto;
    }
    .template-card.completed .template-content{border-left-color:var(--secondary)}

    /* Floating Buttons Container */
    .floating-buttons-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      z-index: 1000;
    }

    .floating-button {
      width: 56px;
      height: 56px;
      background: var(--primary);
      border: none;
      border-radius: 50%;
      color: #fff;
      font-size: 20px;
      cursor: pointer;
      box-shadow: var(--shadow-lg);
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .floating-button:hover {
      background: var(--primary-dark);
      transform: scale(1.1);
      box-shadow: 0 10px 25px rgba(79,70,229,.3);
    }

    .floating-button.soldaten {
      background: var(--warning);
    }

    .floating-button.soldaten:hover {
      background: var(--warning-dark);
    }

    .floating-button.ankundigung {
      background: #8b5cf6;
    }

    .floating-button.ankundigung:hover {
      background: #7c3aed;
    }

    /* AnkÃ¼ndigungen/Besprechungen/Aufstellungen Modal */
    .ankundigung-modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.85);
      backdrop-filter: blur(4px);
      z-index: 2000;
      align-items: center;
      justify-content: center;
      padding: 20px;
      animation: fadeIn .2s ease;
    }

    .ankundigung-modal.active {
      display: flex;
    }

    .ankundigung-content {
      background: rgba(31,41,55,.95);
      border-radius: var(--radius-lg);
      padding: 24px;
      width: 100%;
      max-width: 900px;
      max-height: 90vh;
      border: 1px solid rgba(255,255,255,.15);
      box-shadow: var(--shadow-lg);
      animation: slideUp .2s ease;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .ankundigung-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(255,255,255,.1);
      flex-shrink: 0;
    }

    .ankundigung-title {
      font-size: 18px;
      font-weight: 900;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .ankundigung-title i {
      color: #8b5cf6;
      font-size: 20px;
    }

    .ankundigung-close {
      background: none;
      border: none;
      color: var(--gray);
      font-size: 20px;
      cursor: pointer;
      transition: var(--transition);
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .ankundigung-close:hover {
      color: #fff;
      background: rgba(255,255,255,.1);
    }

    .ankundigung-body {
      flex: 1;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }

    .ankundigung-tabs {
      display: flex;
      gap: 2px;
      margin-bottom: 16px;
      border-bottom: 1px solid rgba(255,255,255,.1);
      flex-shrink: 0;
    }

    .ankundigung-tab {
      padding: 12px 20px;
      background: none;
      border: none;
      color: var(--gray);
      font-weight: 900;
      cursor: pointer;
      transition: var(--transition);
      font-size: 13px;
      position: relative;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .ankundigung-tab:hover {
      color: #8b5cf6;
    }

    .ankundigung-tab.active {
      color: #8b5cf6;
    }

    .ankundigung-tab.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      right: 0;
      height: 2px;
      background: #8b5cf6;
    }

    .ankundigung-form-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-bottom: 20px;
    }

    .ankundigung-form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .ankundigung-label {
      font-weight: 900;
      color: var(--gray-light);
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: .5px;
    }

    .ankundigung-input {
      padding: 12px 16px;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.1);
      border-radius: var(--radius-md);
      color: #fff;
      font-size: 14px;
      transition: var(--transition);
      width: 100%;
      font-family: 'Inter', sans-serif;
    }

    .ankundigung-input:focus {
      outline: none;
      border-color: #8b5cf6;
      background: rgba(255,255,255,.08);
      box-shadow: 0 0 0 3px rgba(139,92,246,.15);
    }

    .ankundigung-textarea {
      min-height: 120px;
      resize: vertical;
      line-height: 1.5;
    }

    .ankundigung-preview {
      background: rgba(0,0,0,.3);
      border-radius: var(--radius-md);
      padding: 20px;
      border-left: 3px solid #8b5cf6;
      margin-top: 10px;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    .ankundigung-preview-title {
      font-weight: 900;
      color: var(--gray-light);
      margin-bottom: 12px;
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .ankundigung-preview-content {
      font-family: 'Consolas', 'Monaco', monospace;
      white-space: pre-wrap;
      word-wrap: break-word;
      font-size: 12px;
      line-height: 1.4;
      color: #fff;
      background: rgba(0,0,0,.2);
      padding: 16px;
      border-radius: var(--radius-sm);
      max-height: 200px;
      overflow-y: auto;
      min-height: 100px;
    }

    .ankundigung-preview-content::-webkit-scrollbar {
      width: 6px;
    }

    .ankundigung-preview-content::-webkit-scrollbar-track {
      background: rgba(255,255,255,.05);
      border-radius: 3px;
    }

    .ankundigung-preview-content::-webkit-scrollbar-thumb {
      background: #8b5cf6;
      border-radius: 3px;
    }

    /* Container fÃ¼r den "Neue AnkÃ¼ndigung" Tab-Inhalt */
    .ankundigung-tab-content {
      flex: 1;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }

    /* WICHTIG: Scrollbar fÃ¼r AnkÃ¼ndigungen-Liste */
    .ankundigung-liste-container {
      flex: 1;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }

    .ankundigung-liste {
      flex: 1;
      overflow-y: auto;
      padding-right: 8px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      min-height: 0;
    }

    .ankundigung-liste::-webkit-scrollbar {
      width: 8px;
    }

    .ankundigung-liste::-webkit-scrollbar-track {
      background: rgba(255,255,255,.05);
      border-radius: 4px;
    }

    .ankundigung-liste::-webkit-scrollbar-thumb {
      background: #8b5cf6;
      border-radius: 4px;
    }

    .ankundigung-liste::-webkit-scrollbar-thumb:hover {
      background: #7c3aed;
    }

    .ankundigung-item {
      background: rgba(255,255,255,.03);
      border-radius: var(--radius-md);
      padding: 16px;
      border: 1px solid rgba(255,255,255,.08);
      transition: var(--transition);
      flex-shrink: 0;
    }

    .ankundigung-item:hover {
      background: rgba(255,255,255,.05);
      border-color: #8b5cf6;
    }

    .ankundigung-item-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 12px;
    }

    .ankundigung-item-title {
      font-weight: 900;
      color: #fff;
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .ankundigung-item-type {
      font-family: 'Inter', monospace;
      background: rgba(139,92,246,.10);
      color: #a78bfa;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 900;
      border: 1px solid rgba(139,92,246,.20);
    }

    .ankundigung-item-date {
      color: var(--gray);
      font-size: 11px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .ankundigung-item-content {
      color: var(--gray-light);
      font-size: 13px;
      line-height: 1.5;
      margin-bottom: 12px;
      padding: 12px;
      background: rgba(0,0,0,.2);
      border-radius: var(--radius-sm);
      border-left: 2px solid #8b5cf6;
      max-height: 100px;
      overflow-y: auto;
    }

    .ankundigung-item-content::-webkit-scrollbar {
      width: 4px;
    }

    .ankundigung-item-content::-webkit-scrollbar-track {
      background: rgba(255,255,255,.03);
      border-radius: 2px;
    }

    .ankundigung-item-content::-webkit-scrollbar-thumb {
      background: rgba(139,92,246,.30);
      border-radius: 2px;
    }

    .ankundigung-item-template {
      font-family: 'Consolas', 'Monaco', monospace;
      white-space: pre-wrap;
      word-wrap: break-word;
      font-size: 11px;
      line-height: 1.4;
      color: var(--gray-light);
      background: rgba(0,0,0,.3);
      padding: 12px;
      border-radius: var(--radius-sm);
      border: 1px solid rgba(255,255,255,.08);
      max-height: 150px;
      overflow-y: auto;
      margin-bottom: 12px;
    }

    .ankundigung-item-template::-webkit-scrollbar {
      width: 4px;
    }

    .ankundigung-item-template::-webkit-scrollbar-track {
      background: rgba(255,255,255,.03);
      border-radius: 2px;
    }

    .ankundigung-item-template::-webkit-scrollbar-thumb {
      background: rgba(139,92,246,.30);
      border-radius: 2px;
    }

    .ankundigung-item-actions {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
    }

    .ankundigung-item-btn {
      padding: 6px 12px;
      border: none;
      border-radius: var(--radius-sm);
      font-weight: 900;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      font-size: 11px;
    }

    .ankundigung-item-btn-copy {
      background: rgba(139,92,246,.15);
      color: #a78bfa;
      border: 1px solid rgba(139,92,246,.25);
    }

    .ankundigung-item-btn-copy:hover {
      background: rgba(139,92,246,.25);
    }

    .ankundigung-item-btn-delete {
      background: rgba(239,68,68,.15);
      color: #fca5a5;
      border: 1px solid rgba(239,68,68,.25);
    }

    .ankundigung-item-btn-delete:hover {
      background: rgba(239,68,68,.25);
    }

    .empty-ankundigung {
      text-align: center;
      padding: 40px 20px;
      color: var(--gray);
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .empty-ankundigung-icon {
      font-size: 36px;
      margin-bottom: 12px;
      opacity: .3;
    }

    .empty-ankundigung-title {
      font-size: 14px;
      font-weight: 900;
      margin-bottom: 6px;
      color: var(--gray-light);
    }

    .ankundigung-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-top: 10px;
      padding-top: 20px;
      border-top: 1px solid rgba(255,255,255,.1);
      flex-shrink: 0;
    }

    .ankundigung-btn {
      padding: 10px 20px;
      border: none;
      border-radius: var(--radius-md);
      font-weight: 900;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 13px;
    }

    .ankundigung-btn-copy {
      background: #8b5cf6;
      color: #fff;
    }

    .ankundigung-btn-copy:hover {
      background: #7c3aed;
      transform: translateY(-1px);
    }

    .ankundigung-btn-save {
      background: var(--secondary);
      color: #fff;
    }

    .ankundigung-btn-save:hover {
      background: var(--secondary-dark);
      transform: translateY(-1px);
    }

    .ankundigung-search-container {
      position: relative;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    .ankundigung-search-input {
      width: 100%;
      padding: 12px 16px 12px 44px;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.1);
      border-radius: var(--radius-md);
      color: #fff;
      font-size: 14px;
      transition: var(--transition);
    }

    .ankundigung-search-input::placeholder {
      color: rgba(255,255,255,.5);
    }

    .ankundigung-search-input:focus {
      outline: none;
      border-color: #8b5cf6;
      background: rgba(255,255,255,.08);
      box-shadow: 0 0 0 3px rgba(139,92,246,.15);
    }

    .ankundigung-search-icon {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--gray);
      font-size: 16px;
    }

    /* SoldatengesprÃ¤ch Modal */
    .soldaten-modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.85);
      backdrop-filter: blur(4px);
      z-index: 2000;
      align-items: center;
      justify-content: center;
      padding: 20px;
      animation: fadeIn .2s ease;
    }

    .soldaten-modal.active {
      display: flex;
    }

    .soldaten-content {
      background: rgba(31,41,55,.95);
      border-radius: var(--radius-lg);
      padding: 24px;
      width: 100%;
      max-width: 900px;
      max-height: 90vh;
      border: 1px solid rgba(255,255,255,.15);
      box-shadow: var(--shadow-lg);
      animation: slideUp .2s ease;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .soldaten-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(255,255,255,.1);
      flex-shrink: 0;
    }

    .soldaten-title {
      font-size: 18px;
      font-weight: 900;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .soldaten-title i {
      color: var(--warning);
      font-size: 20px;
    }

    .soldaten-close {
      background: none;
      border: none;
      color: var(--gray);
      font-size: 20px;
      cursor: pointer;
      transition: var(--transition);
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .soldaten-close:hover {
      color: #fff;
      background: rgba(255,255,255,.1);
    }

    .soldaten-body {
      flex: 1;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }

    .soldaten-tabs {
      display: flex;
      gap: 2px;
      margin-bottom: 16px;
      border-bottom: 1px solid rgba(255,255,255,.1);
      flex-shrink: 0;
    }

    .soldaten-tab {
      padding: 12px 20px;
      background: none;
      border: none;
      color: var(--gray);
      font-weight: 900;
      cursor: pointer;
      transition: var(--transition);
      font-size: 13px;
      position: relative;
    }

    .soldaten-tab:hover {
      color: var(--warning);
    }

    .soldaten-tab.active {
      color: var(--warning);
    }

    .soldaten-tab.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--warning);
    }

    .soldaten-form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 20px;
    }

    .soldaten-form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .soldaten-label {
      font-weight: 900;
      color: var(--gray-light);
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: .5px;
    }

    .soldaten-input {
      padding: 12px 16px;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.1);
      border-radius: var(--radius-md);
      color: #fff;
      font-size: 14px;
      transition: var(--transition);
      width: 100%;
      font-family: 'Inter', sans-serif;
    }

    .soldaten-input:focus {
      outline: none;
      border-color: var(--warning);
      background: rgba(255,255,255,.08);
      box-shadow: 0 0 0 3px rgba(245,158,11,.15);
    }

    .soldaten-textarea {
      min-height: 120px;
      resize: vertical;
      line-height: 1.5;
    }

    .soldaten-preview {
      background: rgba(0,0,0,.3);
      border-radius: var(--radius-md);
      padding: 20px;
      border-left: 3px solid var(--warning);
      margin-top: 10px;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    .soldaten-preview-title {
      font-weight: 900;
      color: var(--gray-light);
      margin-bottom: 12px;
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* WICHTIG: Scrollbar fÃ¼r die Vorschau im "Neues GesprÃ¤ch" Tab */
    .soldaten-preview-content {
      font-family: 'Consolas', 'Monaco', monospace;
      white-space: pre-wrap;
      word-wrap: break-word;
      font-size: 12px;
      line-height: 1.4;
      color: #fff;
      background: rgba(0,0,0,.2);
      padding: 16px;
      border-radius: var(--radius-sm);
      max-height: 200px;
      overflow-y: auto;
      min-height: 100px;
    }

    .soldaten-preview-content::-webkit-scrollbar {
      width: 6px;
    }

    .soldaten-preview-content::-webkit-scrollbar-track {
      background: rgba(255,255,255,.05);
      border-radius: 3px;
    }

    .soldaten-preview-content::-webkit-scrollbar-thumb {
      background: var(--warning);
      border-radius: 3px;
    }

    /* Container fÃ¼r den "Neues GesprÃ¤ch" Tab-Inhalt */
    .soldaten-tab-content {
      flex: 1;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }

    /* WICHTIG: Scrollbar fÃ¼r SoldatengesprÃ¤ch-Liste */
    .soldaten-liste-container {
      flex: 1;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }

    .soldaten-liste {
      flex: 1;
      overflow-y: auto;
      padding-right: 8px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      min-height: 0;
    }

    .soldaten-liste::-webkit-scrollbar {
      width: 8px;
    }

    .soldaten-liste::-webkit-scrollbar-track {
      background: rgba(255,255,255,.05);
      border-radius: 4px;
    }

    .soldaten-liste::-webkit-scrollbar-thumb {
      background: var(--warning);
      border-radius: 4px;
    }

    .soldaten-liste::-webkit-scrollbar-thumb:hover {
      background: var(--warning-dark);
    }

    .soldaten-item {
      background: rgba(255,255,255,.03);
      border-radius: var(--radius-md);
      padding: 16px;
      border: 1px solid rgba(255,255,255,.08);
      transition: var(--transition);
      flex-shrink: 0;
    }

    .soldaten-item:hover {
      background: rgba(255,255,255,.05);
      border-color: var(--warning);
    }

    .soldaten-item-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 12px;
    }

    .soldaten-item-name {
      font-weight: 900;
      color: #fff;
      font-size: 15px;
    }

    .soldaten-item-dn {
      font-family: 'Inter', monospace;
      background: rgba(245,158,11,.10);
      color: #fcd34d;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 900;
      border: 1px solid rgba(245,158,11,.20);
    }

    .soldaten-item-date {
      color: var(--gray);
      font-size: 11px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    /* GEÃ„NDERT: Sonstiges mit gleichem Styling wie Notizen */
    .soldaten-item-notizen {
      color: var(--gray-light);
      font-size: 13px;
      line-height: 1.5;
      margin-bottom: 12px;
      padding: 12px;
      background: rgba(0,0,0,.2);
      border-radius: var(--radius-sm);
      border-left: 2px solid var(--warning);
      max-height: 100px;
      overflow-y: auto;
    }

    .soldaten-item-notizen::-webkit-scrollbar {
      width: 4px;
    }

    .soldaten-item-notizen::-webkit-scrollbar-track {
      background: rgba(255,255,255,.03);
      border-radius: 2px;
    }

    .soldaten-item-notizen::-webkit-scrollbar-thumb {
      background: rgba(245,158,11,.30);
      border-radius: 2px;
    }

    /* SoldatengesprÃ¤ch Sonstiges Styling (jetzt wie Notizen) */
    .soldaten-item-sonstiges {
      color: var(--gray-light);
      font-size: 13px;
      line-height: 1.5;
      margin-bottom: 12px;
      padding: 12px;
      background: rgba(0,0,0,.2);
      border-radius: var(--radius-sm);
      border-left: 2px solid var(--warning);
      max-height: 100px;
      overflow-y: auto;
    }

    .soldaten-item-sonstiges::-webkit-scrollbar {
      width: 4px;
    }

    .soldaten-item-sonstiges::-webkit-scrollbar-track {
      background: rgba(255,255,255,.03);
      border-radius: 2px;
    }

    .soldaten-item-sonstiges::-webkit-scrollbar-thumb {
      background: rgba(245,158,11,.30);
      border-radius: 2px;
    }

    .soldaten-item-template {
      font-family: 'Consolas', 'Monaco', monospace;
      white-space: pre-wrap;
      word-wrap: break-word;
      font-size: 11px;
      line-height: 1.4;
      color: var(--gray-light);
      background: rgba(0,0,0,.3);
      padding: 12px;
      border-radius: var(--radius-sm);
      border: 1px solid rgba(255,255,255,.08);
      max-height: 150px;
      overflow-y: auto;
      margin-bottom: 12px;
    }

    .soldaten-item-template::-webkit-scrollbar {
      width: 4px;
    }

    .soldaten-item-template::-webkit-scrollbar-track {
      background: rgba(255,255,255,.03);
      border-radius: 2px;
    }

    .soldaten-item-template::-webkit-scrollbar-thumb {
      background: rgba(245,158,11,.30);
      border-radius: 2px;
    }

    .soldaten-item-actions {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
    }

    .soldaten-item-btn {
      padding: 6px 12px;
      border: none;
      border-radius: var(--radius-sm);
      font-weight: 900;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      font-size: 11px;
    }

    .soldaten-item-btn-copy {
      background: rgba(245,158,11,.15);
      color: #fcd34d;
      border: 1px solid rgba(245,158,11,.25);
    }

    .soldaten-item-btn-copy:hover {
      background: rgba(245,158,11,.25);
    }

    .soldaten-item-btn-delete {
      background: rgba(239,68,68,.15);
      color: #fca5a5;
      border: 1px solid rgba(239,68,68,.25);
    }

    .soldaten-item-btn-delete:hover {
      background: rgba(239,68,68,.25);
    }

    .empty-soldaten {
      text-align: center;
      padding: 40px 20px;
      color: var(--gray);
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .empty-soldaten-icon {
      font-size: 36px;
      margin-bottom: 12px;
      opacity: .3;
    }

    .empty-soldaten-title {
      font-size: 14px;
      font-weight: 900;
      margin-bottom: 6px;
      color: var(--gray-light);
    }

    .soldaten-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-top: 10px;
      padding-top: 20px;
      border-top: 1px solid rgba(255,255,255,.1);
      flex-shrink: 0;
    }

    .soldaten-btn {
      padding: 10px 20px;
      border: none;
      border-radius: var(--radius-md);
      font-weight: 900;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 13px;
    }

    .soldaten-btn-copy {
      background: var(--warning);
      color: #fff;
    }

    .soldaten-btn-copy:hover {
      background: var(--warning-dark);
      transform: translateY(-1px);
    }

    .soldaten-btn-save {
      background: var(--secondary);
      color: #fff;
    }

    .soldaten-btn-save:hover {
      background: var(--secondary-dark);
      transform: translateY(-1px);
    }

    .soldaten-search-container {
      position: relative;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    .soldaten-search-input {
      width: 100%;
      padding: 12px 16px 12px 44px;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.1);
      border-radius: var(--radius-md);
      color: #fff;
      font-size: 14px;
      transition: var(--transition);
    }

    .soldaten-search-input::placeholder {
      color: rgba(255,255,255,.5);
    }

    .soldaten-search-input:focus {
      outline: none;
      border-color: var(--warning);
      background: rgba(255,255,255,.08);
      box-shadow: 0 0 0 3px rgba(245,158,11,.15);
    }

    .soldaten-search-icon {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--gray);
      font-size: 16px;
    }

    /* Beobachtungs Akten Modal (behalten fÃ¼r Akten) */
    .beobachtung-akten-modal{
      display:none;
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.85);
      backdrop-filter:blur(4px);
      z-index:2000;
      align-items:center;
      justify-content:center;
      padding:20px;
      animation:fadeIn .2s ease;
    }
    .beobachtung-akten-modal.active{display:flex}
    
    .beobachtung-akten-content{
      background:rgba(31,41,55,.95);
      border-radius:var(--radius-lg);
      padding:24px;
      width:100%;
      max-width:900px;
      max-height:90vh;
      border:1px solid rgba(255,255,255,.15);
      box-shadow:var(--shadow-lg);
      animation:slideUp .2s ease;
      display:flex;
      flex-direction:column;
      overflow:hidden;
    }
    
    .beobachtung-akten-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:24px;
      padding-bottom:16px;
      border-bottom:1px solid rgba(255,255,255,.1);
      flex-shrink:0;
    }
    
    .beobachtung-akten-title{
      font-size:18px;
      font-weight:900;
      color:#fff;
      display:flex;
      align-items:center;
      gap:10px;
    }
    
    .beobachtung-akten-title i{
      color:var(--primary-light);
      font-size:20px;
    }
    
    .beobachtung-akten-close{
      background:none;
      border:none;
      color:var(--gray);
      font-size:20px;
      cursor:pointer;
      transition:var(--transition);
      width:32px;
      height:32px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:50%;
    }
    
    .beobachtung-akten-close:hover{
      color:#fff;
      background:rgba(255,255,255,.1);
    }
    
    .beobachtung-akten-body{
      flex:1;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height:0;
    }
    
    .beobachtung-tabs{
      display:flex;
      gap:2px;
      margin-bottom:16px;
      border-bottom:1px solid rgba(255,255,255,.1);
      flex-shrink:0;
    }
    
    .beobachtung-tab{
      padding:12px 20px;
      background:none;
      border:none;
      color:var(--gray);
      font-weight:900;
      cursor:pointer;
      transition:var(--transition);
      font-size:13px;
      position:relative;
    }
    
    .beobachtung-tab:hover{
      color:var(--primary-light);
    }
    
    .beobachtung-tab.active{
      color:var(--primary);
    }
    
    .beobachtung-tab.active::after{
      content:'';
      position:absolute;
      bottom:-1px;
      left:0;
      right:0;
      height:2px;
      background:var(--primary);
    }
    
    .akte-form-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
      margin-bottom:20px;
    }
    
    .akte-form-group{
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    
    .akte-label{
      font-weight:900;
      color:var(--gray-light);
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:.5px;
    }
    
    .akte-input{
      padding:12px 16px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.1);
      border-radius:var(--radius-md);
      color:#fff;
      font-size:14px;
      transition:var(--transition);
      width:100%;
      font-family:'Inter',sans-serif;
    }
    
    .akte-input:focus{
      outline:none;
      border-color:var(--primary);
      background:rgba(255,255,255,.08);
      box-shadow:0 0 0 3px rgba(79,70,229,.15);
    }
    
    .akte-textarea{
      min-height:120px;
      resize:vertical;
      line-height:1.5;
    }
    
    .beobachtung-preview{
      background:rgba(0,0,0,.3);
      border-radius:var(--radius-md);
      padding:20px;
      border-left:3px solid var(--primary);
      margin-top:10px;
      margin-bottom:20px;
      flex-shrink:0;
    }
    
    .beobachtung-preview-title{
      font-weight:900;
      color:var(--gray-light);
      margin-bottom:12px;
      font-size:13px;
      display:flex;
      align-items:center;
      gap:6px;
    }
    
    .beobachtung-preview-content{
      font-family:'Consolas','Monaco',monospace;
      white-space:pre-wrap;
      word-wrap:break-word;
      font-size:12px;
      line-height:1.4;
      color:#fff;
      background:rgba(0,0,0,.2);
      padding:16px;
      border-radius:var(--radius-sm);
      max-height:200px;
      overflow-y:auto;
      min-height:100px;
    }
    
    .beobachtung-preview-content::-webkit-scrollbar{
      width:6px;
    }
    
    .beobachtung-preview-content::-webkit-scrollbar-track{
      background:rgba(255,255,255,.05);
      border-radius:3px;
    }
    
    .beobachtung-preview-content::-webkit-scrollbar-thumb{
      background:var(--primary);
      border-radius:3px;
    }
    
    .beobachtung-akten-liste{
      flex:1;
      overflow-y:auto;
      padding-right:8px;
      min-height:0;
    }
    
    .beobachtung-akten-liste::-webkit-scrollbar{
      width:8px;
    }
    
    .beobachtung-akten-liste::-webkit-scrollbar-track{
      background:rgba(255,255,255,.05);
      border-radius:4px;
    }
    
    .beobachtung-akten-liste::-webkit-scrollbar-thumb{
      background:var(--primary);
      border-radius:4px;
    }
    
    .beobachtung-akte-item{
      background:rgba(255,255,255,.03);
      border-radius:var(--radius-md);
      padding:16px;
      border:1px solid rgba(255,255,255,.08);
      margin-bottom:12px;
      transition:var(--transition);
    }
    
    .beobachtung-akte-item:hover{
      background:rgba(255,255,255,.05);
      border-color:var(--primary-light);
    }
    
    .beobachtung-akte-header{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      margin-bottom:12px;
    }
    
    .beobachtung-akte-name{
      font-weight:900;
      color:#fff;
      font-size:15px;
    }
    
    .beobachtung-akte-dn{
      font-family:'Inter',monospace;
      background:rgba(79,70,229,.10);
      color:var(--primary-light);
      padding:4px 10px;
      border-radius:12px;
      font-size:11px;
      font-weight:900;
      border:1px solid rgba(79,70,229,.20);
    }
    
    .beobachtung-akte-date{
      color:var(--gray);
      font-size:11px;
      margin-bottom:8px;
      display:flex;
      align-items:center;
      gap:4px;
    }
    
    .beobachtung-akte-grund{
      color:var(--gray-light);
      font-size:13px;
      line-height:1.5;
      margin-bottom:12px;
      padding:12px;
      background:rgba(0,0,0,.2);
      border-radius:var(--radius-sm);
      border-left:2px solid var(--primary);
    }
    
    .beobachtung-akte-template{
      font-family:'Consolas','Monaco',monospace;
      white-space:pre-wrap;
      word-wrap:break-word;
      font-size:11px;
      line-height:1.4;
      color:var(--gray-light);
      background:rgba(0,0,0,.3);
      padding:12px;
      border-radius:var(--radius-sm);
      border:1px solid rgba(255,255,255,.08);
      max-height:150px;
      overflow-y:auto;
      margin-bottom:12px;
    }
    
    .beobachtung-akte-actions{
      display:flex;
      gap:8px;
      justify-content:flex-end;
    }
    
    .beobachtung-akte-btn{
      padding:6px 12px;
      border:none;
      border-radius:var(--radius-sm);
      font-weight:900;
      cursor:pointer;
      transition:var(--transition);
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:6px;
      font-size:11px;
    }
    
    .beobachtung-akte-btn-copy{
      background:rgba(79,70,229,.15);
      color:var(--primary-light);
      border:1px solid rgba(79,70,229,.25);
    }
    
    .beobachtung-akte-btn-copy:hover{
      background:rgba(79,70,229,.25);
    }
    
    .beobachtung-akte-btn-delete{
      background:rgba(239,68,68,.15);
      color:#fca5a5;
      border:1px solid rgba(239,68,68,.25);
    }
    
    .beobachtung-akte-btn-delete:hover{
      background:rgba(239,68,68,.25);
    }
    
    .empty-beobachtungen{
      text-align:center;
      padding:40px 20px;
      color:var(--gray);
    }
    
    .empty-beobachtungen-icon{
      font-size:36px;
      margin-bottom:12px;
      opacity:.3;
    }
    
    .empty-beobachtungen-title{
      font-size:14px;
      font-weight:900;
      margin-bottom:6px;
      color:var(--gray-light);
    }
    
    .beobachtung-actions{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      margin-top:10px;
      padding-top:20px;
      border-top:1px solid rgba(255,255,255,.1);
      flex-shrink:0;
    }
    
    .beobachtung-btn{
      padding:10px 20px;
      border:none;
      border-radius:var(--radius-md);
      font-weight:900;
      cursor:pointer;
      transition:var(--transition);
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      font-size:13px;
    }
    
    .beobachtung-btn-copy{
      background:var(--primary);
      color:#fff;
    }
    
    .beobachtung-btn-copy:hover{
      background:var(--primary-dark);
      transform:translateY(-1px);
    }
    
    .beobachtung-btn-save{
      background:var(--secondary);
      color:#fff;
    }
    
    .beobachtung-btn-save:hover{
      background:var(--secondary-dark);
      transform:translateY(-1px);
    }

    /* Akten Suche */
    .akten-search-container{
      position:relative;
      margin-bottom:20px;
    }
    
    .akten-search-input{
      width:100%;
      padding:12px 16px 12px 44px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.1);
      border-radius:var(--radius-md);
      color:#fff;
      font-size:14px;
      transition:var(--transition);
    }
    
    .akten-search-input::placeholder{
      color:rgba(255,255,255,.5);
    }
    
    .akten-search-input:focus{
      outline:none;
      border-color:var(--primary);
      background:rgba(255,255,255,.08);
      box-shadow:0 0 0 3px rgba(79,70,229,.15);
    }
    
    .akten-search-icon{
      position:absolute;
      left:16px;
      top:50%;
      transform:translateY(-50%);
      color:var(--gray);
      font-size:16px;
    }

    /* Modals */
    .modal-overlay{
      display:none;
      position:fixed;inset:0;
      background:rgba(0,0,0,.80);
      backdrop-filter:blur(4px);
      z-index:1000;
      align-items:center;
      justify-content:center;
      padding:16px;
      animation:fadeIn .2s ease;
    }
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    .modal-overlay.active{display:flex}
    .modal{
      background:rgba(31,41,55,.95);
      border-radius:var(--radius-lg);
      padding:20px;
      width:100%;
      max-width:500px;
      border:1px solid rgba(255,255,255,.12);
      box-shadow:var(--shadow-lg);
      animation:slideUp .2s ease;
    }
    @keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
    .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;gap:10px}
    .modal-title{
      font-size:16px;font-weight:900;color:#fff;
      display:flex;align-items:center;gap:8px;
    }
    .modal-close{
      background:none;border:none;color:var(--gray);
      font-size:18px;cursor:pointer;
      transition:var(--transition);
      width:28px;height:28px;
      display:flex;align-items:center;justify-content:center;
      border-radius:50%;
    }
    .modal-close:hover{color:#fff;background:rgba(255,255,255,.10)}

    /* Empty / Loading */
    .empty-state{text-align:center;padding:40px 20px;color:var(--gray);width:100%}
    .empty-icon{font-size:36px;margin-bottom:12px;opacity:.3}
    .empty-title{font-size:14px;font-weight:900;margin-bottom:6px;color:var(--gray-light)}
    .empty-description{font-size:12px;color:var(--gray);max-width:250px;margin:0 auto 12px}

    .loading{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;width:100%}
    .loading-spinner{
      width:32px;height:32px;
      border:2px solid rgba(255,255,255,.10);
      border-top-color:var(--primary);
      border-radius:50%;
      animation:spin 1s linear infinite;
      margin-bottom:12px;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Notification */
    .notification{
      position:fixed;
      bottom:16px;right:16px;
      background:var(--secondary);
      color:#fff;
      padding:10px 14px;
      border-radius:var(--radius-md);
      box-shadow:var(--shadow-md);
      display:flex;align-items:center;gap:8px;
      z-index:1001;
      transform:translateY(100px);
      opacity:0;
      transition:transform .2s ease, opacity .2s ease;
      min-width:200px;
    }
    .notification.show{transform:translateY(0);opacity:1}
    .notification-icon{font-size:14px}
    .notification-message{font-weight:900;font-size:13px}

    /* Responsive */
    @media (max-width:1200px){
      .app-container{grid-template-columns:1fr;padding:16px;gap:16px}
      .sidebar{position:static;max-height:500px;height:auto}
      .induction-grid{grid-template-columns:1fr}
      /* template-cards bleibt 1fr */
    }
    @media (max-width:768px){
      .app-header{padding:14px 16px}
      .header-content{flex-direction:column;gap:12px;align-items:stretch}
      .header-stats{justify-content:center}
      .brand{gap:10px}
      .logo{width:36px;height:36px;font-size:16px}
      .brand-text h1{font-size:16px}
      .brand-text .subtitle{font-size:10px}
      .content-header{flex-direction:column;align-items:stretch;padding:14px}
      .employee-tags{flex-direction:column;gap:6px}
      .induction-content{padding:16px}
      .oral-form-grid,.org-form-grid{grid-template-columns:1fr}
      .soldaten-modal,
      .beobachtung-akten-modal,
      .ankundigung-modal{padding:12px}
      .soldaten-content,
      .beobachtung-akten-content,
      .ankundigung-content{padding:20px}
      .soldaten-actions,
      .beobachtung-actions,
      .ankundigung-actions{flex-direction:column;align-items:stretch}
      .floating-buttons-container{
        bottom: 16px;
        right: 16px;
      }
      .soldaten-tabs,
      .beobachtung-tabs,
      .ankundigung-tabs{flex-direction:column}
      .soldaten-tab,
      .beobachtung-tab,
      .ankundigung-tab{text-align:left;padding:10px 16px}
      .soldaten-form-grid,
      .akte-form-grid,
      .ankundigung-form-grid{grid-template-columns:1fr}
    }
    @media (max-width:480px){
      .app-container{padding:12px}
      .app-header{padding:12px}
      .stat-card{padding:8px 10px;min-width:70px}
      .stat-value{font-size:18px}
      .sidebar{padding:14px}
      .modal{padding:16px;margin:12px}
      .notification{left:12px;right:12px;bottom:12px;min-width:auto}
      .soldaten-content,
      .beobachtung-akten-content,
      .ankundigung-content{padding:16px}
      .soldaten-item-actions,
      .beobachtung-akte-actions,
      .ankundigung-item-actions{flex-direction:column}
    }
  </style>
</head>

<body>
  <div class="bg-effects"><div class="bg-gradient"></div></div>

  <!-- Floating Buttons -->
  <div class="floating-buttons-container">
    <button class="floating-button ankundigung" onclick="openAnkundigungModal()" title="AnkÃ¼ndigungen">
      ðŸª§
    </button>
    <button class="floating-button soldaten" onclick="openSoldatenModal()" title="SoldatengesprÃ¤che">
      <i class="fas fa-comments"></i>
    </button>
    <button class="floating-button" onclick="openBeobachtungAktenModal()" title="Beobachtungs-Akten">
      <i class="fas fa-folder-open"></i>
    </button>
  </div>

  <!-- AnkÃ¼ndigungen/Besprechungen/Aufstellungen Modal -->
  <div class="ankundigung-modal" id="ankundigungModal" onclick="if(event.target===this)closeModal('ankundigungModal')">
    <div class="ankundigung-content">
      <div class="ankundigung-header">
        <div class="ankundigung-title">
          <i class="fas fa-bullhorn"></i> AnkÃ¼ndigungen & Besprechungen
        </div>
        <button class="ankundigung-close" onclick="closeModal('ankundigungModal')">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="ankundigung-body">
        <div class="ankundigung-tabs">
          <button class="ankundigung-tab active" onclick="switchAnkundigungTab('new')">
            <span>ðŸª§</span> Neue AnkÃ¼ndigung
          </button>
          <button class="ankundigung-tab" onclick="switchAnkundigungTab('besprechung')">
            <span>ðŸ–Šï¸</span> Neue Besprechung
          </button>
          <button class="ankundigung-tab" onclick="switchAnkundigungTab('aufstellung')">
            <span>ðŸ•›</span> Neue Aufstellung
          </button>
          <button class="ankundigung-tab" onclick="switchAnkundigungTab('list')">
            <i class="fas fa-list"></i> Liste
          </button>
        </div>
        
        <!-- Neue AnkÃ¼ndigung Tab -->
        <div class="ankundigung-tab-content" id="ankundigungNewTab">
          <div class="ankundigung-form-grid">
            <div class="ankundigung-form-group">
              <label class="ankundigung-label">Titel</label>
              <input type="text" class="ankundigung-input" id="ankundigungTitle" placeholder="Titel der AnkÃ¼ndigung">
            </div>
            
            <div class="ankundigung-form-group">
              <label class="ankundigung-label">Inhalt *</label>
              <textarea class="ankundigung-input ankundigung-textarea" id="ankundigungContent" placeholder="Inhalt der AnkÃ¼ndigung..."></textarea>
            </div>
          </div>
          
          <div class="ankundigung-preview">
            <div class="ankundigung-preview-title">
              <i class="fas fa-file-alt"></i> Vorschau
            </div>
            <div class="ankundigung-preview-content" id="ankundigungPreview">
ðŸª§ **AnkÃ¼ndigung**


            </div>
          </div>
          
          <div class="ankundigung-actions">
            <button class="ankundigung-btn ankundigung-btn-copy" onclick="copyAnkundigungTemplate()">
              <i class="fas fa-copy"></i> In Zwischenablage kopieren
            </button>
            <button class="ankundigung-btn ankundigung-btn-save" onclick="saveAnkundigung()">
              <i class="fas fa-save"></i> AnkÃ¼ndigung speichern
            </button>
          </div>
        </div>
        
        <!-- Neue Besprechung Tab -->
        <div class="ankundigung-tab-content" id="ankundigungBesprechungTab" style="display:none;">
          <div class="ankundigung-form-grid">
            <div class="ankundigung-form-group">
              <label class="ankundigung-label">Thema *</label>
              <input type="text" class="ankundigung-input" id="besprechungThema" placeholder="Thema der Besprechung">
            </div>
            
            <div class="ankundigung-form-group">
              <label class="ankundigung-label">Datum *</label>
              <input type="date" class="ankundigung-input" id="besprechungDate" value="">
            </div>
            
            <div class="ankundigung-form-group">
              <label class="ankundigung-label">Uhrzeit *</label>
              <input type="time" class="ankundigung-input" id="besprechungTime" value="">
            </div>
            
            <div class="ankundigung-form-group">
              <label class="ankundigung-label">Ort</label>
              <input type="text" class="ankundigung-input" id="besprechungOrt" placeholder="Ort der Besprechung">
            </div>
            
            <div class="ankundigung-form-group">
              <label class="ankundigung-label">Inhalt *</label>
              <textarea class="ankundigung-input ankundigung-textarea" id="besprechungContent" placeholder="Inhalt der Besprechung..."></textarea>
            </div>
          </div>
          
          <div class="ankundigung-preview">
            <div class="ankundigung-preview-title">
              <i class="fas fa-file-alt"></i> Vorschau
            </div>
            <div class="ankundigung-preview-content" id="besprechungPreview">
ðŸ–Šï¸ **Besprechung**

Thema: 
Datum: 
Uhrzeit: 
Ort: 


            </div>
          </div>
          
          <div class="ankundigung-actions">
            <button class="ankundigung-btn ankundigung-btn-copy" onclick="copyBesprechungTemplate()">
              <i class="fas fa-copy"></i> In Zwischenablage kopieren
            </button>
            <button class="ankundigung-btn ankundigung-btn-save" onclick="saveBesprechung()">
              <i class="fas fa-save"></i> Besprechung speichern
            </button>
          </div>
        </div>
        
        <!-- Neue Aufstellung Tab -->
        <div class="ankundigung-tab-content" id="ankundigungAufstellungTab" style="display:none;">
          <div class="ankundigung-form-grid">
            <div class="ankundigung-form-group">
              <label class="ankundigung-label">Typ *</label>
              <select class="ankundigung-input" id="aufstellungTyp">
                <option value="">Typ auswÃ¤hlen</option>
                <option value="Tagesaufstellung">Tagesaufstellung</option>
                <option value="Wochenaufstellung">Wochenaufstellung</option>
                <option value="Sonderaufstellung">Sonderaufstellung</option>
              </select>
            </div>
            
            <div class="ankundigung-form-group">
              <label class="ankundigung-label">Datum *</label>
              <input type="date" class="ankundigung-input" id="aufstellungDate" value="">
            </div>
            
            <div class="ankundigung-form-group">
              <label class="ankundigung-label">Uhrzeit *</label>
              <input type="time" class="ankundigung-input" id="aufstellungTime" value="">
            </div>
            
            <div class="ankundigung-form-group">
              <label class="ankundigung-label">Ort *</label>
              <input type="text" class="ankundigung-input" id="aufstellungOrt" placeholder="Ort der Aufstellung">
            </div>
            
            <div class="ankundigung-form-group">
              <label class="ankundigung-label">Bemerkungen</label>
              <textarea class="ankundigung-input ankundigung-textarea" id="aufstellungBemerkungen" placeholder="Bemerkungen zur Aufstellung..."></textarea>
            </div>
          </div>
          
          <div class="ankundigung-preview">
            <div class="ankundigung-preview-title">
              <i class="fas fa-file-alt"></i> Vorschau
            </div>
            <div class="ankundigung-preview-content" id="aufstellungPreview">
ðŸ•› **Aufstellung**

Typ: 
Datum: 
Uhrzeit: 
Ort: 
Bemerkungen:

            </div>
          </div>
          
          <div class="ankundigung-actions">
            <button class="ankundigung-btn ankundigung-btn-copy" onclick="copyAufstellungTemplate()">
              <i class="fas fa-copy"></i> In Zwischenablage kopieren
            </button>
            <button class="ankundigung-btn ankundigung-btn-save" onclick="saveAufstellung()">
              <i class="fas fa-save"></i> Aufstellung speichern
            </button>
          </div>
        </div>
        
        <!-- Liste Tab -->
        <div class="ankundigung-tab-content" id="ankundigungListTab" style="display:none;">
          <div class="ankundigung-search-container">
            <i class="fas fa-search ankundigung-search-icon"></i>
            <input type="text" class="ankundigung-search-input" id="ankundigungSearch" placeholder="Nach Titel oder Inhalt suchen..." oninput="searchAnkundigungen(this.value)">
          </div>
          
          <!-- Scrollbar-Container fÃ¼r die Liste -->
          <div class="ankundigung-liste-container">
            <div class="ankundigung-liste" id="ankundigungListe">
              <div class="empty-ankundigung">
                <div class="empty-ankundigung-icon"><i class="fas fa-bullhorn"></i></div>
                <div class="empty-ankundigung-title">Keine EintrÃ¤ge gefunden</div>
                <div class="empty-description">Erstellen Sie Ihren ersten Eintrag</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SoldatengesprÃ¤ch Modal -->
  <div class="soldaten-modal" id="soldatenModal" onclick="if(event.target===this)closeModal('soldatenModal')">
    <div class="soldaten-content">
      <div class="soldaten-header">
        <div class="soldaten-title">
          <i class="fas fa-comments"></i> SoldatengesprÃ¤che
        </div>
        <button class="soldaten-close" onclick="closeModal('soldatenModal')">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="soldaten-body">
        <div class="soldaten-tabs">
          <button class="soldaten-tab active" onclick="switchSoldatenTab('new')">Neues GesprÃ¤ch</button>
          <button class="soldaten-tab" onclick="switchSoldatenTab('list')">GesprÃ¤chsliste</button>
        </div>
        
        <!-- Neues GesprÃ¤ch Tab -->
        <div class="soldaten-tab-content" id="soldatenNewTab">
          <div class="soldaten-form-grid">
            <div class="soldaten-form-group">
              <label class="soldaten-label">Name *</label>
              <input type="text" class="soldaten-input" id="soldatenName" placeholder="VollstÃ¤ndiger Name">
            </div>
            
            <div class="soldaten-form-group">
              <label class="soldaten-label">Dienstnummer (DN) *</label>
              <input type="number" class="soldaten-input" id="soldatenDN" placeholder="z.B. 43">
            </div>
            
            <div class="soldaten-form-group">
              <label class="soldaten-label">Hauptunit</label>
              <select class="soldaten-input" id="soldatenUnit">
                <option value="">Unit auswÃ¤hlen</option>
                <option value="Air Force">Air Force</option>
                <option value="S.O.C">S.O.C</option>
                <option value="Infantry">Infantry</option>
                <option value="Military Police">Military Police</option>
                <option value="Navy Marine">Navy Marine</option>
                <option value="Navy SEALs">Navy SEALs</option>
              </select>
            </div>
            
            <div class="soldaten-form-group">
              <label class="soldaten-label">Rang</label>
              <select class="soldaten-input" id="soldatenRank">
                <option value="">Rang auswÃ¤hlen</option>
                <option value="Private">Private</option>
                <option value="Private First Class">Private First Class</option>
                <option value="Specialist">Specialist</option>
                <option value="Corporal">Corporal</option>
                <option value="Sergeant">Sergeant</option>
                <option value="Staff Sergeant">Staff Sergeant</option>
                <option value="Sergeant First Class">Sergeant First Class</option>
                <option value="Master Sergeant">Master Sergeant</option>
                <option value="Sergeant Major">Sergeant Major</option>
                <option value="Lieutenant">Lieutenant</option>
                <option value="Captain">Captain</option>
                <option value="Major">Major</option>
                <option value="Colonel">Colonel</option>
                <option value="Major General">Major General</option>
                <option value="Lieutenant General">Lieutenant General</option>
                <option value="Vice General of Army">Vice General of Army</option>
                <option value="General of Army">General of Army</option>
              </select>
            </div>
            
            <div class="soldaten-form-group">
              <label class="soldaten-label">Datum *</label>
              <input type="date" class="soldaten-input" id="soldatenDate" value="">
            </div>
            
            <div class="soldaten-form-group">
              <label class="soldaten-label">Uhrzeit *</label>
              <input type="time" class="soldaten-input" id="soldatenTime" value="">
            </div>
            
            <div class="soldaten-form-group" style="grid-column: span 2;">
              <label class="soldaten-label">Notizen *</label>
              <textarea class="soldaten-input soldaten-textarea" id="soldatenNotizen" placeholder="Notizen zum GesprÃ¤ch..."></textarea>
            </div>
            
            <div class="soldaten-form-group" style="grid-column: span 2;">
              <label class="soldaten-label">Sonstiges</label>
              <textarea class="soldaten-input soldaten-textarea" id="soldatenSonstiges" placeholder="Weitere Informationen..."></textarea>
            </div>
          </div>
          
          <div class="soldaten-preview">
            <div class="soldaten-preview-title">
              <i class="fas fa-file-alt"></i> Vorschau
            </div>
            <div class="soldaten-preview-content" id="soldatenPreview">
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
/////////////////////////////////////////////////////////////////////////
SoldatengesprÃ¤ch

Name: 
DN: 
Hauptunit: 
Rang: 
Datum:
Uhrzeit: 
Notizen:
Sonstiges:

/////////////////////////////////////////////////////////////////////////
<@&1097625910242447422>
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            </div>
          </div>
          
          <div class="soldaten-actions">
            <button class="soldaten-btn soldaten-btn-copy" onclick="copySoldatenTemplate()">
              <i class="fas fa-copy"></i> In Zwischenablage kopieren
            </button>
            <button class="soldaten-btn soldaten-btn-save" onclick="saveSoldatenGesprÃ¤ch()">
              <i class="fas fa-save"></i> GesprÃ¤ch speichern
            </button>
          </div>
        </div>
        
        <!-- GesprÃ¤chsliste Tab -->
        <div class="soldaten-tab-content" id="soldatenListTab" style="display:none;">
          <div class="soldaten-search-container">
            <i class="fas fa-search soldaten-search-icon"></i>
            <input type="text" class="soldaten-search-input" id="soldatenSearch" placeholder="Nach Name oder DN suchen..." oninput="searchSoldaten(this.value)">
          </div>
          
          <!-- Scrollbar-Container fÃ¼r die Liste -->
          <div class="soldaten-liste-container">
            <div class="soldaten-liste" id="soldatenListe">
              <div class="empty-soldaten">
                <div class="empty-soldaten-icon"><i class="fas fa-comments"></i></div>
                <div class="empty-soldaten-title">Keine GesprÃ¤che gefunden</div>
                <div class="empty-description">Erstellen Sie Ihr erstes SoldatengesprÃ¤ch</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Beobachtungs Akten Modal -->
  <div class="beobachtung-akten-modal" id="beobachtungAktenModal" onclick="if(event.target===this)closeModal('beobachtungAktenModal')">
    <div class="beobachtung-akten-content">
      <div class="beobachtung-akten-header">
        <div class="beobachtung-akten-title">
          <i class="fas fa-folder-open"></i> Beobachtungs-Akten
        </div>
        <button class="beobachtung-akten-close" onclick="closeModal('beobachtungAktenModal')">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="beobachtung-akten-body">
        <div class="beobachtung-tabs">
          <button class="beobachtung-tab active" onclick="switchBeobachtungTab('new')">Neue Akte erstellen</button>
          <button class="beobachtung-tab" onclick="switchBeobachtungTab('list')">Akten durchsuchen</button>
          <button class="beobachtung-tab" onclick="switchBeobachtungTab('beobachtung')">Beobachtung hinzufÃ¼gen</button>
        </div>
        
        <!-- Neue Akte erstellen Tab -->
        <div class="beobachtung-tab-content" id="beobachtungNewTab">
          <div class="akte-form-grid">
            <div class="akte-form-group">
              <label class="akte-label">Name *</label>
              <input type="text" class="akte-input" id="akteName" placeholder="VollstÃ¤ndiger Name">
            </div>
            
            <div class="akte-form-group">
              <label class="akte-label">Dienstnummer (DN) *</label>
              <input type="number" class="akte-input" id="akteDN" placeholder="z.B. 43">
            </div>
            
            <div class="akte-form-group">
              <label class="akte-label">Unit</label>
              <select class="akte-input" id="akteUnit">
                <option value="">Unit auswÃ¤hlen</option>
                <option value="Air Force">Air Force</option>
                <option value="S.O.C">S.O.C</option>
                <option value="Infantry">Infantry</option>
                <option value="Military Police">Military Police</option>
                <option value="Navy Marine">Navy Marine</option>
                <option value="Navy SEALs">Navy SEALs</option>
              </select>
            </div>
            
            <div class="akte-form-group">
              <label class="akte-label">Rang</label>
              <select class="akte-input" id="akteRank">
                <option value="">Rang auswÃ¤hlen</option>
                <option value="Private">Private</option>
                <option value="Private First Class">Private First Class</option>
                <option value="Specialist">Specialist</option>
                <option value="Corporal">Corporal</option>
                <option value="Sergeant">Sergeant</option>
                <option value="Staff Sergeant">Staff Sergeant</option>
                <option value="Sergeant First Class">Sergeant First Class</option>
                <option value="Master Sergeant">Master Sergeant</option>
                <option value="Sergeant Major">Sergeant Major</option>
                <option value="Lieutenant">Lieutenant</option>
                <option value="Captain">Captain</option>
                <option value="Major">Major</option>
                <option value="Colonel">Colonel</option>
                <option value="Major General">Major General</option>
                <option value="Lieutenant General">Lieutenant General</option>
                <option value="Vice General of Army">Vice General of Army</option>
                <option value="General of Army">General of Army</option>
              </select>
            </div>
          </div>
          
          <div class="beobachtung-actions">
            <button class="beobachtung-btn beobachtung-btn-save" onclick="createNewAkte()">
              <i class="fas fa-plus"></i> Neue Akte erstellen
            </button>
          </div>
        </div>
        
        <!-- Akten durchsuchen Tab -->
        <div class="beobachtung-tab-content" id="beobachtungListTab" style="display:none;">
          <div class="akten-search-container">
            <i class="fas fa-search akten-search-icon"></i>
            <input type="text" class="akten-search-input" id="aktenSearch" placeholder="Nach Name oder DN suchen..." oninput="searchAkten(this.value)">
          </div>
          
          <div class="beobachtung-akten-liste" id="aktenListe">
            <div class="empty-beobachtungen">
              <div class="empty-beobachtungen-icon"><i class="fas fa-folder-open"></i></div>
              <div class="empty-beobachtungen-title">Keine Akten gefunden</div>
              <div class="empty-description">Erstellen Sie Ihre erste Akte</div>
            </div>
          </div>
        </div>
        
        <!-- Beobachtung hinzufÃ¼gen Tab -->
        <div class="beobachtung-tab-content" id="beobachtungBeobachtungTab" style="display:none;">
          <div class="akte-form-grid">
            <div class="akte-form-group">
              <label class="akte-label">Name *</label>
              <input type="text" class="akte-input" id="beobachtungName" placeholder="Name der Person">
            </div>
            
            <div class="akte-form-group">
              <label class="akte-label">Dienstnummer (DN) *</label>
              <input type="number" class="akte-input" id="beobachtungDN" placeholder="z.B. 43">
            </div>
            
            <div class="akte-form-group" style="grid-column: span 2;">
              <label class="akte-label">Grund der Beobachtung *</label>
              <textarea class="akte-input akte-textarea" id="beobachtungGrund" placeholder="Beschreiben Sie den Grund der Beobachtung..."></textarea>
            </div>
          </div>
          
          <div class="beobachtung-preview">
            <div class="beobachtung-preview-title">
              <i class="fas fa-file-alt"></i> Vorschau
            </div>
            <div class="beobachtung-preview-content" id="beobachtungPreview">
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
/////////////////////////////////////////////////////////////////////////
Beobachtung
Name: 
DN:  
Grund:
/////////////////////////////////////////////////////////////////////////
<@&1097625910242447422>
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            </div>
          </div>
          
          <div class="beobachtung-actions">
            <button class="beobachtung-btn beobachtung-btn-copy" onclick="copyBeobachtungTemplate()">
              <i class="fas fa-copy"></i> In Zwischenablage kopieren
            </button>
            <button class="beobachtung-btn beobachtung-btn-save" onclick="saveBeobachtungToAkte()">
              <i class="fas fa-save"></i> Zu Akte hinzufÃ¼gen
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="notification" id="notification">
    <i class="fas fa-check notification-icon"></i>
    <span class="notification-message" id="notificationMessage"></span>
  </div>

  <div class="app-container">
    <header class="app-header">
      <div class="header-content">
        <div class="brand">
          <div class="logo"><i class="fas fa-user-check"></i></div>
          <div class="brand-text">
            <h1>Human Resources</h1>
            <div class="subtitle">MÃ¼ndliche & Organisatorische Einweisungen â€¢ HR</div>
          </div>
        </div>
        <div class="header-stats">
          <div class="stat-card">
            <div class="stat-value" id="totalEmployees">0</div>
            <div class="stat-label">Mitarbeiter</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="totalAkten">0</div>
            <div class="stat-label">Beobachtung</div>
          </div>
        </div>
      </div>
    </header>

    <aside class="sidebar">
      <div class="sidebar-header">
        <h3 class="sidebar-title"><i class="fas fa-users"></i> Mitarbeiter</h3>
        <div class="employee-count" id="employeeCount">0</div>
      </div>

      <div class="sidebar-controls">
        <div class="sidebar-filter-buttons">
          <button class="sidebar-filter-btn active" onclick="filterEmployeesByType('all')">Alle</button>
          <button class="sidebar-filter-btn" onclick="filterEmployeesByType('oral')">MÃ¼ndlich</button>
          <button class="sidebar-filter-btn" onclick="filterEmployeesByType('org')">Organisatorische</button>
        </div>

        <div class="search-container">
          <i class="fas fa-search search-icon"></i>
          <input type="text" class="search-input" id="searchEmployees" placeholder="Nach Namen oder DN suchen...">
        </div>
      </div>

      <div class="employee-list-container">
        <div class="employee-list" id="employeeList">
          <div class="empty-state">
            <div class="empty-icon"><i class="fas fa-user-plus"></i></div>
            <div class="empty-title">Keine Mitarbeiter</div>
            <div class="empty-description">FÃ¼gen Sie Ihren ersten Mitarbeiter hinzu</div>
          </div>
        </div>
      </div>

      <div class="quick-actions">
        <button class="quick-action-btn" onclick="openNewEmployeeModal()">
          <i class="fas fa-user-plus"></i> Neuer Mitarbeiter
        </button>
      </div>
    </aside>

    <main class="main-content">
      <div class="content-header" id="employeeHeader">
        <div class="employee-info">
          <h2 id="currentEmployeeName">WÃ¤hlen Sie einen Mitarbeiter</h2>
          <div class="employee-tags">
            <div class="employee-tag"><i class="fas fa-hashtag"></i> <span class="tag-value" id="currentEmployeeDN">DN-</span></div>
            <div class="employee-tag"><i class="fas fa-building"></i> <span class="tag-value" id="currentEmployeeUnit">Unit</span></div>
            <div class="employee-tag"><i class="fas fa-user-tie"></i> <span class="tag-value" id="currentEmployeeRank">Rang</span></div>
          </div>
        </div>
        <div class="action-buttons">
          <button class="btn btn-secondary" onclick="openEditEmployeeModal()"><i class="fas fa-edit"></i> Bearbeiten</button>
        </div>
      </div>

      <div class="induction-content" id="inductionContent">
        <div class="induction-grid">
          <div class="induction-card" id="oralInductionCard">
            <div class="induction-card-header">
              <div class="induction-title">
                <div class="induction-icon"><i class="fas fa-comments"></i></div>
                MÃ¼ndliche Einweisung
              </div>
              <div class="induction-status" id="oralInductionStatus">AUSSTEHEND</div>
            </div>

            <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;">
              <label style="font-weight:800;color:var(--gray);font-size:12px;">Bestanden:</label>
              <label class="toggle-switch">
                <input type="checkbox" id="oralInductionToggle" onchange="toggleInduction('oral', this.checked)">
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="oral-form-grid">
              <div class="form-group">
                <label class="form-label">Datum</label>
                <input type="date" class="form-input" id="oralDate">
              </div>
              <div class="form-group">
                <label class="form-label">Uhrzeit</label>
                <div class="time-container">
                  <input type="time" class="form-input" id="oralTimeStart">
                  <div class="time-separator">bis</div>
                  <input type="time" class="form-input" id="oralTimeEnd">
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">Beteiligte Person</label>
                <input type="text" class="form-input" id="oralPerson" placeholder="Name der beteiligten Person">
              </div>
              <div class="form-group">
                <label class="form-label">Unit</label>
                <select class="form-select" id="unitSelect">
                  <option value="">Unit auswÃ¤hlen</option>
                  <option value="Air Force">Air Force</option>
                  <option value="S.O.C">S.O.C</option>
                  <option value="Infantry">Infantry</option>
                  <option value="Military Police">Military Police</option>
                  <option value="Navy Marine">Navy Marine</option>
                  <option value="Navy SEALs">Navy SEALs</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Rang</label>
                <select class="form-select" id="rankSelect">
                  <option value="">Rang auswÃ¤hlen</option>
                  <option value="Private">Private</option>
                  <option value="Private First Class">Private First Class</option>
                  <option value="Specialist">Specialist</option>
                  <option value="Corporal">Corporal</option>
                  <option value="Sergeant">Sergeant</option>
                  <option value="Staff Sergeant">Staff Sergeant</option>
                  <option value="Sergeant First Class">Sergeant First Class</option>
                  <option value="Master Sergeant">Master Sergeant</option>
                  <option value="Sergeant Major">Sergeant Major</option>
                  <option value="Lieutenant">Lieutenant</option>
                  <option value="Captain">Captain</option>
                  <option value="Major">Major</option>
                  <option value="Colonel">Colonel</option>
                  <option value="Major General">Major General</option>
                  <option value="Lieutenant General">Lieutenant General</option>
                  <option value="Vice General of Army">Vice General of Army</option>
                  <option value="General of Army">General of Army</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Sonstige Bemerkungen</label>
                <textarea class="form-textarea" id="oralNotes" placeholder="Weitere Informationen..."></textarea>
              </div>
            </div>
          </div>

          <div class="induction-card" id="orgInductionCard">
            <div class="induction-card-header">
              <div class="induction-title">
                <div class="induction-icon"><i class="fas fa-clipboard-list"></i></div>
                Organisatorische Einweisung
              </div>
              <div class="induction-status" id="orgInductionStatus">AUSSTEHEND</div>
            </div>

            <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;">
              <label style="font-weight:800;color:var(--gray);font-size:12px;">Bestanden:</label>
              <label class="toggle-switch">
                <input type="checkbox" id="orgInductionToggle" onchange="toggleInduction('org', this.checked)">
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="org-form-grid">
              <div class="form-group">
                <label class="form-label">Datum</label>
                <input type="date" class="form-input" id="orgDate">
              </div>
              <div class="form-group">
                <label class="form-label">Uhrzeit</label>
                <div class="time-container">
                  <input type="time" class="form-input" id="orgTimeStart">
                  <div class="time-separator">-</div>
                  <input type="time" class="form-input" id="orgTimeEnd">
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">Beteiligte Person</label>
                <input type="text" class="form-input" id="orgPerson" placeholder="Name der beteiligten Person">
              </div>
              <div class="form-group">
                <label class="form-label">Unit</label>
                <select class="form-select" id="unitSelect2">
                  <option value="">Unit auswÃ¤hlen</option>
                  <option value="Air Force">Air Force</option>
                  <option value="S.O.C">S.O.C</option>
                  <option value="Infantry">Infantry</option>
                  <option value="Military Police">Military Police</option>
                  <option value="Navy Marine">Navy Marine</option>
                  <option value="Navy SEALs">Navy SEALs</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Rang</label>
                <select class="form-select" id="rankSelect2">
                  <option value="">Rang auswÃ¤hlen</option>
                  <option value="Private">Private</option>
                  <option value="Private First Class">Private First Class</option>
                  <option value="Specialist">Specialist</option>
                  <option value="Corporal">Corporal</option>
                  <option value="Sergeant">Sergeant</option>
                  <option value="Staff Sergeant">Staff Sergeant</option>
                  <option value="Sergeant First Class">Sergeant First Class</option>
                  <option value="Master Sergeant">Master Sergeant</option>
                  <option value="Sergeant Major">Sergeant Major</option>
                  <option value="Lieutenant">Lieutenant</option>
                  <option value="Captain">Captain</option>
                  <option value="Major">Major</option>
                  <option value="Colonel">Colonel</option>
                  <option value="Major General">Major General</option>
                  <option value="Lieutenant General">Lieutenant General</option>
                  <option value="Vice General of Army">Vice General of Army</option>
                  <option value="General of Army">General of Army</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Sonstige Bemerkungen</label>
                <textarea class="form-textarea" id="orgNotes" placeholder="Weitere Informationen..."></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="templates-section">
          <div class="section-header">
            <div class="section-title"><i class="fas fa-file-code"></i> Discord Vorlagen</div>
            <div class="template-actions">
              <button class="btn btn-secondary" onclick="copyOralTemplate()"><i class="fas fa-comments"></i> MÃ¼ndlich</button>
              <button class="btn btn-secondary" onclick="copyOrgTemplate()"><i class="fas fa-clipboard-list"></i> Organisatorisch</button>
            </div>
          </div>

          <div class="template-cards">
            <div class="template-card" id="oralTemplateCard">
              <div class="template-card-header">
                <div class="template-card-title"><i class="fas fa-comments"></i> MÃ¼ndliche Einweisung</div>
                <div class="template-badge" id="oralTemplateBadge">AUSSTEHEND</div>
              </div>
              <div class="template-content" id="oralTemplateContent"></div>
            </div>

            <div class="template-card" id="orgTemplateCard">
              <div class="template-card-header">
                <div class="template-card-title"><i class="fas fa-clipboard-list"></i> Organisatorische Einweisung</div>
                <div class="template-badge" id="orgTemplateBadge">AUSSTEHEND</div>
              </div>
              <div class="template-content" id="orgTemplateContent"></div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- New Employee Modal -->
  <div class="modal-overlay" id="newEmployeeModal" onclick="if(event.target===this)closeModal('newEmployeeModal')">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title"><i class="fas fa-user-plus"></i> Neuen Mitarbeiter hinzufÃ¼gen</div>
        <button class="modal-close" onclick="closeModal('newEmployeeModal')"><i class="fas fa-times"></i></button>
      </div>

      <div class="form-grid-new" style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;">
        <div class="form-group">
          <label class="form-label">VollstÃ¤ndiger Name *</label>
          <input type="text" class="form-input" id="newEmployeeName" placeholder="z.B. Max Fiart">
        </div>
        <div class="form-group">
          <label class="form-label">Dienstnummer (DN) *</label>
          <input type="number" class="form-input" id="newEmployeeDN" placeholder="z.B. 43" min="1" max="9999">
        </div>
        <div class="form-group">
          <label class="form-label">Unit</label>
          <select class="form-select" id="newEmployeeUnit">
            <option value="">Unit auswÃ¤hlen</option>
            <option value="Air Force">Air Force</option>
            <option value="S.O.C">S.O.C</option>
            <option value="Infantry">Infantry</option>
            <option value="Military Police">Military Police</option>
            <option value="Navy Marine">Navy Marine</option>
            <option value="Navy SEALs">Navy SEALs</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Rang</label>
          <select class="form-select" id="newEmployeeRank">
            <option value="">Rang auswÃ¤hlen</option>
            <option value="Private">Private</option>
            <option value="Private First Class">Private First Class</option>
            <option value="Specialist">Specialist</option>
            <option value="Corporal">Corporal</option>
            <option value="Sergeant">Sergeant</option>
            <option value="Staff Sergeant">Staff Sergeant</option>
            <option value="Sergeant First Class">Sergeant First Class</option>
            <option value="Master Sergeant">Master Sergeant</option>
            <option value="Sergeant Major">Sergeant Major</option>
            <option value="Lieutenant">Lieutenant</option>
            <option value="Captain">Captain</option>
            <option value="Major">Major</option>
            <option value="Colonel">Colonel</option>
            <option value="Major General">Major General</option>
            <option value="Lieutenant General">Lieutenant General</option>
            <option value="Vice General of Army">Vice General of Army</option>
            <option value="General of Army">General of Army</option>
          </select>
        </div>
      </div>

      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:16px;">
        <button class="btn btn-secondary" onclick="closeModal('newEmployeeModal')">Abbrechen</button>
        <button class="btn btn-primary" onclick="createNewEmployee()"><i class="fas fa-plus"></i> Erstellen</button>
      </div>
    </div>
  </div>

  <!-- Edit Employee Modal -->
  <div class="modal-overlay" id="editEmployeeModal" onclick="if(event.target===this)closeModal('editEmployeeModal')">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title"><i class="fas fa-edit"></i> Mitarbeiter bearbeiten</div>
        <button class="modal-close" onclick="closeModal('editEmployeeModal')"><i class="fas fa-times"></i></button>
      </div>

      <div class="form-grid-new" style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;">
        <div class="form-group">
          <label class="form-label">VollstÃ¤ndiger Name *</label>
          <input type="text" class="form-input" id="editEmployeeName" placeholder="z.B. Max Fiart">
        </div>
        <div class="form-group">
          <label class="form-label">Dienstnummer (DN) *</label>
          <input type="number" class="form-input" id="editEmployeeDN" placeholder="z.B. 43" min="1" max="9999">
        </div>
        <div class="form-group">
          <label class="form-label">Unit</label>
          <select class="form-select" id="editEmployeeUnit">
            <option value="">Unit auswÃ¤hlen</option>
            <option value="Air Force">Air Force</option>
            <option value="S.O.C">S.O.C</option>
            <option value="Infantry">Infantry</option>
            <option value="Military Police">Military Police</option>
            <option value="Navy Marine">Navy Marine</option>
            <option value="Navy SEALs">Navy SEALs</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Rang</label>
          <select class="form-select" id="editEmployeeRank">
            <option value="">Rang auswÃ¤hlen</option>
            <option value="Private">Private</option>
            <option value="Private First Class">Private First Class</option>
            <option value="Specialist">Specialist</option>
            <option value="Corporal">Corporal</option>
            <option value="Sergeant">Sergeant</option>
            <option value="Staff Sergeant">Staff Sergeant</option>
            <option value="Sergeant First Class">Sergeant First Class</option>
            <option value="Master Sergeant">Master Sergeant</option>
            <option value="Sergeant Major">Sergeant Major</option>
            <option value="Lieutenant">Lieutenant</option>
            <option value="Captain">Captain</option>
            <option value="Major">Major</option>
            <option value="Colonel">Colonel</option>
            <option value="Major General">Major General</option>
            <option value="Lieutenant General">Lieutenant General</option>
            <option value="Vice General of Army">Vice General of Army</option>
            <option value="General of Army">General of Army</option>
          </select>
        </div>
      </div>

      <div style="display:flex;justify-content:space-between;align-items:center;gap:8px;margin-top:16px;">
        <button class="btn btn-danger" onclick="deleteCurrentEmployee()" style="margin-right:auto;"><i class="fas fa-trash"></i> LÃ¶schen</button>
        <div style="display:flex;gap:8px;">
          <button class="btn btn-secondary" onclick="closeModal('editEmployeeModal')">Abbrechen</button>
          <button class="btn btn-primary" onclick="saveEditedEmployee()"><i class="fas fa-save"></i> Ã„nderungen speichern</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Firebase-Konfiguration (ersetzen Sie diese mit Ihren eigenen Daten!)
    const firebaseConfig = {
      apiKey: "AIzaSyCy4aX_j7e7wRpQoMxxQZ-70WqXlJ0qDlY",
      authDomain: "hr-einweisung.firebaseapp.com",
      projectId: "hr-einweisung",
      storageBucket: "hr-einweisung.firebasestorage.app",
      messagingSenderId: "1097625910242447422",
      appId: "1:1097625910242447422:web:3b9e1f2e8f1c4b2e9f3a1c"
    };

    // Firebase initialisieren
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // App State
    let currentEmployee = null;
    let employees = [];
    let filteredEmployees = [];
    let currentFilter = 'all';

    // DOM Elemente
    const employeeList = document.getElementById('employeeList');
    const employeeHeader = document.getElementById('employeeHeader');
    const inductionContent = document.getElementById('inductionContent');
    const currentEmployeeName = document.getElementById('currentEmployeeName');
    const currentEmployeeDN = document.getElementById('currentEmployeeDN');
    const currentEmployeeUnit = document.getElementById('currentEmployeeUnit');
    const currentEmployeeRank = document.getElementById('currentEmployeeRank');
    const employeeCount = document.getElementById('employeeCount');
    const totalEmployees = document.getElementById('totalEmployees');
    const totalAkten = document.getElementById('totalAkten');
    const searchEmployeesInput = document.getElementById('searchEmployees');

    // Formularfelder
    const oralDate = document.getElementById('oralDate');
    const oralTimeStart = document.getElementById('oralTimeStart');
    const oralTimeEnd = document.getElementById('oralTimeEnd');
    const oralPerson = document.getElementById('oralPerson');
    const unitSelect = document.getElementById('unitSelect');
    const rankSelect = document.getElementById('rankSelect');
    const oralNotes = document.getElementById('oralNotes');
    const oralInductionToggle = document.getElementById('oralInductionToggle');
    const oralInductionStatus = document.getElementById('oralInductionStatus');
    const oralInductionCard = document.getElementById('oralInductionCard');

    const orgDate = document.getElementById('orgDate');
    const orgTimeStart = document.getElementById('orgTimeStart');
    const orgTimeEnd = document.getElementById('orgTimeEnd');
    const orgPerson = document.getElementById('orgPerson');
    const unitSelect2 = document.getElementById('unitSelect2');
    const rankSelect2 = document.getElementById('rankSelect2');
    const orgNotes = document.getElementById('orgNotes');
    const orgInductionToggle = document.getElementById('orgInductionToggle');
    const orgInductionStatus = document.getElementById('orgInductionStatus');
    const orgInductionCard = document.getElementById('orgInductionCard');

    // Template Felder
    const oralTemplateContent = document.getElementById('oralTemplateContent');
    const orgTemplateContent = document.getElementById('orgTemplateContent');
    const oralTemplateBadge = document.getElementById('oralTemplateBadge');
    const orgTemplateBadge = document.getElementById('orgTemplateBadge');
    const oralTemplateCard = document.getElementById('oralTemplateCard');
    const orgTemplateCard = document.getElementById('orgTemplateCard');

    // Datum auf heute setzen
    const today = new Date().toISOString().split('T')[0];
    oralDate.value = today;
    orgDate.value = today;

    // Event Listener
    document.addEventListener('DOMContentLoaded', () => {
      loadEmployees();
      setupEventListeners();
    });

    function setupEventListeners() {
      // Suchfunktion fÃ¼r Mitarbeiter
      searchEmployeesInput.addEventListener('input', debounce((e) => {
        searchEmployees(e.target.value);
      }, 300));

      // Event Listener fÃ¼r alle Formularfelder
      const formFields = [
        oralDate, oralTimeStart, oralTimeEnd, oralPerson, unitSelect, rankSelect, oralNotes,
        orgDate, orgTimeStart, orgTimeEnd, orgPerson, unitSelect2, rankSelect2, orgNotes
      ];

      formFields.forEach(field => {
        if (field) {
          field.addEventListener('input', debounce(saveCurrentInductionData, 1000));
          field.addEventListener('change', saveCurrentInductionData);
        }
      });

      // Event Listener fÃ¼r Toggle Switches
      if (oralInductionToggle) {
        oralInductionToggle.addEventListener('change', (e) => {
          toggleInduction('oral', e.target.checked);
        });
      }

      if (orgInductionToggle) {
        orgInductionToggle.addEventListener('change', (e) => {
          toggleInduction('org', e.target.checked);
        });
      }
    }

    // Funktion zum Laden aller Mitarbeiter
    async function loadEmployees() {
      try {
        showLoading();
        const snapshot = await db.collection('employees').get();
        employees = [];
        snapshot.forEach(doc => {
          const data = doc.data();
          employees.push({
            id: doc.id,
            ...data,
            oralInduction: data.oralInduction || { completed: false },
            orgInduction: data.orgInduction || { completed: false }
          });
        });

        updateEmployeeStats();
        filterEmployeesByType(currentFilter);
        
        // Laden der Akten fÃ¼r Statistik
        const aktenSnapshot = await db.collection('beobachtungAkten').get();
        totalAkten.textContent = aktenSnapshot.size;
        
      } catch (error) {
        console.error('Fehler beim Laden der Mitarbeiter:', error);
        showNotification('Fehler beim Laden der Daten', 'danger');
      }
    }

    // Funktion zum Anzeigen des Ladestatus
    function showLoading() {
      employeeList.innerHTML = `
        <div class="loading">
          <div class="loading-spinner"></div>
          <div>Lade Mitarbeiter...</div>
        </div>
      `;
    }

    // Funktion zum Aktualisieren der Mitarbeiterstatistiken
    function updateEmployeeStats() {
      totalEmployees.textContent = employees.length;
      employeeCount.textContent = employees.length;
      
      const completedOral = employees.filter(emp => emp.oralInduction?.completed).length;
      const completedOrg = employees.filter(emp => emp.orgInduction?.completed).length;
      
      // Hier kÃ¶nnten Sie weitere Statistiken aktualisieren
    }

    // Funktion zum Filtern der Mitarbeiter
    function filterEmployeesByType(type) {
      currentFilter = type;
      
      // Filter-Buttons aktualisieren
      document.querySelectorAll('.sidebar-filter-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event?.target.classList.add('active');
      
      // Mitarbeiter filtern
      switch(type) {
        case 'oral':
          filteredEmployees = employees.filter(emp => !emp.oralInduction?.completed);
          break;
        case 'org':
          filteredEmployees = employees.filter(emp => !emp.orgInduction?.completed);
          break;
        case 'all':
        default:
          filteredEmployees = [...employees];
      }
      
      renderEmployeeList();
    }

    // Funktion zum Suchen von Mitarbeitern
    function searchEmployees(query) {
      if (!query.trim()) {
        filterEmployeesByType(currentFilter);
        return;
      }
      
      const searchTerm = query.toLowerCase();
      filteredEmployees = employees.filter(emp => 
        emp.name.toLowerCase().includes(searchTerm) || 
        emp.dn.toString().includes(searchTerm) ||
        emp.unit?.toLowerCase().includes(searchTerm) ||
        emp.rank?.toLowerCase().includes(searchTerm)
      );
      
      renderEmployeeList();
    }

    // Funktion zum Rendern der Mitarbeiterliste
    function renderEmployeeList() {
      if (filteredEmployees.length === 0) {
        employeeList.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon"><i class="fas fa-user-slash"></i></div>
            <div class="empty-title">Keine Mitarbeiter gefunden</div>
            <div class="empty-description">Versuchen Sie einen anderen Suchbegriff</div>
          </div>
        `;
        return;
      }
      
      employeeList.innerHTML = filteredEmployees.map(employee => `
        <div class="employee-card ${currentEmployee?.id === employee.id ? 'active' : ''}" 
             onclick="selectEmployee('${employee.id}')">
          <div class="employee-top-row">
            <div class="employee-name">${employee.name}</div>
            <div class="employee-dn">DN-${employee.dn}</div>
          </div>
          <div class="employee-meta">
            <i class="fas fa-building"></i> ${employee.unit || 'Keine Unit'}
            <i class="fas fa-user-tie"></i> ${employee.rank || 'Kein Rang'}
          </div>
          <div class="induction-badges">
            <div class="induction-badge badge-oral ${employee.oralInduction?.completed ? 'completed' : 'pending'}">
              <i class="fas fa-comments"></i> MÃ¼ndlich
            </div>
            <div class="induction-badge badge-org ${employee.orgInduction?.completed ? 'completed' : 'pending'}">
              <i class="fas fa-clipboard-list"></i> Organisatorisch
            </div>
          </div>
        </div>
      `).join('');
    }

    // Funktion zum AuswÃ¤hlen eines Mitarbeiters
    async function selectEmployee(employeeId) {
      const employee = employees.find(emp => emp.id === employeeId);
      if (!employee) return;
      
      currentEmployee = employee;
      
      // Aktive Karte aktualisieren
      document.querySelectorAll('.employee-card').forEach(card => {
        card.classList.remove('active');
      });
      event?.target.closest('.employee-card')?.classList.add('active');
      
      // Header aktualisieren
      currentEmployeeName.textContent = employee.name;
      currentEmployeeDN.textContent = `DN-${employee.dn}`;
      currentEmployeeUnit.textContent = employee.unit || 'Keine Unit';
      currentEmployeeRank.textContent = employee.rank || 'Kein Rang';
      
      employeeHeader.style.display = 'flex';
      inductionContent.style.display = 'flex';
      
      // Formulardaten laden
      loadInductionData(employee);
      
      // Templates aktualisieren
      updateTemplates();
    }

    // Funktion zum Laden der Einweisungsdaten
    function loadInductionData(employee) {
      // MÃ¼ndliche Einweisung
      const oral = employee.oralInduction || {};
      oralDate.value = oral.date || today;
      oralTimeStart.value = oral.timeStart || '';
      oralTimeEnd.value = oral.timeEnd || '';
      oralPerson.value = oral.person || '';
      unitSelect.value = oral.unit || employee.unit || '';
      rankSelect.value = oral.rank || employee.rank || '';
      oralNotes.value = oral.notes || '';
      oralInductionToggle.checked = oral.completed || false;
      updateInductionUI('oral', oral.completed);
      
      // Organisatorische Einweisung
      const org = employee.orgInduction || {};
      orgDate.value = org.date || today;
      orgTimeStart.value = org.timeStart || '';
      orgTimeEnd.value = org.timeEnd || '';
      orgPerson.value = org.person || '';
      unitSelect2.value = org.unit || employee.unit || '';
      rankSelect2.value = org.rank || employee.rank || '';
      orgNotes.value = org.notes || '';
      orgInductionToggle.checked = org.completed || false;
      updateInductionUI('org', org.completed);
    }

    // Funktion zum Speichern der Einweisungsdaten
    async function saveCurrentInductionData() {
      if (!currentEmployee) return;
      
      try {
        const oralData = {
          date: oralDate.value,
          timeStart: oralTimeStart.value,
          timeEnd: oralTimeEnd.value,
          person: oralPerson.value,
          unit: unitSelect.value,
          rank: rankSelect.value,
          notes: oralNotes.value,
          completed: oralInductionToggle.checked,
          lastUpdated: new Date().toISOString()
        };
        
        const orgData = {
          date: orgDate.value,
          timeStart: orgTimeStart.value,
          timeEnd: orgTimeEnd.value,
          person: orgPerson.value,
          unit: unitSelect2.value,
          rank: rankSelect2.value,
          notes: orgNotes.value,
          completed: orgInductionToggle.checked,
          lastUpdated: new Date().toISOString()
        };
        
        await db.collection('employees').doc(currentEmployee.id).update({
          oralInduction: oralData,
          orgInduction: orgData
        });
        
        // Lokale Daten aktualisieren
        const employeeIndex = employees.findIndex(emp => emp.id === currentEmployee.id);
        if (employeeIndex !== -1) {
          employees[employeeIndex].oralInduction = oralData;
          employees[employeeIndex].orgInduction = orgData;
        }
        
        updateInductionUI('oral', oralData.completed);
        updateInductionUI('org', orgData.completed);
        updateTemplates();
        
        showNotification('Ã„nderungen gespeichert', 'success');
        
      } catch (error) {
        console.error('Fehler beim Speichern:', error);
        showNotification('Fehler beim Speichern', 'danger');
      }
    }

    // Funktion zum Umschalten der Einweisung
    async function toggleInduction(type, completed) {
      if (!currentEmployee) return;
      
      try {
        const field = type === 'oral' ? 'oralInduction' : 'orgInduction';
        const data = {
          [field]: {
            ...(type === 'oral' ? currentEmployee.oralInduction : currentEmployee.orgInduction),
            completed,
            lastUpdated: new Date().toISOString()
          }
        };
        
        await db.collection('employees').doc(currentEmployee.id).update(data);
        
        // Lokale Daten aktualisieren
        const employeeIndex = employees.findIndex(emp => emp.id === currentEmployee.id);
        if (employeeIndex !== -1) {
          if (type === 'oral') {
            employees[employeeIndex].oralInduction = data.oralInduction;
          } else {
            employees[employeeIndex].orgInduction = data.orgInduction;
          }
        }
        
        updateInductionUI(type, completed);
        updateTemplates();
        
        showNotification(`${type === 'oral' ? 'MÃ¼ndliche' : 'Organisatorische'} Einweisung ${completed ? 'bestanden' : 'ausstehend'}`, 'success');
        
      } catch (error) {
        console.error('Fehler beim Umschalten:', error);
        showNotification('Fehler beim Speichern', 'danger');
      }
    }

    // Funktion zum Aktualisieren der UI der Einweisung
    function updateInductionUI(type, completed) {
      if (type === 'oral') {
        oralInductionStatus.textContent = completed ? 'BESTANDEN' : 'AUSSTEHEND';
        oralInductionCard.classList.toggle('completed', completed);
        oralTemplateBadge.textContent = completed ? 'BESTANDEN' : 'AUSSTEHEND';
        oralTemplateCard.classList.toggle('completed', completed);
      } else {
        orgInductionStatus.textContent = completed ? 'BESTANDEN' : 'AUSSTEHEND';
        orgInductionCard.classList.toggle('completed', completed);
        orgTemplateBadge.textContent = completed ? 'BESTANDEN' : 'AUSSTEHEND';
        orgTemplateCard.classList.toggle('completed', completed);
      }
    }

    // Funktion zum Aktualisieren der Templates
    function updateTemplates() {
      if (!currentEmployee) return;
      
      const oral = currentEmployee.oralInduction || {};
      const org = currentEmployee.orgInduction || {};
      
      // MÃ¼ndliches Template
      oralTemplateContent.textContent = generateOralTemplate(currentEmployee, oral);
      
      // Organisatorisches Template
      orgTemplateContent.textContent = generateOrgTemplate(currentEmployee, org);
    }

    // Funktion zum Generieren des mÃ¼ndlichen Templates
    function generateOralTemplate(employee, data) {
      const date = data.date ? new Date(data.date).toLocaleDateString('de-DE') : '-';
      const time = data.timeStart && data.timeEnd ? `${data.timeStart} - ${data.timeEnd}` : '-';
      
      return `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
MÃœNDLICHE EINWEISUNG

Name: ${employee.name}
DN: ${employee.dn}
Unit: ${data.unit || employee.unit || '-'}
Rang: ${data.rank || employee.rank || '-'}
Datum: ${date}
Uhrzeit: ${time}
Beteiligte Person: ${data.person || '-'}

Sonstige Bemerkungen:
${data.notes || '-'}

Status: ${data.completed ? 'âœ… BESTANDEN' : 'âŒ AUSSTEHEND'}
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`;
    }

    // Funktion zum Generieren des organisatorischen Templates
    function generateOrgTemplate(employee, data) {
      const date = data.date ? new Date(data.date).toLocaleDateString('de-DE') : '-';
      const time = data.timeStart && data.timeEnd ? `${data.timeStart} - ${data.timeEnd}` : '-';
      
      return `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
ORGANISATORISCHE EINWEISUNG

Name: ${employee.name}
DN: ${employee.dn}
Unit: ${data.unit || employee.unit || '-'}
Rang: ${data.rank || employee.rank || '-'}
Datum: ${date}
Uhrzeit: ${time}
Beteiligte Person: ${data.person || '-'}

Sonstige Bemerkungen:
${data.notes || '-'}

Status: ${data.completed ? 'âœ… BESTANDEN' : 'âŒ AUSSTEHEND'}
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`;
    }

    // Funktion zum Kopieren des mÃ¼ndlichen Templates
    async function copyOralTemplate() {
      if (!currentEmployee) {
        showNotification('Bitte wÃ¤hlen Sie zuerst einen Mitarbeiter aus', 'warning');
        return;
      }
      
      try {
        await navigator.clipboard.writeText(oralTemplateContent.textContent);
        showNotification('MÃ¼ndliches Template kopiert', 'success');
      } catch (error) {
        console.error('Fehler beim Kopieren:', error);
        showNotification('Fehler beim Kopieren', 'danger');
      }
    }

    // Funktion zum Kopieren des organisatorischen Templates
    async function copyOrgTemplate() {
      if (!currentEmployee) {
        showNotification('Bitte wÃ¤hlen Sie zuerst einen Mitarbeiter aus', 'warning');
        return;
      }
      
      try {
        await navigator.clipboard.writeText(orgTemplateContent.textContent);
        showNotification('Organisatorisches Template kopiert', 'success');
      } catch (error) {
        console.error('Fehler beim Kopieren:', error);
        showNotification('Fehler beim Kopieren', 'danger');
      }
    }

    // Funktion zum Ã–ffnen des Modals fÃ¼r neue Mitarbeiter
    function openNewEmployeeModal() {
      document.getElementById('newEmployeeModal').classList.add('active');
      document.getElementById('newEmployeeName').value = '';
      document.getElementById('newEmployeeDN').value = '';
      document.getElementById('newEmployeeUnit').value = '';
      document.getElementById('newEmployeeRank').value = '';
    }

    // Funktion zum Erstellen eines neuen Mitarbeiters
    async function createNewEmployee() {
      const name = document.getElementById('newEmployeeName').value.trim();
      const dn = document.getElementById('newEmployeeDN').value;
      const unit = document.getElementById('newEmployeeUnit').value;
      const rank = document.getElementById('newEmployeeRank').value;
      
      if (!name || !dn) {
        showNotification('Bitte Name und Dienstnummer eingeben', 'warning');
        return;
      }
      
      if (employees.some(emp => emp.dn.toString() === dn)) {
        showNotification('Diese Dienstnummer existiert bereits', 'warning');
        return;
      }
      
      try {
        const employeeData = {
          name,
          dn: parseInt(dn),
          unit: unit || '',
          rank: rank || '',
          oralInduction: { completed: false },
          orgInduction: { completed: false },
          createdAt: new Date().toISOString()
        };
        
        const docRef = await db.collection('employees').add(employeeData);
        
        employees.push({
          id: docRef.id,
          ...employeeData
        });
        
        updateEmployeeStats();
        filterEmployeesByType(currentFilter);
        closeModal('newEmployeeModal');
        showNotification('Mitarbeiter erfolgreich erstellt', 'success');
        
      } catch (error) {
        console.error('Fehler beim Erstellen:', error);
        showNotification('Fehler beim Erstellen des Mitarbeiters', 'danger');
      }
    }

    // Funktion zum Ã–ffnen des Bearbeitungsmodals
    function openEditEmployeeModal() {
      if (!currentEmployee) {
        showNotification('Bitte wÃ¤hlen Sie zuerst einen Mitarbeiter aus', 'warning');
        return;
      }
      
      document.getElementById('editEmployeeModal').classList.add('active');
      document.getElementById('editEmployeeName').value = currentEmployee.name;
      document.getElementById('editEmployeeDN').value = currentEmployee.dn;
      document.getElementById('editEmployeeUnit').value = currentEmployee.unit || '';
      document.getElementById('editEmployeeRank').value = currentEmployee.rank || '';
    }

    // Funktion zum Speichern der bearbeiteten Mitarbeiterdaten
    async function saveEditedEmployee() {
      if (!currentEmployee) return;
      
      const name = document.getElementById('editEmployeeName').value.trim();
      const dn = document.getElementById('editEmployeeDN').value;
      const unit = document.getElementById('editEmployeeUnit').value;
      const rank = document.getElementById('editEmployeeRank').value;
      
      if (!name || !dn) {
        showNotification('Bitte Name und Dienstnummer eingeben', 'warning');
        return;
      }
      
      // PrÃ¼fen, ob DN bereits von einem anderen Mitarbeiter verwendet wird
      const dnExists = employees.some(emp => 
        emp.id !== currentEmployee.id && emp.dn.toString() === dn
      );
      
      if (dnExists) {
        showNotification('Diese Dienstnummer wird bereits verwendet', 'warning');
        return;
      }
      
      try {
        const updateData = {
          name,
          dn: parseInt(dn),
          unit: unit || '',
          rank: rank || '',
          updatedAt: new Date().toISOString()
        };
        
        await db.collection('employees').doc(currentEmployee.id).update(updateData);
        
        // Lokale Daten aktualisieren
        const employeeIndex = employees.findIndex(emp => emp.id === currentEmployee.id);
        if (employeeIndex !== -1) {
          employees[employeeIndex] = {
            ...employees[employeeIndex],
            ...updateData
          };
        }
        
        // Aktuelle Ansicht aktualisieren
        currentEmployee = {
          ...currentEmployee,
          ...updateData
        };
        
        currentEmployeeName.textContent = name;
        currentEmployeeDN.textContent = `DN-${dn}`;
        currentEmployeeUnit.textContent = unit || 'Keine Unit';
        currentEmployeeRank.textContent = rank || 'Kein Rang';
        
        closeModal('editEmployeeModal');
        renderEmployeeList();
        updateTemplates();
        showNotification('Mitarbeiter erfolgreich aktualisiert', 'success');
        
      } catch (error) {
        console.error('Fehler beim Aktualisieren:', error);
        showNotification('Fehler beim Aktualisieren des Mitarbeiters', 'danger');
      }
    }

    // Funktion zum LÃ¶schen des aktuellen Mitarbeiters
    async function deleteCurrentEmployee() {
      if (!currentEmployee) return;
      
      if (!confirm(`MÃ¶chten Sie den Mitarbeiter "${currentEmployee.name}" wirklich lÃ¶schen?`)) {
        return;
      }
      
      try {
        await db.collection('employees').doc(currentEmployee.id).delete();
        
        // Aus lokaler Liste entfernen
        employees = employees.filter(emp => emp.id !== currentEmployee.id);
        
        // Reset current view
        currentEmployee = null;
        employeeHeader.style.display = 'none';
        inductionContent.style.display = 'none';
        
        updateEmployeeStats();
        filterEmployeesByType(currentFilter);
        closeModal('editEmployeeModal');
        showNotification('Mitarbeiter erfolgreich gelÃ¶scht', 'success');
        
      } catch (error) {
        console.error('Fehler beim LÃ¶schen:', error);
        showNotification('Fehler beim LÃ¶schen des Mitarbeiters', 'danger');
      }
    }

    // Funktion zum Anzeigen von Benachrichtigungen
    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      const notificationMessage = document.getElementById('notificationMessage');
      
      notification.className = 'notification';
      notification.classList.add(type === 'success' ? 'success' : type === 'warning' ? 'warning' : 'danger');
      notificationMessage.textContent = message;
      
      notification.classList.add('show');
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    // Funktion zum SchlieÃŸen von Modals
    function closeModal(modalId) {
      document.getElementById(modalId).classList.remove('active');
    }

    // Debounce-Funktion fÃ¼r Suchfunktion
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }

    // Funktionen fÃ¼r AnkÃ¼ndigungen Modal
    function openAnkundigungModal() {
      document.getElementById('ankundigungModal').classList.add('active');
      switchAnkundigungTab('new');
    }

    function switchAnkundigungTab(tab) {
      // Tabs aktualisieren
      document.querySelectorAll('.ankundigung-tab').forEach(t => t.classList.remove('active'));
      event?.target.classList.add('active');
      
      // Tab-Inhalte ausblenden
      document.querySelectorAll('.ankundigung-tab-content').forEach(content => {
        content.style.display = 'none';
      });
      
      // GewÃ¤hlten Tab anzeigen
      document.getElementById(`ankundigung${capitalizeFirstLetter(tab)}Tab`).style.display = 'flex';
      
      if (tab === 'list') {
        loadAnkundigungen();
      }
    }

    // Funktionen fÃ¼r SoldatengesprÃ¤che Modal
    function openSoldatenModal() {
      document.getElementById('soldatenModal').classList.add('active');
      switchSoldatenTab('new');
    }

    function switchSoldatenTab(tab) {
      // Tabs aktualisieren
      document.querySelectorAll('.soldaten-tab').forEach(t => t.classList.remove('active'));
      event?.target.classList.add('active');
      
      // Tab-Inhalte ausblenden
      document.querySelectorAll('.soldaten-tab-content').forEach(content => {
        content.style.display = 'none';
      });
      
      // GewÃ¤hlten Tab anzeigen
      document.getElementById(`soldaten${capitalizeFirstLetter(tab)}Tab`).style.display = 'flex';
      
      if (tab === 'list') {
        loadSoldatenGesprÃ¤che();
      }
    }

    // Funktionen fÃ¼r Beobachtungs-Akten Modal
    function openBeobachtungAktenModal() {
      document.getElementById('beobachtungAktenModal').classList.add('active');
      switchBeobachtungTab('new');
    }

    function switchBeobachtungTab(tab) {
      // Tabs aktualisieren
      document.querySelectorAll('.beobachtung-tab').forEach(t => t.classList.remove('active'));
      event?.target.classList.add('active');
      
      // Tab-Inhalte ausblenden
      document.querySelectorAll('.beobachtung-tab-content').forEach(content => {
        content.style.display = 'none';
      });
      
      // GewÃ¤hlten Tab anzeigen
      document.getElementById(`beobachtung${capitalizeFirstLetter(tab)}Tab`).style.display = 'flex';
      
      if (tab === 'list') {
        loadAkten();
      }
    }

    // Hilfsfunktion fÃ¼r GroÃŸbuchstaben
    function capitalizeFirstLetter(string) {
      return string.charAt(0).toUpperCase() + string.slice(1);
    }

    // Laden von AnkÃ¼ndigungen
    async function loadAnkundigungen() {
      try {
        const snapshot = await db.collection('ankundigungen').orderBy('createdAt', 'desc').get();
        const ankundigungen = [];
        snapshot.forEach(doc => {
          ankundigungen.push({
            id: doc.id,
            ...doc.data()
          });
        });
        renderAnkundigungen(ankundigungen);
      } catch (error) {
        console.error('Fehler beim Laden der AnkÃ¼ndigungen:', error);
      }
    }

    // Rendern von AnkÃ¼ndigungen
    function renderAnkundigungen(ankundigungen) {
      const container = document.getElementById('ankundigungListe');
      if (!ankundigungen.length) {
        container.innerHTML = `
          <div class="empty-ankundigung">
            <div class="empty-ankundigung-icon"><i class="fas fa-bullhorn"></i></div>
            <div class="empty-ankundigung-title">Keine AnkÃ¼ndigungen gefunden</div>
            <div class="empty-description">Erstellen Sie Ihre erste AnkÃ¼ndigung</div>
          </div>
        `;
        return;
      }
      
      container.innerHTML = ankundigungen.map(item => `
        <div class="ankundigung-item">
          <div class="ankundigung-item-header">
            <div class="ankundigung-item-title">${item.title || 'Ohne Titel'}</div>
            <div class="ankundigung-item-type">${item.type || 'AnkÃ¼ndigung'}</div>
          </div>
          <div class="ankundigung-item-date">
            <i class="fas fa-calendar"></i> ${new Date(item.createdAt).toLocaleDateString('de-DE')}
          </div>
          <div class="ankundigung-item-content">${item.content || ''}</div>
          ${item.template ? `<div class="ankundigung-item-template">${item.template}</div>` : ''}
          <div class="ankundigung-item-actions">
            <button class="ankundigung-item-btn ankundigung-item-btn-copy" onclick="copyToClipboard('${item.template || item.content}')">
              <i class="fas fa-copy"></i> Kopieren
            </button>
            <button class="ankundigung-item-btn ankundigung-item-btn-delete" onclick="deleteAnkundigung('${item.id}')">
              <i class="fas fa-trash"></i> LÃ¶schen
            </button>
          </div>
        </div>
      `).join('');
    }

    // Laden von SoldatengesprÃ¤chen
    async function loadSoldatenGesprÃ¤che() {
      try {
        const snapshot = await db.collection('soldatenGesprÃ¤che').orderBy('datum', 'desc').get();
        const gesprÃ¤che = [];
        snapshot.forEach(doc => {
          gesprÃ¤che.push({
            id: doc.id,
            ...doc.data()
          });
        });
        renderSoldatenGesprÃ¤che(gesprÃ¤che);
      } catch (error) {
        console.error('Fehler beim Laden der GesprÃ¤che:', error);
      }
    }

    // Rendern von SoldatengesprÃ¤chen
    function renderSoldatenGesprÃ¤che(gesprÃ¤che) {
      const container = document.getElementById('soldatenListe');
      if (!gesprÃ¤che.length) {
        container.innerHTML = `
          <div class="empty-soldaten">
            <div class="empty-soldaten-icon"><i class="fas fa-comments"></i></div>
            <div class="empty-soldaten-title">Keine GesprÃ¤che gefunden</div>
            <div class="empty-description">Erstellen Sie Ihr erstes SoldatengesprÃ¤ch</div>
          </div>
        `;
        return;
      }
      
      container.innerHTML = gesprÃ¤che.map(item => `
        <div class="soldaten-item">
          <div class="soldaten-item-header">
            <div class="soldaten-item-name">${item.name || 'Unbekannt'}</div>
            <div class="soldaten-item-dn">DN-${item.dn || '???'}</div>
          </div>
          <div class="soldaten-item-date">
            <i class="fas fa-calendar"></i> ${new Date(item.datum).toLocaleDateString('de-DE')} 
            <i class="fas fa-clock"></i> ${item.uhrzeit || ''}
          </div>
          ${item.notizen ? `<div class="soldaten-item-notizen">${item.notizen}</div>` : ''}
          ${item.sonstiges ? `<div class="soldaten-item-sonstiges">${item.sonstiges}</div>` : ''}
          ${item.template ? `<div class="soldaten-item-template">${item.template}</div>` : ''}
          <div class="soldaten-item-actions">
            <button class="soldaten-item-btn soldaten-item-btn-copy" onclick="copyToClipboard('${item.template || item.notizen}')">
              <i class="fas fa-copy"></i> Kopieren
            </button>
            <button class="soldaten-item-btn soldaten-item-btn-delete" onclick="deleteSoldatenGesprÃ¤ch('${item.id}')">
              <i class="fas fa-trash"></i> LÃ¶schen
            </button>
          </div>
        </div>
      `).join('');
    }

    // Laden von Akten
    async function loadAkten() {
      try {
        const snapshot = await db.collection('beobachtungAkten').orderBy('createdAt', 'desc').get();
        const akten = [];
        snapshot.forEach(doc => {
          akten.push({
            id: doc.id,
            ...doc.data()
          });
        });
        renderAkten(akten);
      } catch (error) {
        console.error('Fehler beim Laden der Akten:', error);
      }
    }

    // Rendern von Akten
    function renderAkten(akten) {
      const container = document.getElementById('aktenListe');
      if (!akten.length) {
        container.innerHTML = `
          <div class="empty-beobachtungen">
            <div class="empty-beobachtungen-icon"><i class="fas fa-folder-open"></i></div>
            <div class="empty-beobachtungen-title">Keine Akten gefunden</div>
            <div class="empty-description">Erstellen Sie Ihre erste Akte</div>
          </div>
        `;
        return;
      }
      
      container.innerHTML = akten.map(item => `
        <div class="beobachtung-akte-item">
          <div class="beobachtung-akte-header">
            <div class="beobachtung-akte-name">${item.name || 'Unbekannt'}</div>
            <div class="beobachtung-akte-dn">DN-${item.dn || '???'}</div>
          </div>
          <div class="beobachtung-akte-date">
            <i class="fas fa-calendar"></i> ${new Date(item.createdAt).toLocaleDateString('de-DE')}
          </div>
          ${item.grund ? `<div class="beobachtung-akte-grund">${item.grund}</div>` : ''}
          ${item.template ? `<div class="beobachtung-akte-template">${item.template}</div>` : ''}
          <div class="beobachtung-akte-actions">
            <button class="beobachtung-akte-btn beobachtung-akte-btn-copy" onclick="copyToClipboard('${item.template || item.grund}')">
              <i class="fas fa-copy"></i> Kopieren
            </button>
            <button class="beobachtung-akte-btn beobachtung-akte-btn-delete" onclick="deleteAkte('${item.id}')">
              <i class="fas fa-trash"></i> LÃ¶schen
            </button>
          </div>
        </div>
      `).join('');
    }

    // Kopieren in die Zwischenablage
    async function copyToClipboard(text) {
      try {
        await navigator.clipboard.writeText(text);
        showNotification('In Zwischenablage kopiert', 'success');
      } catch (error) {
        console.error('Fehler beim Kopieren:', error);
        showNotification('Fehler beim Kopieren', 'danger');
      }
    }

    // Suchfunktion fÃ¼r AnkÃ¼ndigungen
    async function searchAnkundigungen(query) {
      try {
        let ankundigungen = [];
        const snapshot = await db.collection('ankundigungen').orderBy('createdAt', 'desc').get();
        
        snapshot.forEach(doc => {
          const data = doc.data();
          if (query.trim() === '' || 
              (data.title && data.title.toLowerCase().includes(query.toLowerCase())) ||
              (data.content && data.content.toLowerCase().includes(query.toLowerCase()))) {
            ankundigungen.push({
              id: doc.id,
              ...data
            });
          }
        });
        
        renderAnkundigungen(ankundigungen);
      } catch (error) {
        console.error('Fehler bei der Suche:', error);
      }
    }

    // Suchfunktion fÃ¼r SoldatengesprÃ¤che
    async function searchSoldaten(query) {
      try {
        let gesprÃ¤che = [];
        const snapshot = await db.collection('soldatenGesprÃ¤che').orderBy('datum', 'desc').get();
        
        snapshot.forEach(doc => {
          const data = doc.data();
          if (query.trim() === '' || 
              (data.name && data.name.toLowerCase().includes(query.toLowerCase())) ||
              (data.dn && data.dn.toString().includes(query))) {
            gesprÃ¤che.push({
              id: doc.id,
              ...data
            });
          }
        });
        
        renderSoldatenGesprÃ¤che(gesprÃ¤che);
      } catch (error) {
        console.error('Fehler bei der Suche:', error);
      }
    }

    // Suchfunktion fÃ¼r Akten
    async function searchAkten(query) {
      try {
        let akten = [];
        const snapshot = await db.collection('beobachtungAkten').orderBy('createdAt', 'desc').get();
        
        snapshot.forEach(doc => {
          const data = doc.data();
          if (query.trim() === '' || 
              (data.name && data.name.toLowerCase().includes(query.toLowerCase())) ||
              (data.dn && data.dn.toString().includes(query))) {
            akten.push({
              id: doc.id,
              ...data
            });
          }
        });
        
        renderAkten(akten);
      } catch (error) {
        console.error('Fehler bei der Suche:', error);
      }
    }

    // Funktion zum Speichern einer AnkÃ¼ndigung
    async function saveAnkundigung() {
      const title = document.getElementById('ankundigungTitle').value.trim();
      const content = document.getElementById('ankundigungContent').value.trim();
      
      if (!content) {
        showNotification('Bitte geben Sie einen Inhalt ein', 'warning');
        return;
      }
      
      try {
        const template = generateAnkundigungTemplate(title, content);
        const ankundigungData = {
          type: 'AnkÃ¼ndigung',
          title: title || 'Ohne Titel',
          content,
          template,
          createdAt: new Date().toISOString()
        };
        
        await db.collection('ankundigungen').add(ankundigungData);
        
        // Formular zurÃ¼cksetzen
        document.getElementById('ankundigungTitle').value = '';
        document.getElementById('ankundigungContent').value = '';
        document.getElementById('ankundigungPreview').textContent = 'ðŸª§ **AnkÃ¼ndigung**\n\n';
        
        showNotification('AnkÃ¼ndigung gespeichert', 'success');
        
      } catch (error) {
        console.error('Fehler beim Speichern:', error);
        showNotification('Fehler beim Speichern', 'danger');
      }
    }

    // Funktion zum Generieren des AnkÃ¼ndigungstemplates
    function generateAnkundigungTemplate(title, content) {
      return `ðŸª§ **${title || 'AnkÃ¼ndigung'}**

${content}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`;
    }

    // Funktion zum Kopieren des AnkÃ¼ndigungstemplates
    async function copyAnkundigungTemplate() {
      const title = document.getElementById('ankundigungTitle').value.trim();
      const content = document.getElementById('ankundigungContent').value.trim();
      
      if (!content) {
        showNotification('Bitte geben Sie einen Inhalt ein', 'warning');
        return;
      }
      
      const template = generateAnkÃ¼ndigungTemplate(title, content);
      
      try {
        await navigator.clipboard.writeText(template);
        showNotification('AnkÃ¼ndigung kopiert', 'success');
      } catch (error) {
        console.error('Fehler beim Kopieren:', error);
        showNotification('Fehler beim Kopieren', 'danger');
      }
    }

    // Funktion zum Speichern einer Besprechung
    async function saveBesprechung() {
      const thema = document.getElementById('besprechungThema').value.trim();
      const date = document.getElementById('besprechungDate').value;
      const time = document.getElementById('besprechungTime').value;
      const ort = document.getElementById('besprechungOrt').value.trim();
      const content = document.getElementById('besprechungContent').value.trim();
      
      if (!thema || !date || !time || !content) {
        showNotification('Bitte fÃ¼llen Sie alle Pflichtfelder aus (*)', 'warning');
        return;
      }
      
      try {
        const template = generateBesprechungTemplate(thema, date, time, ort, content);
        const besprechungData = {
          type: 'Besprechung',
          thema,
          date,
          time,
          ort,
          content,
          template,
          createdAt: new Date().toISOString()
        };
        
        await db.collection('ankundigungen').add(besprechungData);
        
        // Formular zurÃ¼cksetzen
        document.getElementById('besprechungThema').value = '';
        document.getElementById('besprechungDate').value = '';
        document.getElementById('besprechungTime').value = '';
        document.getElementById('besprechungOrt').value = '';
        document.getElementById('besprechungContent').value = '';
        document.getElementById('besprechungPreview').textContent = 'ðŸ–Šï¸ **Besprechung**\n\nThema: \nDatum: \nUhrzeit: \nOrt: \n\n';
        
        showNotification('Besprechung gespeichert', 'success');
        
      } catch (error) {
        console.error('Fehler beim Speichern:', error);
        showNotification('Fehler beim Speichern', 'danger');
      }
    }

    // Funktion zum Generieren des Besprechungstemplates
    function generateBesprechungTemplate(thema, date, time, ort, content) {
      const formattedDate = new Date(date).toLocaleDateString('de-DE');
      
      return `ðŸ–Šï¸ **Besprechung**

Thema: ${thema}
Datum: ${formattedDate}
Uhrzeit: ${time}
Ort: ${ort || '-'}

${content}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`;
    }

    // Funktion zum Kopieren des Besprechungstemplates
    async function copyBesprechungTemplate() {
      const thema = document.getElementById('besprechungThema').value.trim();
      const date = document.getElementById('besprechungDate').value;
      const time = document.getElementById('besprechungTime').value;
      const ort = document.getElementById('besprechungOrt').value.trim();
      const content = document.getElementById('besprechungContent').value.trim();
      
      if (!thema || !date || !time || !content) {
        showNotification('Bitte fÃ¼llen Sie alle Pflichtfelder aus (*)', 'warning');
        return;
      }
      
      const template = generateBesprechungTemplate(thema, date, time, ort, content);
      
      try {
        await navigator.clipboard.writeText(template);
        showNotification('Besprechung kopiert', 'success');
      } catch (error) {
        console.error('Fehler beim Kopieren:', error);
        showNotification('Fehler beim Kopieren', 'danger');
      }
    }

    // Funktion zum Speichern einer Aufstellung
    async function saveAufstellung() {
      const typ = document.getElementById('aufstellungTyp').value;
      const date = document.getElementById('aufstellungDate').value;
      const time = document.getElementById('aufstellungTime').value;
      const ort = document.getElementById('aufstellungOrt').value.trim();
      const bemerkungen = document.getElementById('aufstellungBemerkungen').value.trim();
      
      if (!typ || !date || !time || !ort) {
        showNotification('Bitte fÃ¼llen Sie alle Pflichtfelder aus (*)', 'warning');
        return;
      }
      
      try {
        const template = generateAufstellungTemplate(typ, date, time, ort, bemerkungen);
        const aufstellungData = {
          type: 'Aufstellung',
          typ,
          date,
          time,
          ort,
          bemerkungen,
          template,
          createdAt: new Date().toISOString()
        };
        
        await db.collection('ankundigungen').add(aufstellungData);
        
        // Formular zurÃ¼cksetzen
        document.getElementById('aufstellungTyp').value = '';
        document.getElementById('aufstellungDate').value = '';
        document.getElementById('aufstellungTime').value = '';
        document.getElementById('aufstellungOrt').value = '';
        document.getElementById('aufstellungBemerkungen').value = '';
        document.getElementById('aufstellungPreview').textContent = 'ðŸ•› **Aufstellung**\n\nTyp: \nDatum: \nUhrzeit: \nOrt: \nBemerkungen:\n';
        
        showNotification('Aufstellung gespeichert', 'success');
        
      } catch (error) {
        console.error('Fehler beim Speichern:', error);
        showNotification('Fehler beim Speichern', 'danger');
      }
    }

    // Funktion zum Generieren des Aufstellungstemplates
    function generateAufstellungTemplate(typ, date, time, ort, bemerkungen) {
      const formattedDate = new Date(date).toLocaleDateString('de-DE');
      
      return `ðŸ•› **${typ}**

Datum: ${formattedDate}
Uhrzeit: ${time}
Ort: ${ort}
${bemerkungen ? `Bemerkungen: ${bemerkungen}` : ''}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`;
    }

    // Funktion zum Kopieren des Aufstellungstemplates
    async function copyAufstellungTemplate() {
      const typ = document.getElementById('aufstellungTyp').value;
      const date = document.getElementById('aufstellungDate').value;
      const time = document.getElementById('aufstellungTime').value;
      const ort = document.getElementById('aufstellungOrt').value.trim();
      const bemerkungen = document.getElementById('aufstellungBemerkungen').value.trim();
      
      if (!typ || !date || !time || !ort) {
        showNotification('Bitte fÃ¼llen Sie alle Pflichtfelder aus (*)', 'warning');
        return;
      }
      
      const template = generateAufstellungTemplate(typ, date, time, ort, bemerkungen);
      
      try {
        await navigator.clipboard.writeText(template);
        showNotification('Aufstellung kopiert', 'success');
      } catch (error) {
        console.error('Fehler beim Kopieren:', error);
        showNotification('Fehler beim Kopieren', 'danger');
      }
    }

    // Funktion zum Speichern eines SoldatengesprÃ¤chs
    async function saveSoldatenGesprÃ¤ch() {
      const name = document.getElementById('soldatenName').value.trim();
      const dn = document.getElementById('soldatenDN').value;
      const unit = document.getElementById('soldatenUnit').value;
      const rank = document.getElementById('soldatenRank').value;
      const date = document.getElementById('soldatenDate').value;
      const time = document.getElementById('soldatenTime').value;
      const notizen = document.getElementById('soldatenNotizen').value.trim();
      const sonstiges = document.getElementById('soldatenSonstiges').value.trim();
      
      if (!name || !dn || !date || !time || !notizen) {
        showNotification('Bitte fÃ¼llen Sie alle Pflichtfelder aus (*)', 'warning');
        return;
      }
      
      try {
        const template = generateSoldatenTemplate(name, dn, unit, rank, date, time, notizen, sonstiges);
        const gesprÃ¤chData = {
          name,
          dn: parseInt(dn),
          unit: unit || '',
          rank: rank || '',
          datum: date,
          uhrzeit: time,
          notizen,
          sonstiges: sonstiges || '',
          template,
          createdAt: new Date().toISOString()
        };
        
        await db.collection('soldatenGesprÃ¤che').add(gesprÃ¤chData);
        
        // Formular zurÃ¼cksetzen
        document.getElementById('soldatenName').value = '';
        document.getElementById('soldatenDN').value = '';
        document.getElementById('soldatenUnit').value = '';
        document.getElementById('soldatenRank').value = '';
        document.getElementById('soldatenDate').value = '';
        document.getElementById('soldatenTime').value = '';
        document.getElementById('soldatenNotizen').value = '';
        document.getElementById('soldatenSonstiges').value = '';
        document.getElementById('soldatenPreview').textContent = `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
/////////////////////////////////////////////////////////////////////////
SoldatengesprÃ¤ch

Name: 
DN: 
Hauptunit: 
Rang: 
Datum:
Uhrzeit: 
Notizen:
Sonstiges:

/////////////////////////////////////////////////////////////////////////
<@&1097625910242447422>
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`;
        
        showNotification('SoldatengesprÃ¤ch gespeichert', 'success');
        
      } catch (error) {
        console.error('Fehler beim Speichern:', error);
        showNotification('Fehler beim Speichern', 'danger');
      }
    }

    // Funktion zum Generieren des SoldatengesprÃ¤ch-Templates
    function generateSoldatenTemplate(name, dn, unit, rank, date, time, notizen, sonstiges) {
      const formattedDate = new Date(date).toLocaleDateString('de-DE');
      
      return `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
/////////////////////////////////////////////////////////////////////////
SoldatengesprÃ¤ch

Name: ${name}
DN: ${dn}
Hauptunit: ${unit || '-'}
Rang: ${rank || '-'}
Datum: ${formattedDate}
Uhrzeit: ${time}
Notizen: ${notizen}
${sonstiges ? `Sonstiges: ${sonstiges}` : ''}

/////////////////////////////////////////////////////////////////////////
<@&1097625910242447422>
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`;
    }

    // Funktion zum Kopieren des SoldatengesprÃ¤ch-Templates
    async function copySoldatenTemplate() {
      const name = document.getElementById('soldatenName').value.trim();
      const dn = document.getElementById('soldatenDN').value;
      const unit = document.getElementById('soldatenUnit').value;
      const rank = document.getElementById('soldatenRank').value;
      const date = document.getElementById('soldatenDate').value;
      const time = document.getElementById('soldatenTime').value;
      const notizen = document.getElementById('soldatenNotizen').value.trim();
      const sonstiges = document.getElementById('soldatenSonstiges').value.trim();
      
      if (!name || !dn || !date || !time || !notizen) {
        showNotification('Bitte fÃ¼llen Sie alle Pflichtfelder aus (*)', 'warning');
        return;
      }
      
      const template = generateSoldatenTemplate(name, dn, unit, rank, date, time, notizen, sonstiges);
      
      try {
        await navigator.clipboard.writeText(template);
        showNotification('SoldatengesprÃ¤ch kopiert', 'success');
      } catch (error) {
        console.error('Fehler beim Kopieren:', error);
        showNotification('Fehler beim Kopieren', 'danger');
      }
    }

    // Funktion zum Erstellen einer neuen Akte
    async function createNewAkte() {
      const name = document.getElementById('akteName').value.trim();
      const dn = document.getElementById('akteDN').value;
      const unit = document.getElementById('akteUnit').value;
      const rank = document.getElementById('akteRank').value;
      
      if (!name || !dn) {
        showNotification('Bitte geben Sie Name und Dienstnummer ein', 'warning');
        return;
      }
      
      try {
        const akteData = {
          name,
          dn: parseInt(dn),
          unit: unit || '',
          rank: rank || '',
          createdAt: new Date().toISOString(),
          beobachtungen: []
        };
        
        await db.collection('beobachtungAkten').add(akteData);
        
        // Formular zurÃ¼cksetzen
        document.getElementById('akteName').value = '';
        document.getElementById('akteDN').value = '';
        document.getElementById('akteUnit').value = '';
        document.getElementById('akteRank').value = '';
        
        showNotification('Akte erstellt', 'success');
        
      } catch (error) {
        console.error('Fehler beim Erstellen:', error);
        showNotification('Fehler beim Erstellen', 'danger');
      }
    }

    // Funktion zum Speichern einer Beobachtung in einer Akte
    async function saveBeobachtungToAkte() {
      const name = document.getElementById('beobachtungName').value.trim();
      const dn = document.getElementById('beobachtungDN').value;
      const grund = document.getElementById('beobachtungGrund').value.trim();
      
      if (!name || !dn || !grund) {
        showNotification('Bitte fÃ¼llen Sie alle Felder aus', 'warning');
        return;
      }
      
      try {
        const template = generateBeobachtungTemplate(name, dn, grund);
        const beobachtungData = {
          name,
          dn: parseInt(dn),
          grund,
          template,
          createdAt: new Date().toISOString()
        };
        
        // Hier kÃ¶nnten Sie die Beobachtung einer bestehenden Akte hinzufÃ¼gen
        // FÃ¼r jetzt erstellen wir eine neue Beobachtung
        await db.collection('beobachtungAkten').add(beobachtungData);
        
        // Formular zurÃ¼cksetzen
        document.getElementById('beobachtungName').value = '';
        document.getElementById('beobachtungDN').value = '';
        document.getElementById('beobachtungGrund').value = '';
        document.getElementById('beobachtungPreview').textContent = `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
/////////////////////////////////////////////////////////////////////////
Beobachtung
Name: 
DN:  
Grund:
/////////////////////////////////////////////////////////////////////////
<@&1097625910242447422>
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`;
        
        showNotification('Beobachtung gespeichert', 'success');
        
      } catch (error) {
        console.error('Fehler beim Speichern:', error);
        showNotification('Fehler beim Speichern', 'danger');
      }
    }

    // Funktion zum Generieren des Beobachtungstemplates
    function generateBeobachtungTemplate(name, dn, grund) {
      return `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
/////////////////////////////////////////////////////////////////////////
Beobachtung
Name: ${name}
DN: ${dn}
Grund: ${grund}
/////////////////////////////////////////////////////////////////////////
<@&1097625910242447422>
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`;
    }

    // Funktion zum Kopieren des Beobachtungstemplates
    async function copyBeobachtungTemplate() {
      const name = document.getElementById('beobachtungName').value.trim();
      const dn = document.getElementById('beobachtungDN').value;
      const grund = document.getElementById('beobachtungGrund').value.trim();
      
      if (!name || !dn || !grund) {
        showNotification('Bitte fÃ¼llen Sie alle Felder aus', 'warning');
        return;
      }
      
      const template = generateBeobachtungTemplate(name, dn, grund);
      
      try {
        await navigator.clipboard.writeText(template);
        showNotification('Beobachtung kopiert', 'success');
      } catch (error) {
        console.error('Fehler beim Kopieren:', error);
        showNotification('Fehler beim Kopieren', 'danger');
      }
    }

    // Funktion zum LÃ¶schen einer AnkÃ¼ndigung
    async function deleteAnkundigung(id) {
      if (!confirm('MÃ¶chten Sie diese AnkÃ¼ndigung wirklich lÃ¶schen?')) {
        return;
      }
      
      try {
        await db.collection('ankundigungen').doc(id).delete();
        loadAnkundigungen();
        showNotification('AnkÃ¼ndigung gelÃ¶scht', 'success');
      } catch (error) {
        console.error('Fehler beim LÃ¶schen:', error);
        showNotification('Fehler beim LÃ¶schen', 'danger');
      }
    }

    // Funktion zum LÃ¶schen eines SoldatengesprÃ¤chs
    async function deleteSoldatenGesprÃ¤ch(id) {
      if (!confirm('MÃ¶chten Sie dieses GesprÃ¤ch wirklich lÃ¶schen?')) {
        return;
      }
      
      try {
        await db.collection('soldatenGesprÃ¤che').doc(id).delete();
        loadSoldatenGesprÃ¤che();
        showNotification('GesprÃ¤ch gelÃ¶scht', 'success');
      } catch (error) {
        console.error('Fehler beim LÃ¶schen:', error);
        showNotification('Fehler beim LÃ¶schen', 'danger');
      }
    }

    // Funktion zum LÃ¶schen einer Akte
    async function deleteAkte(id) {
      if (!confirm('MÃ¶chten Sie diese Akte wirklich lÃ¶schen?')) {
        return;
      }
      
      try {
        await db.collection('beobachtungAkten').doc(id).delete();
        loadAkten();
        showNotification('Akte gelÃ¶scht', 'success');
      } catch (error) {
        console.error('Fehler beim LÃ¶schen:', error);
        showNotification('Fehler beim LÃ¶schen', 'danger');
      }
    }

    // Event Listener fÃ¼r Live-Updates der Templates
    document.addEventListener('input', function(e) {
      // AnkÃ¼ndigung Live-Update
      if (e.target.id === 'ankundigungTitle' || e.target.id === 'ankundigungContent') {
        const title = document.getElementById('ankundigungTitle').value.trim();
        const content = document.getElementById('ankundigungContent').value.trim();
        document.getElementById('ankundigungPreview').textContent = generateAnkundigungTemplate(title, content);
      }
      
      // Besprechung Live-Update
      if (['besprechungThema', 'besprechungDate', 'besprechungTime', 'besprechungOrt', 'besprechungContent'].includes(e.target.id)) {
        const thema = document.getElementById('besprechungThema').value.trim();
        const date = document.getElementById('besprechungDate').value;
        const time = document.getElementById('besprechungTime').value;
        const ort = document.getElementById('besprechungOrt').value.trim();
        const content = document.getElementById('besprechungContent').value.trim();
        
        const formattedDate = date ? new Date(date).toLocaleDateString('de-DE') : '';
        document.getElementById('besprechungPreview').textContent = `ðŸ–Šï¸ **Besprechung**

Thema: ${thema}
Datum: ${formattedDate}
Uhrzeit: ${time}
Ort: ${ort}

${content}`;
      }
      
      // Aufstellung Live-Update
      if (['aufstellungTyp', 'aufstellungDate', 'aufstellungTime', 'aufstellungOrt', 'aufstellungBemerkungen'].includes(e.target.id)) {
        const typ = document.getElementById('aufstellungTyp').value;
        const date = document.getElementById('aufstellungDate').value;
        const time = document.getElementById('aufstellungTime').value;
        const ort = document.getElementById('aufstellungOrt').value.trim();
        const bemerkungen = document.getElementById('aufstellungBemerkungen').value.trim();
        
        const formattedDate = date ? new Date(date).toLocaleDateString('de-DE') : '';
        document.getElementById('aufstellungPreview').textContent = `ðŸ•› **${typ || 'Aufstellung'}

Datum: ${formattedDate}
Uhrzeit: ${time}
Ort: ${ort}
${bemerkungen ? `Bemerkungen: ${bemerkungen}` : ''}`;
      }
      
      // SoldatengesprÃ¤ch Live-Update
      if (['soldatenName', 'soldatenDN', 'soldatenUnit', 'soldatenRank', 'soldatenDate', 'soldatenTime', 'soldatenNotizen', 'soldatenSonstiges'].includes(e.target.id)) {
        const name = document.getElementById('soldatenName').value.trim();
        const dn = document.getElementById('soldatenDN').value;
        const unit = document.getElementById('soldatenUnit').value;
        const rank = document.getElementById('soldatenRank').value;
        const date = document.getElementById('soldatenDate').value;
        const time = document.getElementById('soldatenTime').value;
        const notizen = document.getElementById('soldatenNotizen').value.trim();
        const sonstiges = document.getElementById('soldatenSonstiges').value.trim();
        
        const formattedDate = date ? new Date(date).toLocaleDateString('de-DE') : '';
        document.getElementById('soldatenPreview').textContent = `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
/////////////////////////////////////////////////////////////////////////
SoldatengesprÃ¤ch

Name: ${name}
DN: ${dn}
Hauptunit: ${unit}
Rang: ${rank}
Datum: ${formattedDate}
Uhrzeit: ${time}
Notizen: ${notizen}
${sonstiges ? `Sonstiges: ${sonstiges}` : ''}

/////////////////////////////////////////////////////////////////////////
<@&1097625910242447422>
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`;
      }
      
      // Beobachtung Live-Update
      if (['beobachtungName', 'beobachtungDN', 'beobachtungGrund'].includes(e.target.id)) {
        const name = document.getElementById('beobachtungName').value.trim();
        const dn = document.getElementById('beobachtungDN').value;
        const grund = document.getElementById('beobachtungGrund').value.trim();
        
        document.getElementById('beobachtungPreview').textContent = `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
/////////////////////////////////////////////////////////////////////////
Beobachtung
Name: ${name}
DN: ${dn}
Grund: ${grund}
/////////////////////////////////////////////////////////////////////////
<@&1097625910242447422>
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`;
      }
    });
  </script>
</body>
</html>
