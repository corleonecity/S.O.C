<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üìã HR - Einweisungsmanagement</title>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <style>
    :root{
      --primary:#4f46e5; --primary-dark:#4338ca; --primary-light:#818cf8;
      --secondary:#10b981; --secondary-dark:#059669;
      --danger:#ef4444; --danger-dark:#dc2626;
      --warning:#f59e0b; --warning-dark:#d97706;
      --dark:#111827; --dark-card:#1f2937;
      --light:#f9fafb; --gray:#6b7280; --gray-light:#d1d5db;
      --border:rgba(255,255,255,.12);

      --shadow-lg:0 10px 25px -5px rgba(0,0,0,.2);
      --shadow-md:0 4px 12px rgba(0,0,0,.08);
      --shadow-sm:0 1px 3px rgba(0,0,0,.1);

      --radius-lg:12px; --radius-md:8px; --radius-sm:6px;
      --transition:all .2s cubic-bezier(.4,0,.2,1);
    }

    *{margin:0;padding:0;box-sizing:border-box}

    body{
      font-family:'Inter',sans-serif;
      background:#0f172a;
      color:var(--light);
      min-height:100vh;
      overflow-x:hidden;
      font-size:14px;
      line-height:1.4;
    }

    .bg-effects{
      position:fixed; inset:0;
      z-index:-1; overflow:hidden;
    }
    .bg-gradient{
      position:absolute; inset:0;
      background:
        radial-gradient(circle at 15% 70%, rgba(79,70,229,.10) 0%, transparent 40%),
        radial-gradient(circle at 85% 30%, rgba(16,185,129,.08) 0%, transparent 40%);
    }

    .app-container{
      max-width:1200px;
      margin:0 auto;
      padding:16px;
      display:grid;
      grid-template-columns:280px 1fr;
      gap:16px;
      min-height:100vh;
    }

    /* Header */
    .app-header{
      grid-column:1 / -1;
      background:rgba(31,41,55,.8);
      backdrop-filter:blur(12px);
      border-radius:var(--radius-lg);
      padding:16px 20px;
      margin-bottom:16px;
      border:1px solid rgba(255,255,255,.08);
      box-shadow:var(--shadow-md);
    }
    .header-content{display:flex;justify-content:space-between;align-items:center}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{
      width:40px;height:40px;
      background:var(--primary);
      border-radius:var(--radius-md);
      display:flex;align-items:center;justify-content:center;
      font-size:18px;color:#fff;
      transition:var(--transition);
    }
    .logo:hover{transform:scale(1.05);background:var(--primary-dark)}
    .brand-text h1{font-size:18px;font-weight:800;color:#fff;margin-bottom:2px}
    .brand-text .subtitle{font-size:11px;color:var(--gray);font-weight:600}
    .header-stats{display:flex;gap:12px}
    .stat-card{
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      padding:10px 14px;
      background:rgba(255,255,255,.05);
      border-radius:var(--radius-md);
      border:1px solid rgba(255,255,255,.08);
      min-width:90px;
      transition:var(--transition);
    }
    .stat-card:hover{transform:translateY(-1px);background:rgba(255,255,255,.08)}
    .stat-value{font-size:20px;font-weight:800;color:#fff;margin-bottom:2px}
    .stat-label{font-size:10px;color:var(--gray);text-transform:uppercase;letter-spacing:.4px;font-weight:700}

    /* Sidebar */
    .sidebar{
      background:rgba(31,41,55,.8);
      backdrop-filter:blur(12px);
      border-radius:var(--radius-lg);
      padding:16px;
      border:1px solid rgba(255,255,255,.08);
      height:calc(100vh - 120px);
      position:sticky;
      top:20px;
      display:flex;
      flex-direction:column;
    }
    .sidebar-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
    .sidebar-title{
      font-size:14px;font-weight:800;color:var(--gray-light);
      display:flex;align-items:center;gap:8px;
      text-transform:uppercase;letter-spacing:.4px;
    }
    .employee-count{
      background:var(--primary);
      color:#fff;
      font-size:11px;font-weight:800;
      padding:4px 10px;
      border-radius:20px;
    }
    .sidebar-filter-buttons{display:flex;gap:6px;margin-bottom:16px}
    .sidebar-filter-btn{
      padding:8px 10px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius-sm);
      color:var(--gray-light);
      font-size:11px;font-weight:700;
      cursor:pointer;
      transition:var(--transition);
      flex:1;
      text-align:center;
    }
    .sidebar-filter-btn:hover{background:rgba(255,255,255,.08)}
    .sidebar-filter-btn.active{background:var(--primary);color:#fff;border-color:var(--primary)}

    .sidebar-controls{display:flex;flex-direction:column;gap:12px;margin-bottom:16px}
    .search-container{position:relative}
    .search-input{
      width:100%;
      padding:10px 12px 10px 36px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius-md);
      color:#fff;
      font-size:13px;
      transition:var(--transition);
    }
    .search-input::placeholder{color:rgba(255,255,255,.5)}
    .search-input:focus{
      outline:none;
      border-color:var(--primary);
      background:rgba(255,255,255,.08);
      box-shadow:0 0 0 2px rgba(79,70,229,.10);
    }
    .search-icon{
      position:absolute;left:12px;top:50%;
      transform:translateY(-50%);
      color:var(--gray);font-size:13px;
    }

    .employee-list-container{
      flex:1;
      display:flex;
      flex-direction:column;
      margin-bottom:16px;
      min-height:0;
    }
    .employee-list{
      display:flex;
      flex-direction:column;
      gap:12px;
      overflow-y:auto;
      padding-right:4px;
      flex:1;
      min-height:0;
    }
    .employee-list::-webkit-scrollbar{width:6px}
    .employee-list::-webkit-scrollbar-track{background:rgba(255,255,255,.05);border-radius:3px}
    .employee-list::-webkit-scrollbar-thumb{background:var(--primary);border-radius:3px}

    /* Employee Cards (kompakter + Badges h√∂her) */
    .employee-card{
      background:rgba(255,255,255,.03);
      border-radius:var(--radius-md);
      padding:14px;
      border:1px solid rgba(255,255,255,.08);
      cursor:pointer;
      transition:var(--transition);
      position:relative;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      gap:8px;

      min-height:110px;
      justify-content:flex-start;
    }
    .employee-card:hover{
      background:rgba(255,255,255,.05);
      border-color:rgba(79,70,229,.30);
      transform:translateY(-1px);
      box-shadow:var(--shadow-sm);
    }
    .employee-card.active{
      background:rgba(79,70,229,.10);
      border-color:var(--primary);
      box-shadow:0 0 0 1px var(--primary);
    }
    .employee-card::before{
      content:'';
      position:absolute;left:0;top:0;bottom:0;
      width:2px;background:var(--primary);
      opacity:0;transition:var(--transition);
    }
    .employee-card.active::before{opacity:1}

    .employee-top-row{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2px}
    .employee-name{font-weight:800;font-size:15px;color:#fff;line-height:1.3;word-break:break-word}
    .employee-dn{
      font-family:'Inter',monospace;
      font-size:11px;font-weight:800;
      color:var(--primary-light);
      background:rgba(79,70,229,.10);
      padding:2px 7px;
      border-radius:999px;
      border:1px solid rgba(79,70,229,.20);
      white-space:nowrap;
      flex-shrink:0;
      margin-left:8px;
    }
    .employee-meta{
      font-size:11px;color:var(--gray);
      line-height:1.3;
      margin-bottom:4px;
      display:flex;align-items:center;gap:4px;
    }
    .employee-meta i{font-size:10px;opacity:.6}

    .induction-badges{
      display:flex;gap:6px;flex-wrap:wrap;
      margin-top:0;
      padding-top:2px;
    }
    .induction-badge{
      font-size:10px;
      padding:3px 8px;
      border-radius:12px;
      font-weight:700;
      display:flex;align-items:center;gap:4px;
      white-space:nowrap;
      transition:var(--transition);
      border:1px solid transparent;
    }
    .induction-badge:hover{transform:translateY(-1px)}
    .badge-oral.pending{background:rgba(239,68,68,.10);color:#fca5a5;border-color:rgba(239,68,68,.20)}
    .badge-oral.completed{background:rgba(16,185,129,.10);color:#86efac;border-color:rgba(16,185,129,.20)}
    .badge-org.pending{background:rgba(245,158,11,.10);color:#fcd34d;border-color:rgba(245,158,11,.20)}
    .badge-org.completed{background:rgba(16,185,129,.10);color:#86efac;border-color:rgba(16,185,129,.20)}

    .quick-actions{display:grid;grid-template-columns:1fr;gap:8px;margin-top:auto}
    .quick-action-btn{
      padding:10px;
      background:rgba(79,70,229,.08);
      border:1px solid rgba(79,70,229,.15);
      border-radius:var(--radius-md);
      color:var(--primary-light);
      font-size:12px;font-weight:800;
      cursor:pointer;
      transition:var(--transition);
      display:flex;align-items:center;justify-content:center;gap:6px;
    }
    .quick-action-btn:hover{
      background:rgba(79,70,229,.12);
      border-color:var(--primary);
      transform:translateY(-1px);
      color:#fff;
    }

    /* Main Content */
    .main-content{
      background:rgba(31,41,55,.8);
      backdrop-filter:blur(12px);
      border-radius:var(--radius-lg);
      border:1px solid rgba(255,255,255,.08);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height:420px;
    }
    .content-header{
      padding:16px 20px;
      background:rgba(79,70,229,.05);
      border-bottom:1px solid rgba(255,255,255,.08);
      display:none;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
    }
    .employee-info h2{font-size:18px;font-weight:900;color:#fff;margin-bottom:8px}
    .employee-tags{display:flex;gap:12px;flex-wrap:wrap}
    .employee-tag{display:flex;align-items:center;gap:6px;font-size:12px;color:var(--gray);font-weight:700}
    .tag-value{
      color:#fff;
      font-weight:800;
      background:rgba(79,70,229,.10);
      padding:3px 8px;
      border-radius:4px;
      border:1px solid rgba(79,70,229,.20);
      font-size:11px;
    }
    .action-buttons{display:flex;gap:8px;flex-wrap:wrap}

    .btn{
      padding:8px 12px;
      border:none;
      border-radius:var(--radius-md);
      font-weight:800;
      cursor:pointer;
      transition:var(--transition);
      display:inline-flex;align-items:center;justify-content:center;gap:6px;
      font-size:12px;
      user-select:none;
    }
    .btn-primary{background:var(--primary);color:#fff}
    .btn-primary:hover{background:var(--primary-dark);transform:translateY(-1px)}
    .btn-secondary{
      background:rgba(255,255,255,.08);
      color:#fff;
      border:1px solid rgba(255,255,255,.12);
    }
    .btn-secondary:hover{background:rgba(255,255,255,.12);transform:translateY(-1px)}
    .btn-danger{background:var(--danger);color:#fff}
    .btn-danger:hover{background:var(--danger-dark);transform:translateY(-1px)}

    .induction-content{
      padding:20px;
      flex:1;
      overflow-y:auto;
      display:none;
    }

    .induction-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:16px;
      margin-bottom:20px;
    }
    .induction-card{
      background:rgba(255,255,255,.03);
      border-radius:var(--radius-md);
      padding:16px;
      border:1px solid rgba(255,255,255,.08);
      transition:var(--transition);
      position:relative;
    }
    .induction-card.completed{
      border-color:var(--secondary);
      background:rgba(16,185,129,.05);
    }
    .induction-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;gap:10px}
    .induction-title{
      font-size:14px;font-weight:900;color:#fff;
      display:flex;align-items:center;gap:8px;
    }
    .induction-icon{
      width:32px;height:32px;
      background:var(--primary);
      border-radius:var(--radius-md);
      display:flex;align-items:center;justify-content:center;
      font-size:14px;color:#fff;
    }
    .induction-card.completed .induction-icon{background:var(--secondary)}
    .induction-status{
      font-size:11px;font-weight:900;
      padding:4px 8px;border-radius:12px;
      background:rgba(255,255,255,.08);
      color:var(--gray);
      white-space:nowrap;
    }
    .induction-card.completed .induction-status{background:rgba(16,185,129,.15);color:var(--secondary)}

    .oral-form-grid, .org-form-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
      margin-bottom:4px;
    }
    .form-group{display:flex;flex-direction:column;gap:6px}
    .form-label{
      font-weight:900;color:var(--gray-light);
      font-size:11px;text-transform:uppercase;letter-spacing:.4px;
    }
    .form-input,.form-select,.form-textarea{
      padding:8px 10px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius-sm);
      color:#fff;
      font-size:13px;
      transition:var(--transition);
      width:100%;
    }
    .form-input::placeholder,.form-textarea::placeholder{color:rgba(255,255,255,.4)}
    .form-select{
      color:#fff !important;
      background-color:rgba(255,255,255,.05) !important;
      appearance:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='white' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
      background-repeat:no-repeat;
      background-position:right 10px center;
      padding-right:30px;
    }
    .form-input:focus,.form-select:focus,.form-textarea:focus{
      outline:none;
      border-color:var(--primary);
      background:rgba(255,255,255,.08);
      box-shadow:0 0 0 2px rgba(79,70,229,.10);
    }
    .form-textarea{
      resize:vertical;
      min-height:60px;
      font-family:'Inter',sans-serif;
      line-height:1.4;
    }

    .time-container{
      display:grid;
      grid-template-columns:1fr auto 1fr;
      gap:8px;
      align-items:center;
    }
    .time-separator{color:var(--gray);font-weight:700;text-align:center;font-size:12px;padding:0 4px}
    input[type="time"]{font-size:13px;padding:7px 8px}

    /* Toggle */
    .toggle-switch{position:relative;display:inline-block;width:44px;height:24px}
    .toggle-switch input{opacity:0;width:0;height:0}
    .toggle-slider{
      position:absolute;cursor:pointer;inset:0;
      background-color:rgba(255,255,255,.10);
      transition:var(--transition);
      border-radius:34px;
    }
    .toggle-slider:before{
      position:absolute;content:"";
      height:16px;width:16px;left:4px;bottom:4px;
      background-color:#fff;
      transition:var(--transition);
      border-radius:50%;
    }
    input:checked + .toggle-slider{background-color:var(--secondary)}
    input:checked + .toggle-slider:before{transform:translateX(20px)}

    /* Templates */
    .templates-section{
      background:rgba(255,255,255,.03);
      border-radius:var(--radius-md);
      padding:16px;
      border:1px solid rgba(255,255,255,.08);
    }
    .section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;gap:10px;flex-wrap:wrap}
    .section-title{
      font-size:14px;font-weight:900;color:#fff;
      display:flex;align-items:center;gap:8px;
    }
    .template-actions{display:flex;gap:8px;flex-wrap:wrap}

    /* WICHTIG: Vorlagen untereinander (immer) */
    .template-cards{
      display:grid;
      grid-template-columns:1fr; /* <- war 1fr 1fr */
      gap:16px;
    }

    .template-card{
      background:rgba(0,0,0,.20);
      border-radius:var(--radius-md);
      padding:16px;
      border:1px solid rgba(255,255,255,.08);
    }
    .template-card.completed{border-color:var(--secondary)}
    .template-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;gap:10px}
    .template-card-title{
      font-size:13px;font-weight:900;color:#fff;
      display:flex;align-items:center;gap:6px;
    }
    .template-badge{
      font-size:10px;font-weight:900;
      padding:3px 8px;border-radius:12px;
      background:rgba(79,70,229,.10);
      color:var(--primary-light);
      white-space:nowrap;
    }
    .template-content{
      font-family:Consolas,Monaco,monospace;
      background:rgba(0,0,0,.30);
      padding:12px;
      border-radius:var(--radius-sm);
      border-left:2px solid var(--primary);
      overflow-x:auto;
      white-space:pre-wrap;
      word-wrap:break-word;
      font-size:11px;
      line-height:1.4;
      color:var(--gray-light);
      max-height:180px;
      overflow-y:auto;
    }
    .template-card.completed .template-content{border-left-color:var(--secondary)}

    /* Beobachtungs Akten Modal */
    .beobachtung-akten-modal{
      display:none;
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.85);
      backdrop-filter:blur(4px);
      z-index:2000;
      align-items:center;
      justify-content:center;
      padding:20px;
      animation:fadeIn .2s ease;
    }
    .beobachtung-akten-modal.active{display:flex}
    
    .beobachtung-akten-content{
      background:rgba(31,41,55,.95);
      border-radius:var(--radius-lg);
      padding:24px;
      width:100%;
      max-width:800px;
      max-height:90vh;
      border:1px solid rgba(255,255,255,.15);
      box-shadow:var(--shadow-lg);
      animation:slideUp .2s ease;
      display:flex;
      flex-direction:column;
    }
    
    .beobachtung-akten-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:24px;
      padding-bottom:16px;
      border-bottom:1px solid rgba(255,255,255,.1);
      flex-shrink:0;
    }
    
    .beobachtung-akten-title{
      font-size:18px;
      font-weight:900;
      color:#fff;
      display:flex;
      align-items:center;
      gap:10px;
    }
    
    .beobachtung-akten-title i{
      color:var(--primary-light);
      font-size:20px;
    }
    
    .beobachtung-akten-close{
      background:none;
      border:none;
      color:var(--gray);
      font-size:20px;
      cursor:pointer;
      transition:var(--transition);
      width:32px;
      height:32px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:50%;
    }
    
    .beobachtung-akten-close:hover{
      color:#fff;
      background:rgba(255,255,255,.1);
    }
    
    .beobachtung-akten-body{
      flex:1;
      overflow:hidden;
      display:flex;
      flex-direction:column;
    }
    
    .beobachtung-tabs{
      display:flex;
      gap:2px;
      margin-bottom:16px;
      border-bottom:1px solid rgba(255,255,255,.1);
      flex-shrink:0;
    }
    
    .beobachtung-tab{
      padding:12px 20px;
      background:none;
      border:none;
      color:var(--gray);
      font-weight:900;
      cursor:pointer;
      transition:var(--transition);
      font-size:13px;
      position:relative;
    }
    
    .beobachtung-tab:hover{
      color:var(--primary-light);
    }
    
    .beobachtung-tab.active{
      color:var(--primary);
    }
    
    .beobachtung-tab.active::after{
      content:'';
      position:absolute;
      bottom:-1px;
      left:0;
      right:0;
      height:2px;
      background:var(--primary);
    }
    
    .beobachtung-form{
      display:flex;
      flex-direction:column;
      gap:20px;
      padding-bottom:20px;
      border-bottom:1px solid rgba(255,255,255,.1);
      margin-bottom:20px;
    }
    
    .beobachtung-form-group{
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    
    .beobachtung-label{
      font-weight:900;
      color:var(--gray-light);
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:.5px;
    }
    
    .beobachtung-input{
      padding:12px 16px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.1);
      border-radius:var(--radius-md);
      color:#fff;
      font-size:14px;
      transition:var(--transition);
      width:100%;
      font-family:'Inter',sans-serif;
    }
    
    .beobachtung-input:focus{
      outline:none;
      border-color:var(--primary);
      background:rgba(255,255,255,.08);
      box-shadow:0 0 0 3px rgba(79,70,229,.15);
    }
    
    .beobachtung-textarea{
      min-height:120px;
      resize:vertical;
      line-height:1.5;
    }
    
    .beobachtung-preview{
      background:rgba(0,0,0,.3);
      border-radius:var(--radius-md);
      padding:20px;
      border-left:3px solid var(--primary);
      margin-top:10px;
    }
    
    .beobachtung-preview-title{
      font-weight:900;
      color:var(--gray-light);
      margin-bottom:12px;
      font-size:13px;
      display:flex;
      align-items:center;
      gap:6px;
    }
    
    .beobachtung-preview-content{
      font-family:'Consolas','Monaco',monospace;
      white-space:pre-wrap;
      word-wrap:break-word;
      font-size:12px;
      line-height:1.4;
      color:#fff;
      background:rgba(0,0,0,.2);
      padding:16px;
      border-radius:var(--radius-sm);
      max-height:200px;
      overflow-y:auto;
    }
    
    .beobachtung-akten-liste{
      flex:1;
      overflow-y:auto;
      padding-right:4px;
    }
    
    .beobachtung-akten-liste::-webkit-scrollbar{
      width:6px;
    }
    
    .beobachtung-akten-liste::-webkit-scrollbar-track{
      background:rgba(255,255,255,.05);
      border-radius:3px;
    }
    
    .beobachtung-akten-liste::-webkit-scrollbar-thumb{
      background:var(--primary);
      border-radius:3px;
    }
    
    .beobachtung-akte-item{
      background:rgba(255,255,255,.03);
      border-radius:var(--radius-md);
      padding:16px;
      border:1px solid rgba(255,255,255,.08);
      margin-bottom:12px;
      transition:var(--transition);
    }
    
    .beobachtung-akte-item:hover{
      background:rgba(255,255,255,.05);
      border-color:var(--primary-light);
    }
    
    .beobachtung-akte-header{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      margin-bottom:12px;
    }
    
    .beobachtung-akte-name{
      font-weight:900;
      color:#fff;
      font-size:15px;
    }
    
    .beobachtung-akte-dn{
      font-family:'Inter',monospace;
      background:rgba(79,70,229,.10);
      color:var(--primary-light);
      padding:4px 10px;
      border-radius:12px;
      font-size:11px;
      font-weight:900;
      border:1px solid rgba(79,70,229,.20);
    }
    
    .beobachtung-akte-date{
      color:var(--gray);
      font-size:11px;
      margin-bottom:8px;
      display:flex;
      align-items:center;
      gap:4px;
    }
    
    .beobachtung-akte-grund{
      color:var(--gray-light);
      font-size:13px;
      line-height:1.5;
      margin-bottom:12px;
      padding:12px;
      background:rgba(0,0,0,.2);
      border-radius:var(--radius-sm);
      border-left:2px solid var(--primary);
    }
    
    .beobachtung-akte-template{
      font-family:'Consolas','Monaco',monospace;
      white-space:pre-wrap;
      word-wrap:break-word;
      font-size:11px;
      line-height:1.4;
      color:var(--gray-light);
      background:rgba(0,0,0,.3);
      padding:12px;
      border-radius:var(--radius-sm);
      border:1px solid rgba(255,255,255,.08);
      max-height:150px;
      overflow-y:auto;
      margin-bottom:12px;
    }
    
    .beobachtung-akte-actions{
      display:flex;
      gap:8px;
      justify-content:flex-end;
    }
    
    .beobachtung-akte-btn{
      padding:6px 12px;
      border:none;
      border-radius:var(--radius-sm);
      font-weight:900;
      cursor:pointer;
      transition:var(--transition);
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:6px;
      font-size:11px;
    }
    
    .beobachtung-akte-btn-copy{
      background:rgba(79,70,229,.15);
      color:var(--primary-light);
      border:1px solid rgba(79,70,229,.25);
    }
    
    .beobachtung-akte-btn-copy:hover{
      background:rgba(79,70,229,.25);
    }
    
    .beobachtung-akte-btn-delete{
      background:rgba(239,68,68,.15);
      color:#fca5a5;
      border:1px solid rgba(239,68,68,.25);
    }
    
    .beobachtung-akte-btn-delete:hover{
      background:rgba(239,68,68,.25);
    }
    
    .empty-beobachtungen{
      text-align:center;
      padding:40px 20px;
      color:var(--gray);
    }
    
    .empty-beobachtungen-icon{
      font-size:36px;
      margin-bottom:12px;
      opacity:.3;
    }
    
    .empty-beobachtungen-title{
      font-size:14px;
      font-weight:900;
      margin-bottom:6px;
      color:var(--gray-light);
    }
    
    .beobachtung-actions{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      margin-top:10px;
      padding-top:20px;
      border-top:1px solid rgba(255,255,255,.1);
      flex-shrink:0;
    }
    
    .beobachtung-btn{
      padding:10px 20px;
      border:none;
      border-radius:var(--radius-md);
      font-weight:900;
      cursor:pointer;
      transition:var(--transition);
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      font-size:13px;
    }
    
    .beobachtung-btn-copy{
      background:var(--primary);
      color:#fff;
    }
    
    .beobachtung-btn-copy:hover{
      background:var(--primary-dark);
      transform:translateY(-1px);
    }
    
    .beobachtung-btn-save{
      background:var(--secondary);
      color:#fff;
    }
    
    .beobachtung-btn-save:hover{
      background:var(--secondary-dark);
      transform:translateY(-1px);
    }
    
    .beobachtung-floating-btn{
      position:fixed;
      bottom:20px;
      right:20px;
      width:56px;
      height:56px;
      background:var(--primary);
      border:none;
      border-radius:50%;
      color:#fff;
      font-size:20px;
      cursor:pointer;
      box-shadow:var(--shadow-lg);
      z-index:1000;
      transition:var(--transition);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    
    .beobachtung-floating-btn:hover{
      background:var(--primary-dark);
      transform:scale(1.1);
      box-shadow:0 10px 25px rgba(79,70,229,.3);
    }

    /* Modals */
    .modal-overlay{
      display:none;
      position:fixed;inset:0;
      background:rgba(0,0,0,.80);
      backdrop-filter:blur(4px);
      z-index:1000;
      align-items:center;
      justify-content:center;
      padding:16px;
      animation:fadeIn .2s ease;
    }
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    .modal-overlay.active{display:flex}
    .modal{
      background:rgba(31,41,55,.95);
      border-radius:var(--radius-lg);
      padding:20px;
      width:100%;
      max-width:500px;
      border:1px solid rgba(255,255,255,.12);
      box-shadow:var(--shadow-lg);
      animation:slideUp .2s ease;
    }
    @keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
    .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;gap:10px}
    .modal-title{
      font-size:16px;font-weight:900;color:#fff;
      display:flex;align-items:center;gap:8px;
    }
    .modal-close{
      background:none;border:none;color:var(--gray);
      font-size:18px;cursor:pointer;
      transition:var(--transition);
      width:28px;height:28px;
      display:flex;align-items:center;justify-content:center;
      border-radius:50%;
    }
    .modal-close:hover{color:#fff;background:rgba(255,255,255,.10)}

    /* Empty / Loading */
    .empty-state{text-align:center;padding:40px 20px;color:var(--gray);width:100%}
    .empty-icon{font-size:36px;margin-bottom:12px;opacity:.3}
    .empty-title{font-size:14px;font-weight:900;margin-bottom:6px;color:var(--gray-light)}
    .empty-description{font-size:12px;color:var(--gray);max-width:250px;margin:0 auto 12px}

    .loading{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;width:100%}
    .loading-spinner{
      width:32px;height:32px;
      border:2px solid rgba(255,255,255,.10);
      border-top-color:var(--primary);
      border-radius:50%;
      animation:spin 1s linear infinite;
      margin-bottom:12px;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Notification */
    .notification{
      position:fixed;
      bottom:16px;right:16px;
      background:var(--secondary);
      color:#fff;
      padding:10px 14px;
      border-radius:var(--radius-md);
      box-shadow:var(--shadow-md);
      display:flex;align-items:center;gap:8px;
      z-index:1001;
      transform:translateY(100px);
      opacity:0;
      transition:transform .2s ease, opacity .2s ease;
      min-width:200px;
    }
    .notification.show{transform:translateY(0);opacity:1}
    .notification-icon{font-size:14px}
    .notification-message{font-weight:900;font-size:13px}

    /* Responsive */
    @media (max-width:1200px){
      .app-container{grid-template-columns:1fr;padding:16px;gap:16px}
      .sidebar{position:static;max-height:500px;height:auto}
      .induction-grid{grid-template-columns:1fr}
      /* template-cards bleibt 1fr */
    }
    @media (max-width:768px){
      .app-header{padding:14px 16px}
      .header-content{flex-direction:column;gap:12px;align-items:stretch}
      .header-stats{justify-content:center}
      .brand{gap:10px}
      .logo{width:36px;height:36px;font-size:16px}
      .brand-text h1{font-size:16px}
      .brand-text .subtitle{font-size:10px}
      .content-header{flex-direction:column;align-items:stretch;padding:14px}
      .employee-tags{flex-direction:column;gap:6px}
      .induction-content{padding:16px}
      .oral-form-grid,.org-form-grid{grid-template-columns:1fr}
      .beobachtung-akten-modal{padding:12px}
      .beobachtung-akten-content{padding:20px}
      .beobachtung-actions{flex-direction:column;align-items:stretch}
      .beobachtung-floating-btn{bottom:16px;right:16px}
      .beobachtung-tabs{flex-direction:column}
      .beobachtung-tab{text-align:left;padding:10px 16px}
    }
    @media (max-width:480px){
      .app-container{padding:12px}
      .app-header{padding:12px}
      .stat-card{padding:8px 10px;min-width:70px}
      .stat-value{font-size:18px}
      .sidebar{padding:14px}
      .modal{padding:16px;margin:12px}
      .notification{left:12px;right:12px;bottom:12px;min-width:auto}
      .beobachtung-akten-content{padding:16px}
      .beobachtung-akte-actions{flex-direction:column}
    }
  </style>
</head>

<body>
  <div class="bg-effects"><div class="bg-gradient"></div></div>

  <!-- Floating Button f√ºr Beobachtung -->
  <button class="beobachtung-floating-btn" onclick="openBeobachtungAktenModal()">
    <i class="fas fa-eye"></i>
  </button>

  <!-- Beobachtungs Akten Modal -->
  <div class="beobachtung-akten-modal" id="beobachtungAktenModal" onclick="if(event.target===this)closeBeobachtungAktenModal()">
    <div class="beobachtung-akten-content">
      <div class="beobachtung-akten-header">
        <div class="beobachtung-akten-title">
          <i class="fas fa-folder-open"></i> Beobachtungs-Akten
        </div>
        <button class="beobachtung-akten-close" onclick="closeBeobachtungAktenModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="beobachtung-akten-body">
        <div class="beobachtung-tabs">
          <button class="beobachtung-tab active" onclick="switchBeobachtungTab('new')">Neue Beobachtung</button>
          <button class="beobachtung-tab" onclick="switchBeobachtungTab('list')">Alle Beobachtungen</button>
          <button class="beobachtung-tab" onclick="switchBeobachtungTab('person')">Nach Personen</button>
        </div>
        
        <!-- Neue Beobachtung Tab -->
        <div class="beobachtung-tab-content" id="beobachtungNewTab">
          <div class="beobachtung-form">
            <div class="beobachtung-form-group">
              <label class="beobachtung-label">Name</label>
              <input type="text" class="beobachtung-input" id="beobachtungName" placeholder="Name des Mitarbeiters">
            </div>
            
            <div class="beobachtung-form-group">
              <label class="beobachtung-label">Dienstnummer (DN)</label>
              <input type="number" class="beobachtung-input" id="beobachtungDN" placeholder="z.B. 43">
            </div>
            
            <div class="beobachtung-form-group">
              <label class="beobachtung-label">Grund der Beobachtung</label>
              <textarea class="beobachtung-input beobachtung-textarea" id="beobachtungGrund" placeholder="Beschreiben Sie den Grund der Beobachtung..."></textarea>
            </div>
            
            <div class="beobachtung-preview">
              <div class="beobachtung-preview-title">
                <i class="fas fa-file-alt"></i> Vorschau
              </div>
              <div class="beobachtung-preview-content" id="beobachtungPreview">
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
/////////////////////////////////////////////////////////////////////////
Beobachtung
Name: 
DN:  
Grund:
/////////////////////////////////////////////////////////////////////////
<@&1097625910242447422>
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
              </div>
            </div>
          </div>
          
          <div class="beobachtung-actions">
            <button class="beobachtung-btn beobachtung-btn-copy" onclick="copyBeobachtungTemplate()">
              <i class="fas fa-copy"></i> In Zwischenablage kopieren
            </button>
            <button class="beobachtung-btn beobachtung-btn-save" onclick="saveBeobachtung()">
              <i class="fas fa-save"></i> Beobachtung speichern
            </button>
          </div>
        </div>
        
        <!-- Alle Beobachtungen Tab -->
        <div class="beobachtung-tab-content" id="beobachtungListTab" style="display:none;">
          <div class="beobachtung-akten-liste" id="beobachtungListe">
            <div class="empty-beobachtungen">
              <div class="empty-beobachtungen-icon"><i class="fas fa-folder-open"></i></div>
              <div class="empty-beobachtungen-title">Keine Beobachtungen</div>
              <div class="empty-description">Erstellen Sie Ihre erste Beobachtung</div>
            </div>
          </div>
        </div>
        
        <!-- Nach Personen Tab -->
        <div class="beobachtung-tab-content" id="beobachtungPersonTab" style="display:none;">
          <div class="beobachtung-akten-liste" id="beobachtungPersonListe">
            <div class="empty-beobachtungen">
              <div class="empty-beobachtungen-icon"><i class="fas fa-users"></i></div>
              <div class="empty-beobachtungen-title">Keine Personen mit Beobachtungen</div>
              <div class="empty-description">Erstellen Sie Beobachtungen f√ºr Mitarbeiter</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="notification" id="notification">
    <i class="fas fa-check notification-icon"></i>
    <span class="notification-message" id="notificationMessage"></span>
  </div>

  <div class="app-container">
    <header class="app-header">
      <div class="header-content">
        <div class="brand">
          <div class="logo"><i class="fas fa-user-check"></i></div>
          <div class="brand-text">
            <h1>Human Resources</h1>
            <div class="subtitle">M√ºndliche & Organisatorische Einweisungen ‚Ä¢ HR</div>
          </div>
        </div>
        <div class="header-stats">
          <div class="stat-card">
            <div class="stat-value" id="totalEmployees">0</div>
            <div class="stat-label">Mitarbeiter</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="totalBeobachtungen">0</div>
            <div class="stat-label">Beobachtungen</div>
          </div>
        </div>
      </div>
    </header>

    <aside class="sidebar">
      <div class="sidebar-header">
        <h3 class="sidebar-title"><i class="fas fa-users"></i> Mitarbeiter</h3>
        <div class="employee-count" id="employeeCount">0</div>
      </div>

      <div class="sidebar-controls">
        <div class="sidebar-filter-buttons">
          <button class="sidebar-filter-btn active" onclick="filterEmployeesByType('all')">Alle</button>
          <button class="sidebar-filter-btn" onclick="filterEmployeesByType('oral')">M√ºndlich</button>
          <button class="sidebar-filter-btn" onclick="filterEmployeesByType('org')">Organisatorische</button>
        </div>

        <div class="search-container">
          <i class="fas fa-search search-icon"></i>
          <input type="text" class="search-input" id="searchEmployees" placeholder="Nach Namen oder DN suchen...">
        </div>
      </div>

      <div class="employee-list-container">
        <div class="employee-list" id="employeeList">
          <div class="empty-state">
            <div class="empty-icon"><i class="fas fa-user-plus"></i></div>
            <div class="empty-title">Keine Mitarbeiter</div>
            <div class="empty-description">F√ºgen Sie Ihren ersten Mitarbeiter hinzu</div>
          </div>
        </div>
      </div>

      <div class="quick-actions">
        <button class="quick-action-btn" onclick="openNewEmployeeModal()">
          <i class="fas fa-user-plus"></i> Neuer Mitarbeiter
        </button>
      </div>
    </aside>

    <main class="main-content">
      <div class="content-header" id="employeeHeader">
        <div class="employee-info">
          <h2 id="currentEmployeeName">W√§hlen Sie einen Mitarbeiter</h2>
          <div class="employee-tags">
            <div class="employee-tag"><i class="fas fa-hashtag"></i> <span class="tag-value" id="currentEmployeeDN">DN-</span></div>
            <div class="employee-tag"><i class="fas fa-building"></i> <span class="tag-value" id="currentEmployeeUnit">Unit</span></div>
            <div class="employee-tag"><i class="fas fa-user-tie"></i> <span class="tag-value" id="currentEmployeeRank">Rang</span></div>
          </div>
        </div>
        <div class="action-buttons">
          <button class="btn btn-secondary" onclick="openEditEmployeeModal()"><i class="fas fa-edit"></i> Bearbeiten</button>
          <button class="btn btn-secondary" onclick="openBeobachtungAktenModalForCurrentEmployee()"><i class="fas fa-eye"></i> Beobachtungen</button>
        </div>
      </div>

      <div class="induction-content" id="inductionContent">
        <div class="induction-grid">
          <div class="induction-card" id="oralInductionCard">
            <div class="induction-card-header">
              <div class="induction-title">
                <div class="induction-icon"><i class="fas fa-comments"></i></div>
                M√ºndliche Einweisung
              </div>
              <div class="induction-status" id="oralInductionStatus">AUSSTEHEND</div>
            </div>

            <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;">
              <label style="font-weight:800;color:var(--gray);font-size:12px;">Bestanden:</label>
              <label class="toggle-switch">
                <input type="checkbox" id="oralInductionToggle" onchange="toggleInduction('oral', this.checked)">
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="oral-form-grid">
              <div class="form-group">
                <label class="form-label">Pr√ºfer</label>
                <input type="text" class="form-input" id="oralExaminer" placeholder="Name des Pr√ºfers">
              </div>
              <div class="form-group">
                <label class="form-label">Datum</label>
                <input type="date" class="form-input" id="oralDate">
              </div>
              <div class="form-group">
                <label class="form-label">Uhrzeit</label>
                <div class="time-container">
                  <input type="time" class="form-input" id="oralTimeStart">
                  <div class="time-separator">bis</div>
                  <input type="time" class="form-input" id="oralTimeEnd">
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">Beteiligte Person</label>
                <input type="text" class="form-input" id="oralPerson" placeholder="Name der beteiligten Person">
              </div>
              <div class="form-group">
                <label class="form-label">Unit</label>
                <select class="form-select" id="unitSelect">
                  <option value="">Unit ausw√§hlen</option>
                  <option value="Air Force">Air Force</option>
                  <option value="S.O.C">S.O.C</option>
                  <option value="Infantry">Infantry</option>
                  <option value="Military Police">Military Police</option>
                  <option value="Navy Marine">Navy Marine</option>
                  <option value="Navy SEALs">Navy SEALs</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Rang</label>
                <select class="form-select" id="rankSelect">
                  <option value="">Rang ausw√§hlen</option>
                  <option value="Private">Private</option>
                  <option value="Private First Class">Private First Class</option>
                  <option value="Specialist">Specialist</option>
                  <option value="Corporal">Corporal</option>
                  <option value="Sergeant">Sergeant</option>
                  <option value="Staff Sergeant">Staff Sergeant</option>
                  <option value="Sergeant First Class">Sergeant First Class</option>
                  <option value="Master Sergeant">Master Sergeant</option>
                  <option value="Sergeant Major">Sergeant Major</option>
                  <option value="Lieutenant">Lieutenant</option>
                  <option value="Captain">Captain</option>
                  <option value="Major">Major</option>
                  <option value="Colonel">Colonel</option>
                  <option value="Major General">Major General</option>
                  <option value="Lieutenant General">Lieutenant General</option>
                  <option value="Vice General of Army">Vice General of Army</option>
                  <option value="General of Army">General of Army</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Sonstige Bemerkungen</label>
                <textarea class="form-textarea" id="oralNotes" placeholder="Weitere Informationen..."></textarea>
              </div>
            </div>
          </div>

          <div class="induction-card" id="orgInductionCard">
            <div class="induction-card-header">
              <div class="induction-title">
                <div class="induction-icon"><i class="fas fa-clipboard-list"></i></div>
                Organisatorische Einweisung
              </div>
              <div class="induction-status" id="orgInductionStatus">AUSSTEHEND</div>
            </div>

            <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;">
              <label style="font-weight:800;color:var(--gray);font-size:12px;">Bestanden:</label>
              <label class="toggle-switch">
                <input type="checkbox" id="orgInductionToggle" onchange="toggleInduction('org', this.checked)">
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="org-form-grid">
              <div class="form-group">
                <label class="form-label">Pr√ºfer</label>
                <input type="text" class="form-input" id="orgExaminer" placeholder="Name des Pr√ºfers">
              </div>
              <div class="form-group">
                <label class="form-label">Datum</label>
                <input type="date" class="form-input" id="orgDate">
              </div>
              <div class="form-group">
                <label class="form-label">Uhrzeit</label>
                <div class="time-container">
                  <input type="time" class="form-input" id="orgTimeStart">
                  <div class="time-separator">-</div>
                  <input type="time" class="form-input" id="orgTimeEnd">
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">Beteiligte Person</label>
                <input type="text" class="form-input" id="orgPerson" placeholder="Name der beteiligten Person">
              </div>
              <div class="form-group">
                <label class="form-label">Unit</label>
                <select class="form-select" id="unitSelect2">
                  <option value="">Unit ausw√§hlen</option>
                  <option value="Air Force">Air Force</option>
                  <option value="S.O.C">S.O.C</option>
                  <option value="Infantry">Infantry</option>
                  <option value="Military Police">Military Police</option>
                  <option value="Navy Marine">Navy Marine</option>
                  <option value="Navy SEALs">Navy SEALs</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Rang</label>
                <select class="form-select" id="rankSelect2">
                  <option value="">Rang ausw√§hlen</option>
                  <option value="Private">Private</option>
                  <option value="Private First Class">Private First Class</option>
                  <option value="Specialist">Specialist</option>
                  <option value="Corporal">Corporal</option>
                  <option value="Sergeant">Sergeant</option>
                  <option value="Staff Sergeant">Staff Sergeant</option>
                  <option value="Sergeant First Class">Sergeant First Class</option>
                  <option value="Master Sergeant">Master Sergeant</option>
                  <option value="Sergeant Major">Sergeant Major</option>
                  <option value="Lieutenant">Lieutenant</option>
                  <option value="Captain">Captain</option>
                  <option value="Major">Major</option>
                  <option value="Colonel">Colonel</option>
                  <option value="Major General">Major General</option>
                  <option value="Lieutenant General">Lieutenant General</option>
                  <option value="Vice General of Army">Vice General of Army</option>
                  <option value="General of Army">General of Army</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Sonstige Bemerkungen</label>
                <textarea class="form-textarea" id="orgNotes" placeholder="Weitere Informationen..."></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="templates-section">
          <div class="section-header">
            <div class="section-title"><i class="fas fa-file-code"></i> Discord Vorlagen</div>
            <div class="template-actions">
              <button class="btn btn-secondary" onclick="copyOralTemplate()"><i class="fas fa-comments"></i> M√ºndlich</button>
              <button class="btn btn-secondary" onclick="copyOrgTemplate()"><i class="fas fa-clipboard-list"></i> Organisatorisch</button>
            </div>
          </div>

          <div class="template-cards">
            <div class="template-card" id="oralTemplateCard">
              <div class="template-card-header">
                <div class="template-card-title"><i class="fas fa-comments"></i> M√ºndliche Einweisung</div>
                <div class="template-badge" id="oralTemplateBadge">AUSSTEHEND</div>
              </div>
              <div class="template-content" id="oralTemplateContent"></div>
            </div>

            <div class="template-card" id="orgTemplateCard">
              <div class="template-card-header">
                <div class="template-card-title"><i class="fas fa-clipboard-list"></i> Organisatorische Einweisung</div>
                <div class="template-badge" id="orgTemplateBadge">AUSSTEHEND</div>
              </div>
              <div class="template-content" id="orgTemplateContent"></div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- New Employee Modal -->
  <div class="modal-overlay" id="newEmployeeModal" onclick="if(event.target===this)closeModal('newEmployeeModal')">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title"><i class="fas fa-user-plus"></i> Neuen Mitarbeiter hinzuf√ºgen</div>
        <button class="modal-close" onclick="closeModal('newEmployeeModal')"><i class="fas fa-times"></i></button>
      </div>

      <div class="form-grid-new" style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;">
        <div class="form-group">
          <label class="form-label">Vollst√§ndiger Name *</label>
          <input type="text" class="form-input" id="newEmployeeName" placeholder="z.B. Max Fiart">
        </div>
        <div class="form-group">
          <label class="form-label">Dienstnummer (DN) *</label>
          <input type="number" class="form-input" id="newEmployeeDN" placeholder="z.B. 43" min="1" max="9999">
        </div>
        <div class="form-group">
          <label class="form-label">Unit</label>
          <select class="form-select" id="newEmployeeUnit">
            <option value="">Unit ausw√§hlen</option>
            <option value="Air Force">Air Force</option>
            <option value="S.O.C">S.O.C</option>
            <option value="Infantry">Infantry</option>
            <option value="Military Police">Military Police</option>
            <option value="Navy Marine">Navy Marine</option>
            <option value="Navy SEALs">Navy SEALs</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Rang</label>
          <select class="form-select" id="newEmployeeRank">
            <option value="">Rang ausw√§hlen</option>
            <option value="Private">Private</option>
            <option value="Private First Class">Private First Class</option>
            <option value="Specialist">Specialist</option>
            <option value="Corporal">Corporal</option>
            <option value="Sergeant">Sergeant</option>
            <option value="Staff Sergeant">Staff Sergeant</option>
            <option value="Sergeant First Class">Sergeant First Class</option>
            <option value="Master Sergeant">Master Sergeant</option>
            <option value="Sergeant Major">Sergeant Major</option>
            <option value="Lieutenant">Lieutenant</option>
            <option value="Captain">Captain</option>
            <option value="Major">Major</option>
            <option value="Colonel">Colonel</option>
            <option value="Major General">Major General</option>
            <option value="Lieutenant General">Lieutenant General</option>
            <option value="Vice General of Army">Vice General of Army</option>
            <option value="General of Army">General of Army</option>
          </select>
        </div>
      </div>

      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:16px;">
        <button class="btn btn-secondary" onclick="closeModal('newEmployeeModal')">Abbrechen</button>
        <button class="btn btn-primary" onclick="createNewEmployee()"><i class="fas fa-plus"></i> Erstellen</button>
      </div>
    </div>
  </div>

  <!-- Edit Employee Modal -->
  <div class="modal-overlay" id="editEmployeeModal" onclick="if(event.target===this)closeModal('editEmployeeModal')">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title"><i class="fas fa-edit"></i> Mitarbeiter bearbeiten</div>
        <button class="modal-close" onclick="closeModal('editEmployeeModal')"><i class="fas fa-times"></i></button>
      </div>

      <div class="form-grid-new" style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;">
        <div class="form-group">
          <label class="form-label">Vollst√§ndiger Name *</label>
          <input type="text" class="form-input" id="editEmployeeName" placeholder="z.B. Max Fiart">
        </div>
        <div class="form-group">
          <label class="form-label">Dienstnummer (DN) *</label>
          <input type="number" class="form-input" id="editEmployeeDN" placeholder="z.B. 43" min="1" max="9999">
        </div>
        <div class="form-group">
          <label class="form-label">Unit</label>
          <select class="form-select" id="editEmployeeUnit">
            <option value="">Unit ausw√§hlen</option>
            <option value="Air Force">Air Force</option>
            <option value="S.O.C">S.O.C</option>
            <option value="Infantry">Infantry</option>
            <option value="Military Police">Military Police</option>
            <option value="Navy Marine">Navy Marine</option>
            <option value="Navy SEALs">Navy SEALs</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Rang</label>
          <select class="form-select" id="editEmployeeRank">
            <option value="">Rang ausw√§hlen</option>
            <option value="Private">Private</option>
            <option value="Private First Class">Private First Class</option>
            <option value="Specialist">Specialist</option>
            <option value="Corporal">Corporal</option>
            <option value="Sergeant">Sergeant</option>
            <option value="Staff Sergeant">Staff Sergeant</option>
            <option value="Sergeant First Class">Sergeant First Class</option>
            <option value="Master Sergeant">Master Sergeant</option>
            <option value="Sergeant Major">Sergeant Major</option>
            <option value="Lieutenant">Lieutenant</option>
            <option value="Captain">Captain</option>
            <option value="Major">Major</option>
            <option value="Colonel">Colonel</option>
            <option value="Major General">Major General</option>
            <option value="Lieutenant General">Lieutenant General</option>
            <option value="Vice General of Army">Vice General of Army</option>
            <option value="General of Army">General of Army</option>
          </select>
        </div>
      </div>

      <div style="display:flex;justify-content:space-between;align-items:center;gap:8px;margin-top:16px;">
        <button class="btn btn-danger" onclick="deleteCurrentEmployee()" style="margin-right:auto;"><i class="fas fa-trash"></i> L√∂schen</button>
        <div style="display:flex;gap:8px;">
          <button class="btn btn-secondary" onclick="closeModal('editEmployeeModal')">Abbrechen</button>
          <button class="btn btn-primary" onclick="saveEditedEmployee()"><i class="fas fa-save"></i> √Ñnderungen speichern</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBTnsLNw68UuOd5Xa2ymMffWk4SYGDQjso",
      authDomain: "cc-shop-finanzsystem.firebaseapp.com",
      projectId: "cc-shop-finanzsystem",
      storageBucket: "cc-shop-finanzsystem.firebasestorage.app",
      messagingSenderId: "575918945925",
      appId: "1:575918945925:web:bf9d973d5cd9fc547e5bec",
      measurementId: "G-9SZREFTJS6"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Discord IDs for Units
    const unitDiscordIds = {
      "Air Force": "1269229762400878675",
      "S.O.C": "1339523576159666218",
      "Infantry": "1187756956425920645",
      "Military Police": "1289716541658497055",
      "Navy Marine": "1097653037968920776",
      "Navy SEALs": "1125174901989445693"
    };

    // Discord IDs for Ranks
    const rankDiscordIds = {
      "Private": "1097625924104626198",
      "Private First Class": "1098190829295771739",
      "Specialist": "1097625921516748830",
      "Corporal": "1097625914763919532",
      "Sergeant": "1097625913274933298",
      "Staff Sergeant": "1097625912163451112",
      "Sergeant First Class": "1348414845862674524",
      "Master Sergeant": "1348414845862674524",
      "Sergeant Major": "",
      "Lieutenant": "1097625900125782278",
      "Captain": "1097625898880077955",
      "Major": "1097625896560640024",
      "Colonel": "1097625895541428275",
      "Major General": "1097625893880479777",
      "Lieutenant General": "",
      "Vice General of Army": "",
      "General of Army": "1097625891632316436"
    };

    // App State
    let currentEmployee = null;
    let employees = [];
    let bothInductionsCompleted = false;
    let currentFilter = 'all';
    let beobachtungen = [];
    let currentBeobachtungTab = 'new';

    document.addEventListener('DOMContentLoaded', function () {
      initializeApp();
      setupEventListeners();
      updateStats();
      adjustSidebarHeight();
      loadBeobachtungen();
    });

    function initializeApp() {
      const today = new Date().toISOString().split('T')[0];
      document.getElementById('oralDate').value = today;
      document.getElementById('orgDate').value = today;

      document.getElementById('oralTimeStart').value = '16:40';
      document.getElementById('oralTimeEnd').value = '18:00';
      document.getElementById('orgTimeStart').value = '22:10';
      document.getElementById('orgTimeEnd').value = '23:05';

      loadEmployees();
      setupFormChangeListeners();
      seedTemplateBoxes();
      setupBeobachtungEventListeners();
    }

    function setupEventListeners() {
      document.getElementById('searchEmployees').addEventListener('input', function (e) {
        filterEmployees(e.target.value);
      });

      document.addEventListener('keydown', function (e) {
        if (e.ctrlKey && e.key === 'n') { e.preventDefault(); openNewEmployeeModal(); }
        if (e.ctrlKey && e.key === 'f') { e.preventDefault(); document.getElementById('searchEmployees').focus(); }
        if (e.ctrlKey && e.key === 'e' && currentEmployee) { e.preventDefault(); openEditEmployeeModal(); }
        if (e.ctrlKey && e.key === 'b') { e.preventDefault(); openBeobachtungAktenModal(); }
      });

      window.addEventListener('resize', adjustSidebarHeight);
    }

    function setupFormChangeListeners() {
      const formInputs = document.querySelectorAll('.form-input, .form-select, .form-textarea, .toggle-switch input');
      formInputs.forEach(input => {
        input.addEventListener('input', handleFormChange);
        input.addEventListener('change', handleFormChange);
      });
    }

    function setupBeobachtungEventListeners() {
      const beobachtungInputs = document.querySelectorAll('#beobachtungName, #beobachtungDN, #beobachtungGrund');
      beobachtungInputs.forEach(input => {
        input.addEventListener('input', updateBeobachtungPreview);
      });
    }

    function handleFormChange() {
      if (currentEmployee) {
        saveFormData();
        updateTemplates();
        saveEmployeeData(true);
      }
    }

    function adjustSidebarHeight() {
      const sidebar = document.querySelector('.sidebar');
      const header = document.querySelector('.app-header');
      const windowHeight = window.innerHeight;
      const headerHeight = header.offsetHeight;

      const availableHeight = windowHeight - headerHeight - 40;
      const newHeight = Math.max(availableHeight, 500);
      sidebar.style.height = `${newHeight}px`;
    }

    // Beobachtung Functions
    function openBeobachtungAktenModal() {
      openModal('beobachtungAktenModal');
      updateBeobachtungPreview();
    }
    
    function openBeobachtungAktenModalForCurrentEmployee() {
      if (!currentEmployee) {
        showNotification('Bitte w√§hlen Sie zuerst einen Mitarbeiter aus', 'warning');
        return;
      }
      
      openBeobachtungAktenModal();
      document.getElementById('beobachtungName').value = currentEmployee.name || '';
      document.getElementById('beobachtungDN').value = currentEmployee.dn || '';
      updateBeobachtungPreview();
    }

    function closeBeobachtungAktenModal() {
      closeModal('beobachtungAktenModal');
    }

    function switchBeobachtungTab(tabName) {
      currentBeobachtungTab = tabName;
      
      // Update tab buttons
      document.querySelectorAll('.beobachtung-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      document.querySelectorAll('.beobachtung-tab')[tabName === 'new' ? 0 : tabName === 'list' ? 1 : 2].classList.add('active');
      
      // Update tab content
      document.querySelectorAll('.beobachtung-tab-content').forEach(content => {
        content.style.display = 'none';
      });
      document.getElementById(`beobachtung${tabName.charAt(0).toUpperCase() + tabName.slice(1)}Tab`).style.display = 'block';
      
      // Load data for the tab
      if (tabName === 'list') {
        renderBeobachtungListe();
      } else if (tabName === 'person') {
        renderBeobachtungPersonListe();
      }
    }

    function updateBeobachtungPreview() {
      const name = document.getElementById('beobachtungName').value;
      const dn = document.getElementById('beobachtungDN').value;
      const grund = document.getElementById('beobachtungGrund').value;

      const template = `‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
/////////////////////////////////////////////////////////////////////////
Beobachtung
Name: ${name || ''}
DN: ${dn || ''}
Grund: ${grund || ''}
/////////////////////////////////////////////////////////////////////////
<@&1097625910242447422>
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù`;

      document.getElementById('beobachtungPreview').textContent = template;
    }

    async function copyBeobachtungTemplate() {
      const template = document.getElementById('beobachtungPreview').textContent;
      const success = await copyToClipboard(template);
      showNotification(success ? 'Beobachtung kopiert' : 'Fehler beim Kopieren', success ? 'success' : 'error');
    }

    async function saveBeobachtung() {
      const name = document.getElementById('beobachtungName').value.trim();
      const dn = document.getElementById('beobachtungDN').value;
      const grund = document.getElementById('beobachtungGrund').value.trim();

      if (!name || !dn) {
        showNotification('Name und Dienstnummer sind erforderlich', 'warning');
        return;
      }

      if (!grund) {
        showNotification('Bitte geben Sie einen Grund f√ºr die Beobachtung an', 'warning');
        return;
      }

      const beobachtung = {
        id: `BEO-${Date.now()}-${Math.random().toString(36).slice(2, 9)}`,
        name,
        dn,
        grund,
        date: new Date().toISOString(),
        dateFormatted: new Date().toLocaleDateString('de-DE'),
        template: document.getElementById('beobachtungPreview').textContent
      };

      try {
        await db.collection('hrBeobachtungen').doc(beobachtung.id).set(beobachtung);
        beobachtungen.unshift(beobachtung);
        
        showNotification('Beobachtung gespeichert', 'success');
        
        // Felder leeren
        document.getElementById('beobachtungName').value = '';
        document.getElementById('beobachtungDN').value = '';
        document.getElementById('beobachtungGrund').value = '';
        updateBeobachtungPreview();
        
        // Update stats and lists
        updateStats();
        renderBeobachtungListe();
        renderBeobachtungPersonListe();
        
        // Switch to list tab to show the new entry
        switchBeobachtungTab('list');
      } catch (error) {
        console.error('Fehler beim Speichern der Beobachtung:', error);
        showNotification('Fehler beim Speichern: ' + error.message, 'error');
      }
    }

    async function loadBeobachtungen() {
      try {
        const snapshot = await db.collection('hrBeobachtungen').orderBy('date', 'desc').limit(100).get();
        beobachtungen = [];
        snapshot.forEach(doc => {
          const data = doc.data();
          beobachtungen.push({ 
            id: doc.id, 
            ...data,
            dateFormatted: data.dateFormatted || new Date(data.date).toLocaleDateString('de-DE')
          });
        });
        updateStats();
        renderBeobachtungListe();
        renderBeobachtungPersonListe();
      } catch (error) {
        console.error('Fehler beim Laden der Beobachtungen:', error);
      }
    }

    function renderBeobachtungListe() {
      const container = document.getElementById('beobachtungListe');
      
      if (beobachtungen.length === 0) {
        container.innerHTML = `
          <div class="empty-beobachtungen">
            <div class="empty-beobachtungen-icon"><i class="fas fa-folder-open"></i></div>
            <div class="empty-beobachtungen-title">Keine Beobachtungen</div>
            <div class="empty-description">Erstellen Sie Ihre erste Beobachtung</div>
          </div>
        `;
        return;
      }

      let html = '';
      beobachtungen.forEach(beobachtung => {
        html += `
          <div class="beobachtung-akte-item">
            <div class="beobachtung-akte-header">
              <div class="beobachtung-akte-name">${escapeHtml(beobachtung.name)}</div>
              <div class="beobachtung-akte-dn">DN ${escapeHtml(beobachtung.dn)}</div>
            </div>
            <div class="beobachtung-akte-date">
              <i class="fas fa-calendar"></i> ${beobachtung.dateFormatted}
            </div>
            <div class="beobachtung-akte-grund">
              ${escapeHtml(beobachtung.grund)}
            </div>
            <div class="beobachtung-akte-template">
              ${escapeHtml(beobachtung.template)}
            </div>
            <div class="beobachtung-akte-actions">
              <button class="beobachtung-akte-btn beobachtung-akte-btn-copy" onclick="copyBeobachtungAkte('${beobachtung.id}')">
                <i class="fas fa-copy"></i> Kopieren
              </button>
              <button class="beobachtung-akte-btn beobachtung-akte-btn-delete" onclick="deleteBeobachtung('${beobachtung.id}')">
                <i class="fas fa-trash"></i> L√∂schen
              </button>
            </div>
          </div>
        `;
      });

      container.innerHTML = html;
    }

    function renderBeobachtungPersonListe() {
      const container = document.getElementById('beobachtungPersonListe');
      
      // Group by person
      const personMap = {};
      beobachtungen.forEach(beobachtung => {
        const key = `${beobachtung.name}|${beobachtung.dn}`;
        if (!personMap[key]) {
          personMap[key] = {
            name: beobachtung.name,
            dn: beobachtung.dn,
            beobachtungen: []
          };
        }
        personMap[key].beobachtungen.push(beobachtung);
      });

      const persons = Object.values(personMap);
      
      if (persons.length === 0) {
        container.innerHTML = `
          <div class="empty-beobachtungen">
            <div class="empty-beobachtungen-icon"><i class="fas fa-users"></i></div>
            <div class="empty-beobachtungen-title">Keine Personen mit Beobachtungen</div>
            <div class="empty-description">Erstellen Sie Beobachtungen f√ºr Mitarbeiter</div>
          </div>
        `;
        return;
      }

      let html = '';
      persons.forEach(person => {
        html += `
          <div class="beobachtung-akte-item">
            <div class="beobachtung-akte-header">
              <div class="beobachtung-akte-name">${escapeHtml(person.name)}</div>
              <div class="beobachtung-akte-dn">DN ${escapeHtml(person.dn)}</div>
            </div>
            <div class="beobachtung-akte-date">
              <i class="fas fa-list"></i> ${person.beobachtungen.length} Beobachtung${person.beobachtungen.length !== 1 ? 'en' : ''}
            </div>
        `;

        // Show latest 2 beobachtungen for this person
        person.beobachtungen.slice(0, 2).forEach(beobachtung => {
          html += `
            <div class="beobachtung-akte-grund" style="margin-bottom: 8px; padding: 8px; background: rgba(0,0,0,.15);">
              <div style="font-size: 11px; color: var(--gray); margin-bottom: 4px;">
                <i class="fas fa-calendar"></i> ${beobachtung.dateFormatted}
              </div>
              ${escapeHtml(beobachtung.grund.length > 100 ? beobachtung.grund.substring(0, 100) + '...' : beobachtung.grund)}
            </div>
          `;
        });

        if (person.beobachtungen.length > 2) {
          html += `
            <div class="beobachtung-akte-grund" style="text-align: center; color: var(--primary-light); font-style: italic;">
              + ${person.beobachtungen.length - 2} weitere Beobachtungen
            </div>
          `;
        }

        html += `
            <div class="beobachtung-akte-actions">
              <button class="beobachtung-akte-btn beobachtung-akte-btn-copy" onclick="showAllBeobachtungenForPerson('${escapeHtml(person.name)}', '${escapeHtml(person.dn)}')">
                <i class="fas fa-eye"></i> Alle anzeigen
              </button>
            </div>
          </div>
        `;
      });

      container.innerHTML = html;
    }

    async function copyBeobachtungAkte(beobachtungId) {
      const beobachtung = beobachtungen.find(b => b.id === beobachtungId);
      if (!beobachtung) return;

      const success = await copyToClipboard(beobachtung.template);
      showNotification(success ? 'Beobachtung kopiert' : 'Fehler beim Kopieren', success ? 'success' : 'error');
    }

    async function deleteBeobachtung(beobachtungId) {
      if (!confirm('Beobachtung wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.')) return;

      try {
        await db.collection('hrBeobachtungen').doc(beobachtungId).delete();
        beobachtungen = beobachtungen.filter(b => b.id !== beobachtungId);
        
        updateStats();
        renderBeobachtungListe();
        renderBeobachtungPersonListe();
        showNotification('Beobachtung gel√∂scht', 'success');
      } catch (error) {
        console.error('Fehler beim L√∂schen der Beobachtung:', error);
        showNotification('Fehler beim L√∂schen: ' + error.message, 'error');
      }
    }

    function showAllBeobachtungenForPerson(name, dn) {
      // Filter beobachtungen for this person
      const personBeobachtungen = beobachtungen.filter(b => b.name === name && b.dn == dn);
      
      let html = '';
      personBeobachtungen.forEach(beobachtung => {
        html += `
          <div class="beobachtung-akte-item">
            <div class="beobachtung-akte-header">
              <div class="beobachtung-akte-name">${escapeHtml(beobachtung.name)}</div>
              <div class="beobachtung-akte-dn">DN ${escapeHtml(beobachtung.dn)}</div>
            </div>
            <div class="beobachtung-akte-date">
              <i class="fas fa-calendar"></i> ${beobachtung.dateFormatted}
            </div>
            <div class="beobachtung-akte-grund">
              ${escapeHtml(beobachtung.grund)}
            </div>
            <div class="beobachtung-akte-template">
              ${escapeHtml(beobachtung.template)}
            </div>
            <div class="beobachtung-akte-actions">
              <button class="beobachtung-akte-btn beobachtung-akte-btn-copy" onclick="copyBeobachtungAkte('${beobachtung.id}')">
                <i class="fas fa-copy"></i> Kopieren
              </button>
            </div>
          </div>
        `;
      });

      // Show in a modal
      const modalHtml = `
        <div class="beobachtung-akten-modal active" onclick="if(event.target===this)closeModal('personBeobachtungenModal')">
          <div class="beobachtung-akten-content">
            <div class="beobachtung-akten-header">
              <div class="beobachtung-akten-title">
                <i class="fas fa-user"></i> Beobachtungen f√ºr ${escapeHtml(name)} (DN ${escapeHtml(dn)})
              </div>
              <button class="beobachtung-akten-close" onclick="closeModal('personBeobachtungenModal')">
                <i class="fas fa-times"></i>
              </button>
            </div>
            <div class="beobachtung-akten-body">
              <div class="beobachtung-akten-liste">
                ${html || '<div class="empty-beobachtungen"><div class="empty-beobachtungen-icon"><i class="fas fa-folder-open"></i></div><div class="empty-beobachtungen-title">Keine Beobachtungen</div></div>'}
              </div>
            </div>
          </div>
        </div>
      `;

      const modalContainer = document.createElement('div');
      modalContainer.id = 'personBeobachtungenModal';
      modalContainer.innerHTML = modalHtml;
      document.body.appendChild(modalContainer);
    }

    // Firebase Functions
    async function loadEmployees() {
      try {
        showLoading();
        const snapshot = await db.collection('hrEmployees').orderBy('lastUpdated', 'desc').get();
        employees = [];

        snapshot.forEach(doc => {
          employees.push({ id: doc.id, ...doc.data() });
        });

        renderEmployeeList();
        updateStats();
        hideLoading();

        setTimeout(updateInductionDisplay, 100);
      } catch (error) {
        console.error('Fehler beim Laden der Mitarbeiter:', error);
        showNotification('Fehler beim Laden der Daten', 'error');
        loadMockEmployees();
        hideLoading();
      }
    }

    async function saveEmployeeToFirebase(employee) {
      try {
        const dataToSave = {
          name: employee.name,
          dn: employee.dn,
          unit: employee.unit,
          rank: employee.rank,
          lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
          inductions: employee.inductions || {},
          oralData: employee.oralData || {},
          orgData: employee.orgData || {}
        };

        await db.collection('hrEmployees').doc(employee.id).set(dataToSave, { merge: true });
        return true;
      } catch (error) {
        console.error('Fehler beim Speichern:', error);
        showNotification('Fehler beim Speichern: ' + error.message, 'error');
        return false;
      }
    }

    async function deleteEmployeeFromFirebase(employeeId) {
      try {
        await db.collection('hrEmployees').doc(employeeId).delete();
        return true;
      } catch (error) {
        console.error('Fehler beim L√∂schen:', error);
        showNotification('Fehler beim L√∂schen: ' + error.message, 'error');
        return false;
      }
    }

    // Employee List
    function renderEmployeeList() {
      const container = document.getElementById('employeeList');
      const countElement = document.getElementById('employeeCount');

      let filteredEmployees = getFilteredEmployees();

      filteredEmployees.sort((a, b) => {
        const nameA = (a.name || '').toUpperCase();
        const nameB = (b.name || '').toUpperCase();
        return nameA < nameB ? -1 : nameA > nameB ? 1 : 0;
      });

      if (filteredEmployees.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon"><i class="fas fa-user-plus"></i></div>
            <div class="empty-title">${getEmptyStateTitle()}</div>
            <div class="empty-description">${getEmptyStateDescription()}</div>
          </div>
        `;
        countElement.textContent = '0';
        return;
      }

      container.innerHTML = '';
      countElement.textContent = filteredEmployees.length;

      filteredEmployees.forEach(employee => {
        const card = document.createElement('div');
        card.className = `employee-card ${currentEmployee?.id === employee.id ? 'active' : ''}`;
        card.onclick = () => selectEmployee(employee);
        card.oncontextmenu = (e) => { e.preventDefault(); showEmployeeContextMenu(e, employee); };

        const oralCompleted = employee.inductions?.oral?.completed || false;
        const orgCompleted = employee.inductions?.org?.completed || false;

        card.innerHTML = `
          <div class="employee-top-row">
            <div class="employee-name">${escapeHtml(employee.name || '')}</div>
            <div class="employee-dn">DN ${escapeHtml(employee.dn || '')}</div>
          </div>
          <div class="employee-meta">
            <i class="fas fa-user-tie"></i> ${escapeHtml(employee.rank || 'Kein Rang')} ‚Ä¢
            <i class="fas fa-building"></i> ${escapeHtml(employee.unit || 'Keine Unit')}
          </div>
          <div class="induction-badges">
            <div class="induction-badge badge-oral ${oralCompleted ? 'completed' : 'pending'}">
              <i class="fas ${oralCompleted ? 'fa-check-circle' : 'fa-clock'}"></i>
              M√ºndlich
            </div>
            <div class="induction-badge badge-org ${orgCompleted ? 'completed' : 'pending'}">
              <i class="fas ${orgCompleted ? 'fa-check-circle' : 'fa-clock'}"></i>
              Organisatorisch
            </div>
          </div>
        `;

        container.appendChild(card);
      });
    }

    function getEmptyStateTitle() {
      return 'Keine Mitarbeiter';
    }

    function getFilteredEmployees() {
      if (currentFilter === 'oral') {
        return employees.filter(emp => !(emp.inductions?.oral?.completed));
      } else if (currentFilter === 'org') {
        return employees.filter(emp => !(emp.inductions?.org?.completed));
      }
      return employees;
    }

    function getEmptyStateDescription() {
      if (currentFilter === 'oral') return 'Keine Mitarbeiter mit ausstehender m√ºndlicher Einweisung';
      if (currentFilter === 'org') return 'Keine Mitarbeiter mit ausstehender organisatorischer Einweisung';
      return 'F√ºgen Sie Ihren ersten Mitarbeiter hinzu';
    }

    function filterEmployees(searchTerm) {
      const cards = document.querySelectorAll('.employee-card');
      const term = (searchTerm || '').toLowerCase().trim();

      if (!term) {
        cards.forEach(card => card.style.display = 'flex');
        return;
      }

      cards.forEach(card => {
        const text = card.textContent.toLowerCase();
        card.style.display = text.includes(term) ? 'flex' : 'none';
      });
    }

    function filterEmployeesByType(type) {
      currentFilter = type;

      document.querySelectorAll('.sidebar-filter-btn').forEach(btn => btn.classList.remove('active'));
      if (type === 'all') document.querySelectorAll('.sidebar-filter-btn')[0].classList.add('active');
      if (type === 'oral') document.querySelectorAll('.sidebar-filter-btn')[1].classList.add('active');
      if (type === 'org') document.querySelectorAll('.sidebar-filter-btn')[2].classList.add('active');

      renderEmployeeList();
    }

    function selectEmployee(employee) {
      currentEmployee = employee;

      document.getElementById('employeeHeader').style.display = 'flex';
      document.getElementById('inductionContent').style.display = 'block';

      updateEmployeeHeader();
      loadEmployeeData();
      updateInductionDisplay();
      renderEmployeeList();
    }

    function loadEmployeeData() {
      if (!currentEmployee) return;

      const oralData = currentEmployee.oralData || {};
      const orgData = currentEmployee.orgData || {};

      document.getElementById('oralExaminer').value = oralData.examiner || '';
      document.getElementById('oralDate').value = oralData.date || (new Date().toISOString().split('T')[0]);
      document.getElementById('oralTimeStart').value = oralData.timeStart || '16:40';
      document.getElementById('oralTimeEnd').value = oralData.timeEnd || '18:00';
      document.getElementById('oralPerson').value = oralData.person || '';
      document.getElementById('oralNotes').value = oralData.notes || '';
      document.getElementById('unitSelect').value = oralData.unit || currentEmployee.unit || '';
      document.getElementById('rankSelect').value = oralData.rank || currentEmployee.rank || '';

      document.getElementById('orgExaminer').value = orgData.examiner || '';
      document.getElementById('orgDate').value = orgData.date || (new Date().toISOString().split('T')[0]);
      document.getElementById('orgTimeStart').value = orgData.timeStart || '22:10';
      document.getElementById('orgTimeEnd').value = orgData.timeEnd || '23:05';
      document.getElementById('orgPerson').value = orgData.person || '';
      document.getElementById('orgNotes').value = orgData.notes || '';
      document.getElementById('unitSelect2').value = orgData.unit || currentEmployee.unit || '';
      document.getElementById('rankSelect2').value = orgData.rank || currentEmployee.rank || '';

      const oralCompleted = currentEmployee.inductions?.oral?.completed || false;
      const orgCompleted = currentEmployee.inductions?.org?.completed || false;

      document.getElementById('oralInductionToggle').checked = oralCompleted;
      document.getElementById('orgInductionToggle').checked = orgCompleted;

      updateInductionUI('oral', oralCompleted);
      updateInductionUI('org', orgCompleted);

      checkBothInductionsCompleted();
      updateTemplates();
    }

    function updateInductionDisplay() {
      if (!currentEmployee) return;

      const oralCompleted = currentEmployee.inductions?.oral?.completed || false;
      const orgCompleted = currentEmployee.inductions?.org?.completed || false;

      updateInductionUI('oral', oralCompleted);
      updateInductionUI('org', orgCompleted);

      renderEmployeeList();
    }

    function updateEmployeeHeader() {
      if (!currentEmployee) return;

      document.getElementById('currentEmployeeName').textContent = currentEmployee.name || '';
      document.getElementById('currentEmployeeDN').textContent = currentEmployee.dn || '';
      document.getElementById('currentEmployeeUnit').textContent = currentEmployee.unit || 'Keine Unit';
      document.getElementById('currentEmployeeRank').textContent = currentEmployee.rank || 'Kein Rang';
    }

    function updateInductionUI(type, completed) {
      const card = document.getElementById(`${type}InductionCard`);
      const status = document.getElementById(`${type}InductionStatus`);

      if (completed) {
        card.classList.add('completed');
        status.textContent = 'BESTANDEN';
      } else {
        card.classList.remove('completed');
        status.textContent = 'AUSSTEHEND';
      }
    }

    function saveFormData() {
      if (!currentEmployee) return;

      currentEmployee.oralData = {
        examiner: document.getElementById('oralExaminer').value,
        date: document.getElementById('oralDate').value,
        timeStart: document.getElementById('oralTimeStart').value,
        timeEnd: document.getElementById('oralTimeEnd').value,
        person: document.getElementById('oralPerson').value,
        notes: document.getElementById('oralNotes').value,
        unit: document.getElementById('unitSelect').value,
        rank: document.getElementById('rankSelect').value
      };

      currentEmployee.orgData = {
        examiner: document.getElementById('orgExaminer').value,
        date: document.getElementById('orgDate').value,
        timeStart: document.getElementById('orgTimeStart').value,
        timeEnd: document.getElementById('orgTimeEnd').value,
        person: document.getElementById('orgPerson').value,
        notes: document.getElementById('orgNotes').value,
        unit: document.getElementById('unitSelect2').value,
        rank: document.getElementById('rankSelect2').value
      };

      const unitSelectValue = document.getElementById('unitSelect').value;
      const rankSelectValue = document.getElementById('rankSelect').value;
      if (unitSelectValue) currentEmployee.unit = unitSelectValue;
      if (rankSelectValue) currentEmployee.rank = rankSelectValue;

      currentEmployee.lastUpdated = new Date().toISOString();
    }

    function openEditEmployeeModal() {
      if (!currentEmployee) {
        showNotification('Bitte w√§hlen Sie zuerst einen Mitarbeiter aus', 'warning');
        return;
      }

      document.getElementById('editEmployeeName').value = currentEmployee.name || '';
      document.getElementById('editEmployeeDN').value = currentEmployee.dn || '';
      document.getElementById('editEmployeeUnit').value = currentEmployee.unit || '';
      document.getElementById('editEmployeeRank').value = currentEmployee.rank || '';

      openModal('editEmployeeModal');
    }

    async function saveEditedEmployee() {
      if (!currentEmployee) return;

      const name = document.getElementById('editEmployeeName').value.trim();
      const dn = document.getElementById('editEmployeeDN').value;

      if (!name || !dn) {
        showNotification('Name und Dienstnummer sind Pflichtfelder', 'warning');
        return;
      }

      currentEmployee.name = name;
      currentEmployee.dn = dn;
      currentEmployee.unit = document.getElementById('editEmployeeUnit').value || '';
      currentEmployee.rank = document.getElementById('editEmployeeRank').value || '';

      const success = await saveEmployeeToFirebase(currentEmployee);
      if (success) {
        closeModal('editEmployeeModal');
        updateEmployeeHeader();
        renderEmployeeList();
        updateTemplates();
        showNotification('Mitarbeiterdaten erfolgreich aktualisiert', 'success');
      }
    }

    async function deleteCurrentEmployee() {
      if (!currentEmployee) {
        showNotification('Bitte w√§hlen Sie zuerst einen Mitarbeiter aus', 'warning');
        return;
      }

      if (!confirm(`Mitarbeiter "${currentEmployee.name}" (DN ${currentEmployee.dn}) wirklich l√∂schen?\n\nDiese Aktion kann nicht r√ºckg√§ngig gemacht werden!`)) {
        return;
      }

      const success = await deleteEmployeeFromFirebase(currentEmployee.id);
      if (success) {
        employees = employees.filter(emp => emp.id !== currentEmployee.id);

        closeModal('editEmployeeModal');

        currentEmployee = null;
        document.getElementById('employeeHeader').style.display = 'none';
        document.getElementById('inductionContent').style.display = 'none';

        renderEmployeeList();
        updateStats();
        showNotification('Mitarbeiter erfolgreich gel√∂scht', 'success');
      }
    }

    function toggleInduction(type, completed) {
      if (!currentEmployee) return;

      if (!currentEmployee.inductions) currentEmployee.inductions = {};

      currentEmployee.inductions[type] = {
        completed: completed,
        date: completed ? new Date().toISOString() : null,
        updatedBy: 'System'
      };

      updateInductionUI(type, completed);
      updateTemplates();

      saveEmployeeData(true);
      checkBothInductionsCompleted();
      renderEmployeeList();
      updateStats();

      const typeName = type === 'oral' ? 'M√ºndliche' : 'Organisatorische';
      const status = completed ? 'bestanden' : 'als ausstehend markiert';
      showNotification(`${typeName} Einweisung ${status}`, 'success');
    }

    function checkBothInductionsCompleted() {
      if (!currentEmployee) return false;

      const oralCompleted = currentEmployee.inductions?.oral?.completed || false;
      const orgCompleted = currentEmployee.inductions?.org?.completed || false;

      const nowBothCompleted = oralCompleted && orgCompleted;

      if (nowBothCompleted && !bothInductionsCompleted) {
        bothInductionsCompleted = true;
      } else if (!nowBothCompleted) {
        bothInductionsCompleted = false;
      }

      return nowBothCompleted;
    }

    function updateTemplates() {
      if (!currentEmployee) {
        seedTemplateBoxes();
        return;
      }

      saveFormData();

      const oralTemplate = generateTemplate('oral');
      document.getElementById('oralTemplateContent').textContent = oralTemplate;

      const orgTemplate = generateTemplate('org');
      document.getElementById('orgTemplateContent').textContent = orgTemplate;

      const oralCompleted = currentEmployee.inductions?.oral?.completed || false;
      const orgCompleted = currentEmployee.inductions?.org?.completed || false;

      document.getElementById('oralTemplateBadge').textContent = oralCompleted ? 'BESTANDEN' : 'AUSSTEHEND';
      document.getElementById('orgTemplateBadge').textContent = orgCompleted ? 'BESTANDEN' : 'AUSSTEHEND';

      document.getElementById('oralTemplateCard').classList.toggle('completed', oralCompleted);
      document.getElementById('orgTemplateCard').classList.toggle('completed', orgCompleted);
    }

    function generateTemplate(type) {
      const isOral = type === 'oral';
      const completed = isOral
        ? (currentEmployee.inductions?.oral?.completed || false)
        : (currentEmployee.inductions?.org?.completed || false);

      const data = isOral ? currentEmployee.oralData : currentEmployee.orgData;

      const name = currentEmployee.name || '';
      const dn = currentEmployee.dn || '';

      const unit = isOral
        ? (document.getElementById('unitSelect').value || currentEmployee.unit || '')
        : (document.getElementById('unitSelect2').value || currentEmployee.unit || '');

      const rank = isOral
        ? (document.getElementById('rankSelect').value || currentEmployee.rank || '')
        : (document.getElementById('rankSelect2').value || currentEmployee.rank || '');

      const date = data?.date ? new Date(data.date).toLocaleDateString('de-DE') : '';
      const timeStart = data?.timeStart || '';
      const timeEnd = data?.timeEnd || '';
      const person = data?.person || '';
      const notes = data?.notes || '';
      const examiner = data?.examiner || '';

      const timeSeparator = isOral ? 'bis' : '-';

      const unitDiscordId = unitDiscordIds[unit] || '';
      const rankDiscordId = rankDiscordIds[rank] || '';

      const unitDisplay = unitDiscordId ? `<@&${unitDiscordId}>` : unit;
      const rankDisplay = rankDiscordId ? `<@&${rankDiscordId}>` : rank;

      return `‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
/////////////////////////////////////////////////////////////////////////
${isOral ? 'M√ºndliche Einweisung' : 'Organisatorische Einweisung'}
Status: ${completed ? 'BESTANDEN' : 'AUSSTEHEND'}


Pr√ºfer : ${examiner}
Name: ${name}
DN: ${dn}
Hauptunit: ${unitDisplay}
Rang: ${rankDisplay}
Datum: ${date}
Uhrzeit: ${timeStart} ${timeSeparator} ${timeEnd}
Beteiligte: ${person}
Sonstiges: ${notes}

/////////////////////////////////////////////////////////////////////////
<@&1097625910242447422>
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù`;
    }

    async function saveEmployeeData(isAutoSave = false) {
      if (!currentEmployee) return;

      try {
        const success = await saveEmployeeToFirebase(currentEmployee);
        if (success) {
          if (!isAutoSave) showNotification('√Ñnderungen gespeichert', 'success');
          renderEmployeeList();
          updateStats();
        }
      } catch (error) {
        console.error('Fehler beim Speichern:', error);
        if (!isAutoSave) showNotification('Fehler beim Speichern', 'error');
      }
    }

    function updateStats() {
      document.getElementById('totalEmployees').textContent = employees.length;
      document.getElementById('totalBeobachtungen').textContent = beobachtungen.length;
    }

    function showEmployeeContextMenu(e, employee) {
      e.preventDefault();

      const existingMenu = document.getElementById('contextMenu');
      if (existingMenu) existingMenu.remove();

      const menu = document.createElement('div');
      menu.id = 'contextMenu';
      menu.style.cssText = `
        position: fixed;
        background: rgba(31, 41, 55, 0.95);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: 8px;
        padding: 8px;
        z-index: 1000;
        min-width: 160px;
        box-shadow: var(--shadow-md);
      `;

      menu.innerHTML = `
        <div style="padding: 8px; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
          <div style="font-weight: 900; color: white; margin-bottom: 2px; font-size: 13px;">${escapeHtml(employee.name || '')}</div>
          <div style="font-size: 11px; color: var(--gray);">DN: ${escapeHtml(employee.dn || '')}</div>
        </div>
        <div style="padding: 4px 0;">
          <button onclick="selectEmployee(employees.find(x => x.id === '${employee.id}')); openEditEmployeeModal(); document.getElementById('contextMenu')?.remove();"
            style="width:100%;text-align:left;padding:8px 10px;background:none;border:none;color:var(--primary-light);font-weight:900;cursor:pointer;transition:all .2s;border-radius:4px;display:flex;align-items:center;gap:6px;font-size:12px;margin-bottom:2px;">
            <i class="fas fa-edit"></i> Bearbeiten
          </button>
          <button onclick="selectEmployee(employees.find(x => x.id === '${employee.id}')); openBeobachtungAktenModalForCurrentEmployee(); document.getElementById('contextMenu')?.remove();"
            style="width:100%;text-align:left;padding:8px 10px;background:none;border:none;color:var(--secondary);font-weight:900;cursor:pointer;transition:all .2s;border-radius:4px;display:flex;align-items:center;gap:6px;font-size:12px;margin-bottom:2px;">
            <i class="fas fa-eye"></i> Beobachtungen
          </button>
          <button onclick="deleteEmployee('${employee.id}')"
            style="width:100%;text-align:left;padding:8px 10px;background:none;border:none;color:var(--danger);font-weight:900;cursor:pointer;transition:all .2s;border-radius:4px;display:flex;align-items:center;gap:6px;font-size:12px;margin-bottom:2px;">
            <i class="fas fa-trash"></i> L√∂schen
          </button>
          <button onclick="duplicateEmployee('${employee.id}')"
            style="width:100%;text-align:left;padding:8px 10px;background:none;border:none;color:var(--primary-light);font-weight:900;cursor:pointer;transition:all .2s;border-radius:4px;display:flex;align-items:center;gap:6px;font-size:12px;margin-bottom:2px;">
            <i class="fas fa-copy"></i> Duplizieren
          </button>
          <button onclick="exportEmployee('${employee.id}')"
            style="width:100%;text-align:left;padding:8px 10px;background:none;border:none;color:var(--secondary);font-weight:900;cursor:pointer;transition:all .2s;border-radius:4px;display:flex;align-items:center;gap:6px;font-size:12px;">
            <i class="fas fa-download"></i> Exportieren
          </button>
        </div>
      `;

      menu.style.left = `${Math.min(e.pageX, window.innerWidth - 180)}px`;
      menu.style.top = `${Math.min(e.pageY, window.innerHeight - 240)}px`;

      document.body.appendChild(menu);

      setTimeout(() => {
        const closeMenu = (event) => {
          if (!menu.contains(event.target)) {
            menu.remove();
            document.removeEventListener('click', closeMenu);
          }
        };
        document.addEventListener('click', closeMenu);
      }, 100);
    }

    async function deleteEmployee(employeeId) {
      if (!confirm('Mitarbeiter wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.')) return;

      const success = await deleteEmployeeFromFirebase(employeeId);
      if (success) {
        employees = employees.filter(emp => emp.id !== employeeId);

        if (currentEmployee?.id === employeeId) {
          currentEmployee = null;
          document.getElementById('employeeHeader').style.display = 'none';
          document.getElementById('inductionContent').style.display = 'none';
        }

        renderEmployeeList();
        updateStats();
        showNotification('Mitarbeiter gel√∂scht', 'success');
        document.getElementById('contextMenu')?.remove();
      }
    }

    async function duplicateEmployee(employeeId) {
      const employee = employees.find(emp => emp.id === employeeId);
      if (!employee) return;

      const newEmployee = {
        ...JSON.parse(JSON.stringify(employee)),
        id: `EMP-${Date.now()}-${Math.random().toString(36).slice(2, 9)}`,
        name: `${employee.name} (Kopie)`,
        lastUpdated: new Date().toISOString()
      };

      const success = await saveEmployeeToFirebase(newEmployee);
      if (success) {
        employees.unshift(newEmployee);
        renderEmployeeList();
        updateStats();
        showNotification('Mitarbeiter dupliziert', 'success');
        document.getElementById('contextMenu')?.remove();
      }
    }

    function exportEmployee(employeeId) {
      const employee = employees.find(emp => emp.id === employeeId);
      if (!employee) return;

      const data = JSON.stringify(employee, null, 2);
      const blob = new Blob([data], { type: 'application/json' });
      const url = URL.createObjectURL(blob);

      const a = document.createElement('a');
      a.href = url;
      a.download = `mitarbeiter-${(employee.name || 'unbekannt')}-${(employee.dn || '')}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      showNotification('Mitarbeiter exportiert', 'success');
      document.getElementById('contextMenu')?.remove();
    }

    async function copyToClipboard(text) {
      try {
        await navigator.clipboard.writeText(text);
        return true;
      } catch (err) {
        try {
          const textArea = document.createElement('textarea');
          textArea.value = text;
          document.body.appendChild(textArea);
          textArea.select();
          document.execCommand('copy');
          document.body.removeChild(textArea);
          return true;
        } catch {
          return false;
        }
      }
    }

    async function copyOralTemplate() {
      const template = document.getElementById('oralTemplateContent').textContent;
      const success = await copyToClipboard(template);
      showNotification(success ? 'M√ºndliche Einweisung kopiert' : 'Fehler beim Kopieren', success ? 'success' : 'error');
    }

    async function copyOrgTemplate() {
      const template = document.getElementById('orgTemplateContent').textContent;
      const success = await copyToClipboard(template);
      showNotification(success ? 'Organisatorische Einweisung kopiert' : 'Fehler beim Kopieren', success ? 'success' : 'error');
    }

    function openModal(modalId) {
      document.getElementById(modalId).classList.add('active');
    }

    function closeModal(modalId) {
      const modal = document.getElementById(modalId);
      if (modal) {
        modal.classList.remove('active');
        if (modalId === 'personBeobachtungenModal') {
          setTimeout(() => modal.remove(), 300);
        }
      }
    }

    function openNewEmployeeModal() {
      openModal('newEmployeeModal');
    }

    async function createNewEmployee() {
      const name = document.getElementById('newEmployeeName').value.trim();
      const dn = document.getElementById('newEmployeeDN').value;
      const unit = document.getElementById('newEmployeeUnit').value;
      const rank = document.getElementById('newEmployeeRank').value;

      if (!name || !dn) {
        showNotification('Bitte f√ºllen Sie alle Pflichtfelder aus (*)', 'warning');
        return;
      }

      const employeeId = `EMP-${Date.now()}-${Math.random().toString(36).slice(2, 9)}`;

      const newEmployee = {
        id: employeeId,
        name,
        dn,
        unit: unit || '',
        rank: rank || '',
        lastUpdated: new Date().toISOString(),
        inductions: { oral: { completed: false }, org: { completed: false } },
        oralData: { examiner: '', date: '', timeStart: '16:40', timeEnd: '18:00', person: '', notes: '', unit: unit || '', rank: rank || '' },
        orgData: { examiner: '', date: '', timeStart: '22:10', timeEnd: '23:05', person: '', notes: '', unit: unit || '', rank: rank || '' }
      };

      const success = await saveEmployeeToFirebase(newEmployee);
      if (success) {
        employees.unshift(newEmployee);
        closeModal('newEmployeeModal');
        renderEmployeeList();
        selectEmployee(newEmployee);
        updateStats();

        document.getElementById('newEmployeeName').value = '';
        document.getElementById('newEmployeeDN').value = '';
        document.getElementById('newEmployeeUnit').value = '';
        document.getElementById('newEmployeeRank').value = '';

        showNotification(`Mitarbeiter "${name}" erstellt`, 'success');
      }
    }

    function showNotification(message, type = 'info') {
      const notification = document.getElementById('notification');
      const messageElement = document.getElementById('notificationMessage');
      messageElement.textContent = message;

      if (type === 'success') notification.style.background = 'var(--secondary)';
      else if (type === 'error') notification.style.background = 'var(--danger)';
      else if (type === 'warning') notification.style.background = 'var(--warning)';
      else notification.style.background = 'var(--primary)';

      notification.classList.add('show');
      setTimeout(() => notification.classList.remove('show'), 3000);
    }

    function showLoading() {
      const content = document.getElementById('employeeList');
      content.innerHTML = `
        <div class="loading">
          <div class="loading-spinner"></div>
          <div style="color: var(--gray); font-weight: 900; font-size: 13px;">Lade Mitarbeiter...</div>
        </div>
      `;
    }

    function hideLoading() {
      // renderEmployeeList() wird nach loadEmployees() sowieso aufgerufen
    }

    function loadMockEmployees() {
      employees = [{
        id: 'emp1',
        name: 'Chapo Anatolian',
        dn: '43',
        unit: 'Air Force',
        rank: 'Captain',
        inductions: { oral: { completed: false }, org: { completed: false } },
        oralData: { examiner: 'HR Team', date: '2026-01-21', timeStart: '16:40', timeEnd: '18:00', person: 'HR Team', notes: '', unit: 'Air Force', rank: 'Captain' },
        orgData: { examiner: 'HR Team', date: '2026-01-21', timeStart: '22:10', timeEnd: '23:05', person: 'HR Team', notes: '', unit: 'Air Force', rank: 'Captain' }
      }];

      renderEmployeeList();
      updateStats();
      seedTemplateBoxes();
    }

    function seedTemplateBoxes() {
      document.getElementById('oralTemplateContent').textContent = `‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
/////////////////////////////////////////////////////////////////////////
M√ºndliche Einweisung

Pr√ºfer :
Name:
DN:
Hauptunit:
Rang:
Datum:
Uhrzeit:
Beteiligte:
Sonstiges:

/////////////////////////////////////////////////////////////////////////
<@&1097625910242447422>
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù`;

      document.getElementById('orgTemplateContent').textContent = `‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
/////////////////////////////////////////////////////////////////////////
Organisatorische Einweisung

Pr√ºfer :
Name:
DN:
Hauptunit:
Rang:
Datum:
Uhrzeit:
Beteiligte:
Sonstiges:

/////////////////////////////////////////////////////////////////////////
<@&1097625910242447422>
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù`;
    }

    function escapeHtml(str) {
      return String(str)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }
  </script>
</body>
</html>
